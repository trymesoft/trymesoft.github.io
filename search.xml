<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[æµ‹è¯•çŽ¯å¢ƒ MySQL ç‰ˆæœ¬å‡çº§å¯¼è‡´çš„ä¸€äº›é—®é¢˜]]></title>
    <url>%2F2019%2F01%2Fmysql-upgrade-problems%2F</url>
    <content type="text"><![CDATA[åŽŸå› æŸäº›é¡¹ç›®çš„åˆ›å»ºæ—¶é—´å­—æ®µéœ€è¦ç²¾ç¡®åˆ°æ¯«ç§’çº§ï¼Œè¯¥å­—æ®µç±»åž‹æ˜¯ timestampï¼Œå‚è€ƒ MySQL 5.7 å®˜æ–¹æ–‡æ¡£ï¼Œ0 åœ¨æ—¥æœŸç›¸å…³å­—æ®µä¸­çš„å«ä¹‰ä¸åŒï¼Œå¦‚ä¸‹è¡¨ï¼š Data Type â€œZeroâ€ Value DATE â€œ0000-00-00â€ TIME â€œ00:00:00â€ DATETIME â€œ0000-00-00 00:00:00â€ TIMESTAMP â€œ0000-00-00 00:00:00â€ YEAR 0000 ç”±æ­¤ï¼Œå¯ä»¥çœ‹åˆ°æ— è®ºæ˜¯ DATETIME è¿˜æ˜¯ TIMESTAMP å­—æ®µå±žæ€§ï¼Œé»˜è®¤éƒ½æ˜¯ç²¾ç¡®åˆ°ç§’çš„ã€‚ æŸ¥é˜…èµ„æ–™å‘çŽ°ï¼Œå¯ä»¥é€šè¿‡ TIMESTAMP(n) æ¥æŒ‡å®šç²¾ç¡®åº¦ï¼Œå®žé™…ä¿®æ”¹ä¸­å‘çŽ°å½“å‰æ•°æ®åº“ç‰ˆæœ¬æ˜¯ 5.5ï¼Œæ‰§è¡Œå­—æ®µç±»åž‹æ›´æ”¹æ—¶ä¸€ç›´æŠ¥é”™ï¼Œä½†æ˜¯åœ¨ 5.7 ç‰ˆæœ¬ä¸­å¯ä»¥æ­£å¸¸ä¿®æ”¹å­—æ®µç±»åž‹ï¼ŒåŽå°†æ•°æ®åº“æ›´æ–°åˆ° 5.7 ç‰ˆæœ¬ï¼Œemmâ€¦ï¼Œè¿Žæ¥å‡çº§çš„åŒæ—¶ï¼Œå°é—®é¢˜ä¹Ÿæ˜¯ä¸å°‘ã€‚ é—®é¢˜åŠè§£å†³mysql.user è¡¨ç»“æž„çš„æ”¹å˜5.5 å’Œ 5.7 ç‰ˆæœ¬çš„ mysql.user è¡¨ç»“æž„ä¸åŒï¼ˆæš‚ä¸ä»”ç»†æŽ¢è®¨ï¼‰ï¼Œå¯¼è‡´é¡¹ç›®ä¸­éœ€è¦è¿žæŽ¥ MySQL æ•°æ®åº“çš„åœ°æ–¹å…¨éƒ¨è®¤è¯å¤±è´¥ Access denied for test@192.168.53.6ï¼Œä½†æ˜¯ï¼Œè¯¥è¡¨ä¸­çš„æ•°æ®å…¨éƒ¨æ­£å¸¸ï¼Œå†…ç½‘å…¨éƒ¨å¯è¿žæŽ¥ï¼Œå°è¯•é‡ç½®å¯†ç ï¼š 1set password for 'test@192.168.%.%' = password('test666'); æ‰§è¡ŒæŠ¥é”™ï¼š 12ERROR 1805 (HY000): Column count of mysql.user is wrong. Expected 42, found 49. The table is probably corrupted æŸ¥è¯¢èµ„æ–™å‘çŽ°ï¼Œæ˜¯æ•°æ®åº“å‡çº§å¯¼è‡´çš„ï¼Œä¸¤ä¸ªç‰ˆæœ¬çš„è¡¨ç»“æž„ä¸åŒï¼Œåªå¥½æ‰§è¡Œå‡çº§å‘½ä»¤ï¼š 1mysql_upgrade -u root -p è¾“å…¥ root å¯†ç ç­‰å¾…æ‰§è¡Œå®Œæ¯•ä¹‹åŽå†æ›´æ”¹å¯†ç ï¼ŒSQL è¯­å¥æ‰§è¡ŒæˆåŠŸï¼Œå†åˆ·æ–°æƒé™å³å¯ï¼š 1flush privileges; GROUP BY é—®é¢˜æ—¥å¿—æŠ¥é”™ï¼š 1Cause: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'test.user.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by; å¯ä»¥çœ‹åˆ°æ˜¯ sql_mode=only_full_group_by çš„é—®é¢˜ï¼ŒæŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œå‘çŽ°é»˜è®¤çš„ sql_mode ä¸­æœ‰ only_full_group_byï¼Œè¯¥é…ç½®å¯¼è‡´ GROUP BY åŽçš„åˆ—å¿…é¡»åœ¨ SELECT çš„åˆ—ä¸­ã€‚ æ‰§è¡Œï¼š 1select @@sql_mode; æŸ¥çœ‹å½“å‰ sql_modeï¼Œå°† only_full_group_by åˆ é™¤å³å¯ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Thymeleaf çš„ç¼“å­˜å¯¼è‡´çƒ­éƒ¨ç½²çš„é—®é¢˜]]></title>
    <url>%2F2019%2F01%2Fidea-hotswap-thymeleaf-cache%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨ IDEA çƒ­éƒ¨ç½²é¡¹ç›®æ—¶ï¼Œä¹‹å‰çš„é¡¹ç›®é…ç½®å®ŒæˆåŽï¼Œé¡µé¢æ–‡ä»¶æ”¹åŠ¨æˆ–è€… Java æ–‡ä»¶æ”¹åŠ¨éƒ½èƒ½å³æ—¶çƒ­éƒ¨ç½²ï¼Œä½†æ˜¯åœ¨å…¬å¸ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œçƒ­éƒ¨ç½²çªç„¶å¤±æ•ˆï¼ŒæŠ˜è…¾äº†åŠå¤©ðŸ˜­ã€‚ èµ·å› å› ä¸ºè¦æŽ¥æ‰‹ä¸€ä¸ªé¡¹ç›®ï¼Œåœ¨éƒ¨ç½²è°ƒè¯•çš„è¿‡ç¨‹ä¸­ï¼Œå‘çŽ°é¡µé¢çš„çƒ­éƒ¨ç½²åœ¨ IDEA ä¸­ä¸å¥½ç”¨ï¼Œå½“é¡µé¢ä¸­çš„ä»£ç æ›´æ”¹æ—¶ï¼Œæ— è®ºæ˜¯ IDEA æ‰‹åŠ¨ update è¿˜æ˜¯å¤±åŽ»ç„¦ç‚¹ï¼Œè™½ç„¶å‡ºå‘äº†çƒ­éƒ¨ç½²ï¼Œä½†æ˜¯é¡µé¢æ–‡ä»¶åˆ†æ˜Žæœ‰äº†æ”¹åŠ¨ï¼Œä½†æ˜¯æ€»æ˜¯æç¤º Loaded classes are up to date.Nothing to reloadï¼Œå¾ˆæ˜¯å¥‡æ€ªðŸ¤”ï¼ŒåŽæ¥æ”¹åŠ¨ Java æ–‡ä»¶ï¼Œçƒ­éƒ¨ç½²æ²¡é—®é¢˜ï¼ŒçœŸæ˜¯å“”äº†ðŸ¶äº†ã€‚ è§£å†³å¼€å§‹ä»¥ä¸ºæ˜¯è‡ªå·±é…ç½®é…ç½®çš„é—®é¢˜ï¼Œå¯ä¹‹å‰çš„é¡¹ç›®ä¹Ÿæ˜¯è¿™ä¹ˆé…ç½®çš„ï¼Œæœ‰é—®é¢˜æ—©å°±æš´éœ²å‡ºæ¥äº†ï¼Œä¸åº”è¯¥æ˜¯é…ç½®çš„é—®é¢˜ã€‚ åœ¨ Dont&#39;t be evil --- Google çš„ç½‘ç«™ä¸Šé¨æ¸¸äº†ä¸€ç•ªï¼Œæ‰¾äº†å¥½å¤šç­”æ¡ˆéƒ½ä¸æ˜¯æƒ³è¦çš„ï¼Œç»ˆäºŽåœ¨ä¸‹ç­å‰å¤•è¢«æˆ‘æ‰¾åˆ°äº†ðŸ˜Žï¼Œç­”æ¡ˆåœ¨è¿™é‡Œã€‚ åŽŸæ¥æ˜¯ Thymeleaf çš„ç¼“å­˜ðŸ˜‚ï¼Œèµ¶ç´§åŽ»æŸ¥çœ‹é…ç½®æ–‡ä»¶ï¼Œå‘çŽ°äº† Thymeleaf çš„é…ç½®ï¼š 12345678...&lt;bean id="templateResolver" class="org.thymeleaf.templateresolver.ServletContextTemplateResolver"&gt; ... &lt;property name="cacheable" value="true"/&gt; &lt;property name="cacheTTLMs" value="#&#123;60*60*1000&#125;"/&gt; ...&lt;/bean&gt;... éƒ½æ˜¯è¿™ä¸ª cacheable çš„é”…ï¼Œæ”¹ä¸º false ï¼Œé‡å¯åŽä¸€åˆ‡æ­£å¸¸ï¼Œåˆèƒ½æ„‰å¿«çš„çŽ©è€äº†ðŸ˜Šã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>IDEA</tag>
        <tag>Thymeleaf</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL äº‹åŠ¡æ•èŽ·å¼‚å¸¸åŽæ— æ³•å›žæ»š]]></title>
    <url>%2F2019%2F01%2Ftransaction-not-rollback%2F</url>
    <content type="text"><![CDATA[å½“å‰é…ç½®ç”±äºŽé¡¹ç›®æ˜¯ SSM æ¡†æž¶æ•´åˆè€Œæˆï¼ŒMySQL çš„äº‹åŠ¡é…ç½®å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031&lt;!--æ•°æ®æºé…ç½®--&gt;&lt;bean name="dataSource" class="com.alibaba.druid.pool.DruidDataSource" init-method="init" destroy-method="close"&gt; &lt;property name="url" value="$&#123;jdbc_url&#125;" /&gt; &lt;property name="username" value="$&#123;jdbc_username&#125;" /&gt; &lt;property name="password" value="$&#123;jdbc_password&#125;" /&gt;&lt;/bean&gt;&lt;!--äº‹åŠ¡ç®¡ç†é…ç½®--&gt;&lt;bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; &lt;property name="dataSource" ref="dataSource" /&gt;&lt;/bean&gt;&lt;!--åˆ‡é¢é…ç½®--&gt;&lt;tx:advice id="txAdvice" transaction-manager="transactionManager"&gt; &lt;tx:attributes&gt; &lt;tx:method name="get*" read-only="true" /&gt; &lt;tx:method name="find*" read-only="true" /&gt; &lt;/tx:attributes&gt;&lt;/tx:advice&gt;&lt;!--AOP é…ç½®--&gt;&lt;aop:config&gt; &lt;!--æŠŠäº‹åŠ¡æŽ§åˆ¶åœ¨ Service å±‚--&gt; &lt;aop:pointcut id="allServiceMethod" expression="execution(* com.test.*.service..*.*(..))" /&gt; &lt;aop:advisor advice-ref="txAdvice" pointcut-ref="allServiceMethod" /&gt;&lt;/aop:config&gt;&lt;!-- å¼€å¯æ³¨è§£æ–¹å¼é…ç½®äº‹ç‰© --&gt;&lt;tx:annotation-driven transaction-manager="transactionManager" /&gt; é—®é¢˜åˆ†æžåœ¨ä¸€ä¸ªäº‹åŠ¡ç®¡ç†çš„æŽ¥å£ï¼Œæ–¹æ³•æŠ›å‡ºäº† NullPointerException å¼‚å¸¸ï¼Œä½†æ˜¯æœ‰å…³æ•°æ®åº“è¡¨çš„æ“ä½œå´æ²¡æœ‰å›žæ»šï¼Œä¼ªä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š 123456789...try &#123; noticeMapper.insert(notice); noticeLogMapper.insert(noticeLog);&#125; catch (Exception e) &#123; LOGGER.error("æ•°æ®æ’å…¥å¼‚å¸¸ï¼ï¼ï¼"); e.printStackTrace();&#125;... åœ¨ noticeLog çš„æ’å…¥è¿‡ç¨‹ä¸­ä»£ç æŠ›å‡ºäº†å¼‚å¸¸ï¼Œä½†æ˜¯ notice å´æˆåŠŸçš„æ’å…¥åˆ°äº†æ•°æ®åº“ï¼Œç›¸å½“äºŽè¿™ä¸ªæ˜Žæ˜Žè¢«äº‹åŠ¡ç®¡ç†çš„æ–¹æ³•åœ¨é‡åˆ°ç¨‹åºå¼‚å¸¸å´æ²¡æœ‰å›žæ»šäº‹åŠ¡ðŸ¤”ã€‚ æŸ¥é˜…æ–‡æ¡£åŠèµ„æ–™ï¼Œåœ¨ Spring å®˜æ–¹æ–‡æ¡£ä¸­æœ‰è§£é‡Šï¼š æ³¨æ„ä¸­é—´çº¢æ¡†æ®µè½ï¼Œç¿»è¯‘ä¸€ä¸‹ï¼š 123In its default configuration, the Spring Frameworkâ€™s transaction infrastructure code marks a transaction for rollback only in the case of runtime, unchecked exceptions. That is, when the thrown exception is an instance or subclass of RuntimeException. ( Error instances also, by default, result in a rollback). Checked exceptions that are thrown from a transactional method do not result in rollback in the default configuration. åœ¨å…¶é»˜è®¤é…ç½®ä¸­ï¼ŒSpring Frameworkçš„äº‹åŠ¡åŸºç¡€ç»“æž„ä»£ç ä»…åœ¨è¿è¡Œæ—¶æœªç»æ£€æŸ¥çš„å¼‚å¸¸æƒ…å†µä¸‹æ ‡è®°å›žæ»šäº‹åŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸æ˜¯RuntimeExceptionçš„å®žä¾‹æˆ–å­ç±»ã€‚ ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œé”™è¯¯å®žä¾‹ä¹Ÿä¼šå¯¼è‡´å›žæ»šï¼‰ã€‚ä»Žäº‹åŠ¡æ–¹æ³•æŠ›å‡ºçš„å·²æ£€æŸ¥å¼‚å¸¸ä¸ä¼šå¯¼è‡´åœ¨é»˜è®¤é…ç½®ä¸­å›žæ»šã€‚ å¯ä»¥çœ‹åˆ°ä»£ç æŠ›å‡º RuntimeException çš„å®žä¾‹ã€å­ç±»æˆ–åœ¨é»˜è®¤æƒ…å†µä¸‹çš„ Error æ‰ä¼šå¯¼è‡´å›žæ»šï¼Œä½†æ˜¯ï¼Œä»Žäº‹åŠ¡æ–¹æ³•æŠ›å‡ºçš„å·²æ£€æŸ¥å¼‚å¸¸ä¸ä¼šå¯¼è‡´åœ¨é»˜è®¤é…ç½®ä¸­å›žæ»šã€‚ æ‰€ä»¥ä»£ç ä¸­ try catch æ•èŽ·äº†å¼‚å¸¸ï¼Œå¯¼è‡´äº†äº‹åŠ¡æ— æ³•å›žæ»š(âŠ™xâŠ™)ã€‚ è§£å†³æ–¹æ¡ˆæ–¹æ¡ˆä¸€æ—¢ç„¶ä»£ç çš„å¼‚å¸¸è¢«æ•èŽ·åŽäº‹åŠ¡æ— æ³•å›žæ»šï¼Œé‚£ä¹ˆå¯ä»¥æ‰‹åŠ¨æŠ›å‡º RuntimeException çš„å®žä¾‹æˆ–å­ç±»ï¼š 12345678910...try &#123; noticeMapper.insert(notice); noticeLogMapper.insert(noticeLog);&#125; catch (Exception e) &#123; LOGGER.error("æ•°æ®æ’å…¥å¼‚å¸¸ï¼ï¼ï¼"); e.printStackTrace(); throw new RuntimeException();&#125;... æ–¹æ¡ˆäºŒæ—¢ç„¶äº‹åŠ¡æ²¡æœ‰è‡ªåŠ¨å›žæ»šï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è®¾ç½®äº‹åŠ¡çš„å›žæ»šï¼š 12345678910...try &#123; noticeMapper.insert(notice); noticeLogMapper.insert(noticeLog);&#125; catch (Exception e) &#123; LOGGER.error("æ•°æ®æ’å…¥å¼‚å¸¸ï¼ï¼ï¼"); e.printStackTrace(); TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();&#125;... å†æ¬¡è°ƒè¯•è¿è¡ŒåŽï¼Œäº‹åŠ¡æ­£å¸¸å›žæ»šðŸ˜Šã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¤§ç‰ˆæœ¬æ›´æ–°ä¸Šçº¿é—®é¢˜æ±‡æ€»]]></title>
    <url>%2F2019%2F01%2Fnew-version-problems%2F</url>
    <content type="text"><![CDATA[Tomcat å®¹å™¨å¯åŠ¨é—®é¢˜ å‰æ Spring Boot ç‰ˆæœ¬ 2.0.3.RELEASE druid-spring-boot-starter ç‰ˆæœ¬ 1.1.9 mysql-connector-java ç‰ˆæœ¬ 5.1.46 MySQL æ•°æ®åº“ç‰ˆæœ¬ 5.7 Tomcat ç‰ˆæœ¬ 7.0.67ï¼ˆæœ€ç»ˆå‡çº§äº†ç‰ˆæœ¬åˆ° Tomcat 8ï¼‰ JDK ç‰ˆæœ¬ 1.7ï¼ˆæœ€ç»ˆå‡çº§åˆ°1.8ï¼‰ é—®é¢˜ï¼š æµ‹è¯•ã€ç”Ÿäº§é…ç½®æ–‡ä»¶å±žæ€§ä¸åŒæ­¥ï¼Œç”Ÿäº§çŽ¯å¢ƒå¾ˆå¤šå±žæ€§æœªé…ç½®ï¼Œå¯¼è‡´é”™è¯¯æ³¨å…¥ã€‚è§£å†³ï¼š å°†æ‰€æœ‰æ³¨å…¥çš„ API åœ°å€åŒæ­¥ã€‚ é—®é¢˜ï¼š å¯åŠ¨æ—¶ Dubbo æŠ¥é”™ï¼Œæ‰¾ä¸åˆ°æœåŠ¡ã€‚ è§£å†³ï¼š æä¾›è€…æ‰€åœ¨æœºå™¨ Dubbo ç«¯å£æœªå¼€æ”¾ï¼Œå¼€æ”¾å¯¹åº”ç«¯å£å³å¯ã€‚ é—®é¢˜ï¼š Tomcat æ— æ³•å¯åŠ¨ï¼Œæ¯æ¬¡å¯åŠ¨æŠ¥ä¸åŒçš„é”™è¯¯ã€‚ è§£å†³ï¼š JDKç‰ˆæœ¬å‡çº§åˆ° 1.8â†’Tomcat ç‰ˆæœ¬å‡çº§åˆ° 7.0.92 é—®é¢˜ï¼š java.lang.NoClassDefFoundError: javax/el/ELManager è§£å†³ï¼šå‚è€ƒ é—®é¢˜ï¼š é…ç½®ï¼š 1234567# MySQLæ•°æ®æºé…ç½® datasource: driver-class-name: com.mysql.jdbc.Driver druid: url: jdbc\:mysql\://rds.xxx.com\:3306/xxx?useUnicode\=true&amp;characterEncoding\=UTF-8&amp;zeroDateTimeBehavior\=convertToNull username: xxx password: password å¼‚å¸¸ä¿¡æ¯ï¼š 1234567891011Caused by: java.sql.SQLException: connect error, url jdbc\:mysql\://rds.xxx.com\:3306/xxx?useUnicode\=true&amp;characterEncoding\=UTF-8&amp;zeroDateTimeBehavior\=convertToNull, driverClass com.mysql.jdbc.Driver at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1582) at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:859) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1833) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1776) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1704) ... 116 more è§£å†³ï¼š å¼‚å¸¸ä¿¡æ¯é‡Œéžå¸¸æ˜Žç¡®çš„æåŠæ˜¯æ•°æ®åº“è¿žæŽ¥ url çš„é—®é¢˜ï¼Œåœ¨ Spring Boot çš„ yml é…ç½®æ–‡ä»¶ä¸­ï¼Œæ ¼å¼ä¸ºï¼šproperty: value å±žæ€§åç§°åŠ ã€Œ:ã€ä¹‹åŽæœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œé¡¹ç›®ä¹‹å‰çš„é…ç½®æ–‡ä»¶ä¸­ MySQL æ•°æ®åº“çš„è¿žæŽ¥åœ°å€è½¬ä¹‰è¿‡ï¼Œè¿™é‡Œç›´æŽ¥å¤åˆ¶è¿‡æ¥ä½¿ç”¨ï¼Œæ˜¯è¡Œä¸é€šçš„ï¼Œå°†è½¬ä¹‰å­—ç¬¦ã€Œ\ã€åŽ»æŽ‰å³å¯ã€‚ Tomcat é‡å¯ä¹‹åŽå¼‚å¸¸é—®é¢˜ï¼š å¼‚å¸¸ä¿¡æ¯ï¼š 12345678910111213org.apache.catalina.session.StandardManager doLoadSEVERE: IOException while loading persisted sessions: java.io.EOFExceptionjava.io.EOFException at java.io.ObjectInputStream$PeekInputStream.readFully(ObjectInputStream.java:2298) at java.io.ObjectInputStream$BlockDataInputStream.readShort(ObjectInputStream.java:2767) at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:798) at java.io.ObjectInputStream.&lt;init&gt;(ObjectInputStream.java:298) ...org.apache.catalina.session.StandardManager startInternalSEVERE: Exception loading sessions from persistent storagejava.io.EOFException ... è§£å†³ï¼š åˆ é™¤ ${catalina.home}/work/Catalina/localhost/${APP-NAME}/SESSION.ser å³å¯ é—®é¢˜ï¼š Dubbo æŠ¥é”™ æŠ¥é”™ä¿¡æ¯ï¼š 12345672018-12-15 20:26:52,387 [DubboSaveRegistryCache-thread-1] WARN [com.alibaba.dubbo.registry.zookeeper.ZookeeperRegistry] - [DUBBO] Failed to save registry store file, cause: Can not lock the registry cache file /root/.dubbo/dubbo-registry-10.11.12.13.cache, ignore and retry later, maybe multi java process use the file, please config: dubbo.registry.file=xxx.properties, dubbo version: 2.5.3, current host: 10.20.30.40java.io.IOException: Can not lock the registry cache file /root/.dubbo/dubbo-registry-10.11.12.13.cache, ignore and retry later, maybe multi java process use the file, please config: dubbo.registry.file=xxx.properties at com.alibaba.dubbo.registry.support.AbstractRegistry.doSaveProperties(AbstractRegistry.java:193) at com.alibaba.dubbo.registry.support.AbstractRegistry$SaveProperties.run(AbstractRegistry.java:150) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) at java.lang.Thread.run(Thread.java:745) Dubbo ä¼šä½¿ç”¨æ–‡ä»¶ç¼“å­˜æ³¨å†Œä¸­å¿ƒåœ°å€åˆ—è¡¨åŠæœåŠ¡æä¾›è€…åˆ—è¡¨ï¼Œé»˜è®¤è·¯å¾„åœ¨ /${user.home}/.dubbo/dubbo-registry-10.20.30.40.cacheï¼Œåº”ç”¨é‡å¯æ—¶å°†åŸºäºŽæ­¤æ–‡ä»¶æ¢å¤ï¼Œä¸€å°æœåŠ¡å™¨æœ‰å¤šä¸ªåº”ç”¨ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶æ¢å¤æ—¶ï¼Œä¼šå‡ºçŽ°è¿™ä¸ªè­¦å‘Šã€‚ è§£å†³ï¼š å¯ä»¥åœ¨æ¯ä¸ªé¡¹ç›® Dubbo é…ç½®æ–‡ä»¶ä¸­çš„ dubbo:registry æ ‡ç­¾ä¸­çš„ file æŒ‡å®šä¸åŒçš„æ–‡ä»¶è·¯å¾„ã€‚ å®˜æ–¹æ–‡æ¡£ å‚è€ƒåœ°å€ é—®é¢˜ï¼š Tomcat å®¹å™¨æ— æ—¥å¿—è¾“å‡ºlogback-spring.xmlé…ç½®ï¼š12345678910...&lt;!-- æµ‹è¯•çŽ¯å¢ƒ+å¼€å‘çŽ¯å¢ƒ. --&gt; &lt;springProfile name="test,dev"&gt; &lt;logger name="com.xxx.im" level="INFO"/&gt; &lt;/springProfile&gt; &lt;!-- ç”Ÿäº§çŽ¯å¢ƒ --&gt; &lt;springProfile name="prod"&gt; &lt;logger name="com.xxx.im" level="ERROR"/&gt; &lt;/springProfile&gt;... è§£å†³ï¼š ç”Ÿäº§çŽ¯å¢ƒæ—¥å¿—è¾“å‡ºçº§åˆ«è¿‡é«˜ï¼ŒINFO çº§åˆ«çš„æ— æ³•è¾“å‡ºï¼Œå°† ERROR æ”¹ä¸º INFO å³å¯ã€‚ è½¬æˆ˜åŽä¸ºäº‘ä¹‹åŽðŸ™‚ RabbitMQ è¿žæŽ¥ Spring Boot ç‰ˆæœ¬ 2.0.3.RELEASE é—®é¢˜ï¼š RabbitMQ ç›´æŽ¥ä½¿ç”¨ yaml é…ç½®å¦‚ä¸‹ï¼š 123456spring: rabbitmq: host: rabbitmq.xxx.com username: user password: password123456 port: 5672 é¡¹ç›®å¯åŠ¨æ—¶æŠ¥é”™ä¿¡æ¯ï¼š 123... ...ForgivingExceptionHandler - An unexpected connection driver error occured (Exception message: Connection closed)... è§£å†³ï¼š ä»Žå¼‚å¸¸æ—¥å¿—ä¸­å¯ä»¥å¾ˆæ˜Žæ˜¾çš„çœ‹åˆ°ï¼Œæ˜¯ Connection closedï¼Œè§£å†³æ€è·¯å¦‚ä¸‹ï¼š åˆæ­¥åˆ¤æ–­å½“å‰æœºå™¨æ— æ³•è¿žé€š RabbitMQ æ‰€åœ¨æœºå™¨ï¼Œä½¿ç”¨ ping rabbitmq.xxx.com å‘½ä»¤å¯ä»¥ ping é€š RabbitMQ æ‰€åœ¨æœºå™¨ï¼Œå¹¶ä¸” telnet rabbitmq.xxx.com 5672 ä¹Ÿæ˜¯å¯ä»¥è¿žé€šçš„ï¼ŒæŽ’é™¤æ­¤åŽŸå› ï¼› ç¡®è®¤ usernameã€password å‡†ç¡®æ€§ï¼Œå‘çŽ° RabbitMQ æ˜¯æ–°è£…çš„ï¼Œä½¿ç”¨å‘½ä»¤æŸ¥çœ‹å…¶ç”¨æˆ·ï¼š 123[root@rabbit ~]# rabbitmqctl list_usersListing users ...admin [administrator] å‘çŽ°å¹¶æ²¡æœ‰ user è¿™ä¸ªç”¨æˆ·ï¼Œåˆ›å»ºç”¨æˆ·ï¼š 12[root@rabbit ~]# rabbitmqctl add_user user password123456Creating user "user" ... è®¾ç½®ä¸ºç®¡ç†å‘˜ï¼š 12[root@rabbit ~]# rabbitmqctl set_user_tags user administratorSetting tags for user "user" to [administrator] ... æ­¤æ—¶ï¼Œä½¿ç”¨è¯¥ç”¨æˆ·ç™»å½• RabbitMQ WEB ç«¯ç®¡ç†é¡µé¢åŽæŸ¥çœ‹è¯¥ç”¨æˆ·ä¿¡æ¯ï¼šç‚¹å‡» Set permission é…ç½®æƒé™ï¼Œé‡å¯é¡¹ç›®åŽé—®é¢˜è§£å†³ã€‚ Tomcat é—®é¢˜é—®é¢˜ï¼š å¯åŠ¨ Tomcat å®¹å™¨æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š 123org.apache.tomcat.jni.Error: 70023: This function has not been implemented on this platform at org.apache.tomcat.jni.SSL.initialize(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) è§£å†³ï¼š ä¿®æ”¹ $TOMCAT_HOME/conf/server.xml ä¸­çš„ &lt;Listener className=&quot;org.apache.catalina.core.AprLifecycleListener&quot; SSLEngine=&quot;off&quot; /&gt; å³å¯è§£å†³ã€‚ Tomcat é—®é¢˜é—®é¢˜ï¼š å¯åŠ¨ Tomcat å®¹å™¨æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š 123org.apache.tomcat.jni.Error: 70023: This function has not been implemented on this platform at org.apache.tomcat.jni.SSL.initialize(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) è§£å†³ï¼š ä¿®æ”¹ $TOMCAT_HOME/conf/server.xml ä¸­çš„ &lt;Listener className=&quot;org.apache.catalina.core.AprLifecycleListener&quot; SSLEngine=&quot;off&quot; /&gt; å³å¯è§£å†³ã€‚ çº¿ä¸Šé—®é¢˜å¤„ç†é—®é¢˜ï¼š MongoDB ç‰ˆæœ¬ï¼šTokuMX 2.0.2 | MongoDB 2.4 spring-data-mongodb ç‰ˆæœ¬ï¼š1.4.1.RELEASE spring-data-commons ç‰ˆæœ¬ï¼š1.7.2.RELEASE 12345678java.lang.IllegalArgumentException: You have to provide at least one property to sort by! at org.springframework.data.domain.Sort.&lt;init&gt;(Sort.java:91) at org.springframework.data.domain.Sort.&lt;init&gt;(Sort.java:79) ... at sun.reflect.GeneratedMethodAccessor415.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:606) ... è§£å†³ï¼š å¼‚å¸¸ä¿¡æ¯å¾ˆæ˜Žç¡®ï¼Œæœªæä¾›æŽ’åºçš„å±žæ€§ï¼Œæ£€æŸ¥ä»£ç ï¼Œå¼‚å¸¸ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š 123456789101112... @Autowired private MongoTemplate mongoTemplate;... Query query = new Query();List&lt;String&gt; sortStrList = new ArrayList&lt;&gt;();if (...) &#123; sortStrList.add("property"); &#125;query.with(new Sort(Sort.Direction.DESC, sortStrList.toArray(new String[sortStrList.size()]))) mongoTemplate.find(query, Xxx.class);... å¾ˆæ˜Žæ˜¾ï¼ŒæŽ’åºå±žæ€§é›†åˆ sortStrList ä¸­æœ‰å¯èƒ½æ²¡æœ‰ä»»ä½•å±žæ€§ï¼Œå†æŸ¥çœ‹ org.springframework.data.domain.Sort ä¸­çš„æž„é€ æ–¹æ³•ï¼š 123456789101112131415161718public Sort(Sort.Direction direction, String... properties) &#123; this(direction, (List)(properties == null ? new ArrayList() : Arrays.asList(properties)));&#125;public Sort(Sort.Direction direction, List&lt;String&gt; properties) &#123; if (properties != null &amp;&amp; !properties.isEmpty()) &#123; this.orders = new ArrayList(properties.size()); Iterator i$ = properties.iterator(); while(i$.hasNext()) &#123; String property = (String)i$.next(); this.orders.add(new Sort.Order(direction, property)); &#125; &#125; else &#123; throw new IllegalArgumentException("You have to provide at least one property to sort by!"); &#125;&#125; å¯ä»¥çœ‹å‡ºï¼ŒsortStrList å®Œå…¨æ— éœ€è½¬æ¢ä¸ºæ•°ç»„ï¼Œä½†è¿™ä¸æ˜¯ä¸»è¦åŽŸå› ï¼Œä»Žä¸‹é¢çš„æž„é€ æ–¹æ³•ä¸­å¯ä»¥çœ‹å‡ºï¼Œä¼ å…¥çš„ List é›†åˆä¸å¯ä¸ºç©ºå¯¹è±¡å¹¶ä¸”å¿…é¡»é›†åˆå¤§å°å¿…é¡»å¤§äºŽ 0ï¼Œæ‰€ä»¥è§£å†³æ–¹æ¡ˆå¯ä»¥æœ‰å¤šç§ï¼Œåªéœ€æŽ§åˆ¶ sortStrList é›†åˆä¸ä¸ºç©ºä¸” size å¤§äºŽ 0ï¼Œæˆ–è€…æ ¹æ®åˆ¤æ–­æŸ¥è¯¢ä¸åŠ æŽ’åºæ¡ä»¶ä¹Ÿå¯ä»¥è§£å†³ã€‚ é—®é¢˜ï¼š 12345678910111213141516171819org.springframework.data.mongodb.UncategorizedMongoDbException: Lock not granted. Try restarting the transaction.; nested exception is com.mongodb.MongoException: Lock not granted. Try restarting the transaction. at org.springframework.data.mongodb.core.MongoExceptionTranslator.translateExceptionIfPossible(MongoExceptionTranslator.java:83) at org.springframework.data.mongodb.core.MongoTemplate.potentiallyConvertRuntimeException(MongoTemplate.java:1828) at org.springframework.data.mongodb.core.MongoTemplate.execute(MongoTemplate.java:409) at org.springframework.data.mongodb.core.MongoTemplate.doUpdate(MongoTemplate.java:995) at org.springframework.data.mongodb.core.MongoTemplate.updateFirst(MongoTemplate.java:969) ... at sun.reflect.GeneratedMethodAccessor378.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:606) at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317) at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:80) ... at sun.reflect.GeneratedMethodAccessor200.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:606) è§£å†³ï¼š æ‰‹åŠ¨é…ç½®çš„ MongoDB äº‹åŠ¡é—®é¢˜ï¼Œå°šæœªå½»åº•è§£å†³ã€‚ é—®é¢˜ï¼š Spring æ•´åˆ MongoDBé…ç½®æ–‡ä»¶ï¼š 1234567891011&gt; &lt;bean id="mongoOptions" class="com.mongodb.MongoOptions"&gt;&gt; ...&gt; &lt;!-- è¿žæŽ¥è¶…æ—¶æ—¶é—´(æ¯«ç§’)ï¼Œé»˜è®¤ä¸º4000 --&gt;&gt; &lt;property name="connectTimeout" value="4000" /&gt;&gt; &lt;!-- socketè¯»å†™æ—¶è¶…æ—¶æ—¶é—´(æ¯«ç§’)ï¼Œé»˜è®¤ä¸º0ï¼Œä¸è¶…æ—¶ --&gt;&gt; &lt;property name="socketTimeout" value="0" /&gt;&gt; &lt;!-- æ˜¯socketè¿žæŽ¥åœ¨é˜²ç«å¢™ä¸Šä¿æŒæ´»åŠ¨çš„ç‰¹æ€§ï¼Œé»˜è®¤ä¸ºfalse --&gt;&gt; &lt;property name="socketKeepAlive" value="true" /&gt;&gt; ...&gt; &lt;/bean&gt;&gt; 1234567891011121314151617181920212223242526272829303132333435org.springframework.dao.DataAccessResourceFailureException: can't say something; nested exception is com.mongodb.MongoException$Network: can't say something at org.springframework.data.mongodb.core.MongoExceptionTranslator.translateExceptionIfPossible(MongoExceptionTranslator.java:56) at org.springframework.data.mongodb.core.MongoTemplate.potentiallyConvertRuntimeException(MongoTemplate.java:1828) at org.springframework.data.mongodb.core.MongoTemplate.execute(MongoTemplate.java:409) at org.springframework.data.mongodb.core.MongoTemplate.insertDBObject(MongoTemplate.java:893) at org.springframework.data.mongodb.core.MongoTemplate.doInsert(MongoTemplate.java:713) at org.springframework.data.mongodb.core.MongoTemplate.insert(MongoTemplate.java:668) at org.springframework.data.mongodb.core.MongoTemplate.insert(MongoTemplate.java:659) at net.okdi.o2o.core.helper.ExceptionHelper.afterThrow(ExceptionHelper.java:71) at sun.reflect.GeneratedMethodAccessor438.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:606) ... at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) at java.lang.Thread.run(Thread.java:745)Caused by: com.mongodb.MongoException$Network: can't say something at com.mongodb.DBTCPConnector.say(DBTCPConnector.java:194) at com.mongodb.DBTCPConnector.say(DBTCPConnector.java:155) at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:249) at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:205) at com.mongodb.DBCollection.insert(DBCollection.java:57) at com.mongodb.DBCollection.insert(DBCollection.java:100) at org.springframework.data.mongodb.core.MongoTemplate$8.doInCollection(MongoTemplate.java:898) at org.springframework.data.mongodb.core.MongoTemplate.execute(MongoTemplate.java:407) ... 44 moreCaused by: java.io.IOException: couldn't connect to [mongodb.xxx.com/192.168.1.22:27017] bc:java.net.SocketTimeoutException: connect timed out at com.mongodb.DBPort._open(DBPort.java:214) at com.mongodb.DBPort.go(DBPort.java:107) at com.mongodb.DBPort.go(DBPort.java:88) at com.mongodb.DBPort.findOne(DBPort.java:143) at com.mongodb.DBPort.runCommand(DBPort.java:148) at com.mongodb.DBPort.checkAuth(DBPort.java:307) at com.mongodb.DBTCPConnector.say(DBTCPConnector.java:180) ... 51 more è§£å†³ï¼š å¼‚å¸¸æœ€åŽå¾ˆæ˜Žç¡®çš„æç¤ºäº† connect timed out è¿žæŽ¥è¶…æ—¶çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°† connectTimeout è¿žæŽ¥è¶…æ—¶å±žæ€§é€‚å½“æ‰©å¤§ï¼Œå¦‚æžœæ˜¯æç¤º read timed outï¼ŒåŽŸå› æ˜¯åœ¨è¿›è¡Œæ•°æ®æ“ä½œæ—¶è¿‡é•¿æ—¶é—´æ²¡æœ‰è¿”å›žç»“æžœï¼Œæ­¤æ—¶è¦ä¿®æ”¹ socketTimeout å±žæ€§äº†ã€‚ å‚è€ƒæ–‡ç« ]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>å·¥ä½œè®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring Boot war åŒ…æ–¹å¼å¯åŠ¨é—®é¢˜]]></title>
    <url>%2F2019%2F01%2Fspring-boot-war-problems%2F</url>
    <content type="text"><![CDATA[Spring Boot æ”¯æŒ jar åŒ…å’Œ war åŒ…ä¸¤ç§æ‰“åŒ…æ–¹å¼ã€‚jar åŒ…æ–¹å¼è¿è¡Œç®€å•ï¼Œå¯¹äºŽè½»é‡çš„é¡¹ç›®ï¼Œä»Žæž„é€ åˆ°éƒ¨ç½²æžå¤§çš„æå‡äº†æ•ˆçŽ‡ï¼›war åŒ…æ–¹å¼å¯¹äºŽå¯åŠ¨å‚æ•°ã€é›†ç¾¤é…ç½®æ¥è¯´å¯èƒ½æ›´æ–¹ä¾¿ä¸€äº›ã€‚åœ¨ä½¿ç”¨ war åŒ…æ–¹å¼çš„æ—¶å€™é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œè®°å½•ä¸‹æ¥ðŸ“ã€‚ å‰ææ¦‚è¦ Spring Boot ç‰ˆæœ¬2.0.3.RELEASE æ‰“åŒ…æ–¹å¼ 12- JDK1.8 ç¼–ç  UTF-8- ä¾èµ–åªå¼•å…¥äº†``` spring-boot-starter-webã€spring-boot-starter-test Tomcat ç‰ˆæœ¬ 7.0.82 é—®é¢˜é…ç½®å¥½é¡¹ç›®åŠ Tomcat éƒ¨ç½²åŽå¯åŠ¨å¤±è´¥ï¼Œæœ‰è¿™ä¹ˆä¸€è¡Œå¼‚å¸¸ä¿¡æ¯ï¼š1Caused by: java.lang.NoClassDefFoundError: javax/el/ELManager è§£å†³è·¯å¾„ç¼ºå°‘ jar åŒ…ç¬¬ä¸€ååº”ï¼Œç¼ºå°‘ jar åŒ…ï¼Œåœ¨ pom æ–‡ä»¶å¼•å…¥ï¼š12345&lt;dependency&gt; &lt;groupId&gt;javax.el&lt;/groupId&gt; &lt;artifactId&gt;javax.el-api&lt;/artifactId&gt; &lt;version&gt;3.0.0&lt;/version&gt;&lt;/dependency&gt; é‡æ–°å¯åŠ¨åŽé—®é¢˜ä»ç„¶å­˜åœ¨ï¼ŒåŠ å…¥ &lt;scope&gt;provided&lt;/scope&gt; åŽä»ç„¶ä¸è¡Œï¼Œå¤±è´¥ã€‚ hibernate-validator ç‰ˆæœ¬è¿‡é«˜æœç´¢åŽæœ‰æ–‡ç« è¯´æ˜¯ å½“å‰ç‰ˆæœ¬çš„ Spring Bootï¼Œä¾èµ–çš„éªŒè¯ hibernate-validator ç‰ˆæœ¬å¤ªé«˜ï¼Œå¯¼è‡´æ‰¾ä¸åˆ° ELManagerã€‚æŸ¥çœ‹é¡¹ç›®ä¾èµ–æ ‘ï¼Œå‘çŽ°æ˜¯web ä¾èµ–ä¸­çš„æŸ¥çœ‹å…¶ä»–é¡¹ç›®ä¸­åŒæ ·å†™æ³•å¹¶ä¸æŠ¥é”™ï¼ŒæŽ’é™¤è¿™ç§åŽŸå› ã€‚ Tomcat ç‰ˆæœ¬æœ‰äººè¯´ Tomcat7 æä¾›çš„ el-api.jar ç‰ˆæœ¬æ˜¯ 2.2ï¼ŒTomcat8 çš„ç‰ˆæœ¬æ˜¯ 3.0ï¼Œæœªå°è¯•åˆ‡æ¢ Tomcatç‰ˆæœ¬ã€‚ æœ€ç»ˆè§£å†³å°†ä¸‹è½½çš„ el-api3.0 çš„ jar åŒ…æ‹·è´åˆ° $TOMCAT_HOME/lib ä¸‹æ›¿æ¢ä¹‹å‰çš„ el-api.jar å³å¯ã€‚ å‚è€ƒåœ°å€ï¼šstackoverflow]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Spring Boot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring Boot ä½¿ç”¨ä¸­çš„å°é—®é¢˜æ€»ç»“]]></title>
    <url>%2F2019%2F01%2Fspring-boot-use-problems%2F</url>
    <content type="text"><![CDATA[Spring Boot ä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜æ€»ç»“ï¼ŒæŒç»­æ›´æ–°â€¦ IDEA ä¸­è¯»å–é…ç½®æ–‡ä»¶é—®é¢˜é—®é¢˜å¦‚å›¾ï¼šè§£å†³æ–¹æ¡ˆï¼šå¼•å…¥å¦‚ä¸‹ä¾èµ–12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; æ­¤æ—¶ä¼šå‡ºçŽ°å¦‚ä¸‹å›¾ï¼šå¯ä»¥ç›´æŽ¥å¿½ç•¥ã€‚ Tomcat å®¹å™¨å¯åŠ¨è¿‡æ…¢çš„é—®é¢˜å¯åŠ¨é¡¹ç›®æ—¶ï¼Œæ˜Žæ˜Žä¸€ä¸ªå¾ˆç®€å•çš„é¡¹ç›®ï¼Œå´å¯åŠ¨å¾ˆæ…¢ï¼ŒTomcat æ—¥å¿—ä¸­æœ‰è¿™ä¹ˆä¸€è¡Œï¼š1WARNING: Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [20,617] milliseconds. å¯åŠ¨æˆåŠŸè€—æ—¶ï¼š1INFO: Server startup in 33239 ms è¿™ä¸ªè­¦å‘Šçš„æ“ä½œè€—äº†å¤§åŠçš„å¯åŠ¨æ—¶é—´ï¼ŒæŸ¥é˜… Tomcat çš„wikiå‘çŽ°è¿™ä¹ˆä¸€æ®µè¯ï¼šè§£é‡Šå¾—å¾ˆæ¸…æ¥šï¼ŒTomcat å¯åŠ¨æ—¶ç†µæºçš„ç”Ÿæˆé»˜è®¤æ˜¯ JRE çš„é˜»å¡žå¼ç†µæºï¼ˆ/ dev / randomï¼‰ï¼Œæ›¿æ¢ä¸ºéžé˜»å¡žå¼ç†µæºï¼ˆ/ dev /./ urandomï¼‰å³å¯ï¼Œä½†æ˜¯ä¼šé™ä½Žå®‰å…¨æ€§ï¼Œå› ä¸ºèŽ·å¾—çš„éšæœºæ•°æ®è¾ƒå°‘ã€‚ä¿®æ”¹æ–¹å¼ï¼šç›´æŽ¥ä¿®æ”¹ $JAVA_HOME/jre/lib/security/java.security ä¸­1securerandom.source=file:/dev/./urandom æˆ–è€…ç›´æŽ¥æ‰§è¡Œ1java -jar app.jar -Djava.security.egd=file:/dev/./urandom ä¿®æ”¹å®Œå†å¯åŠ¨ï¼š1INFO: Server startup in 10847 ms æ•ˆæžœè¿˜æ˜¯å¾ˆæ˜¾è‘—çš„ðŸ˜Šã€‚ é™æ€å˜é‡çš„æ³¨å…¥æ—¥å¸¸å¼€å‘ä¸­ï¼Œä¸€èˆ¬å¸¸ç”¨çš„å·¥å…·ä¼šæŠ½å–åˆ°å·¥å…·ç±»ä¸­ï¼Œå·¥å…·ç±»ä¸­çš„æ–¹æ³•ä¸€èˆ¬éƒ½æ˜¯é™æ€è°ƒç”¨çš„ï¼Œæ–¹æ³•ä¸­å¯èƒ½ä¼šæ³¨å…¥å…¶ä»–æˆå‘˜å˜é‡ï¼Œç”±äºŽæ–¹æ³•æ˜¯ static çš„ï¼Œæ‰€ä»¥æˆå‘˜å˜é‡ä¹Ÿå¿…é¡»æ˜¯é™æ€çš„ã€‚æ­¤æ—¶ï¼Œä½¿ç”¨ @Autowired å·²ç»æ— æ³•æ³¨å…¥ï¼Œæ­¤æ—¶å°±éœ€è¦æ–°çš„æ“ä½œäº†ðŸ˜ã€‚é¦–å…ˆï¼Œå°†éœ€è¦ä½¿ç”¨çš„å®šä¹‰ä¸ºé™æ€å˜é‡ï¼š1private static RestTemplate restTemplate; ç„¶åŽç”Ÿæˆ set æ–¹æ³•å¹¶åœ¨æ–¹æ³•ä¸ŠåŠ  @Autowiredï¼ˆè¯»å–å±žæ€§æ–‡ä»¶çš„è¯ä½¿ç”¨ @Valueï¼‰æ³¨è§£ï¼ˆæ³¨æ„ä¸è¦åŠ  staticï¼‰ï¼š1234@Autowired public void setRestTemplate(RestTemplate restTemplate) &#123; AuthTokenUtil.restTemplate = restTemplate; &#125; æœ€åŽï¼Œç±»ä¸ŠåŠ ä¸Š @Componentæ³¨è§£å³å¯ã€‚ RestTemplate çš„ GET è¯·æ±‚çš„ Headers è®¾ç½®RestTemplate ä»‹ç» Springâ€™s central class for synchronous client-side HTTP access. It simplifies communication with HTTP servers, and enforces RESTful principles. It handles HTTP connections, leaving application code to provide URLs (with possible template variables) and extract results. Spring çš„åŒæ­¥å®¢æˆ·ç«¯ HTTP è®¿é—®çš„ä¸­å¿ƒç±»ã€‚å®ƒç®€åŒ–äº†ä¸Ž HTTP æœåŠ¡å™¨çš„é€šä¿¡ï¼Œå¹¶å®žæ–½äº† RESTful åŽŸåˆ™ã€‚å®ƒå¤„ç† HTTP è¿žæŽ¥ï¼Œä½¿åº”ç”¨ç¨‹åºä»£ç æä¾› URLï¼ˆå¸¦æœ‰å¯èƒ½çš„æ¨¡æ¿å˜é‡ï¼‰å¹¶æå–ç»“æžœã€‚ çŽ¯å¢ƒé…ç½® Spring Boot ç‰ˆæœ¬ 2.0.3.RELEASE spring-web-5.0.7.RELEASE.jar çš„ RestTemplate RestTemplate çš„é…ç½® 12345678910111213141516171819202122232425262728293031323334import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.http.client.ClientHttpRequestFactory;import org.springframework.http.client.SimpleClientHttpRequestFactory;import org.springframework.web.client.RestTemplate;/** * @author tryme.wang * @create 2018-11-30 10:59:48 * @description RestTemplateé…ç½® **/@Configurationpublic class RestTemplateConfig &#123; @Bean public RestTemplate restTemplate(ClientHttpRequestFactory factory) &#123; RestTemplate restTemplate = new RestTemplate(factory); return restTemplate; &#125; @Bean public ClientHttpRequestFactory simpleClientHttpRequestFactory() &#123; /** * é»˜è®¤æƒ…å†µä¸‹ï¼ŒRestTemplateä¾èµ–äºŽæ ‡å‡†JDKå·¥å…·æ¥å»ºç«‹HTTPè¿žæŽ¥ã€‚ * å¯ä»¥é€šè¿‡InterceptingHttpAccessor.setRequestFactoryï¼ˆorg.springframework.http.client.ClientHttpRequestFactoryï¼‰ * å±žæ€§åˆ‡æ¢åˆ°ä½¿ç”¨ä¸åŒçš„HTTPåº“ï¼Œä¾‹å¦‚Apache HttpComponentsï¼ŒNettyå’ŒOkHttpã€‚ */ SimpleClientHttpRequestFactory factory = new SimpleClientHttpRequestFactory(); // å•ä½ï¼šms factory.setReadTimeout(5000); // å•ä½ï¼šms factory.setConnectTimeout(15000); return factory; &#125;&#125; æ–¹æ¡ˆRestTemplate ä½¿ç”¨æ—¶å¯èƒ½ä¼šæœ‰ Headers ä¸­éœ€è¦ä¼ å…¥ token ä¹‹ç±»å‚æ•°çš„æƒ…å†µï¼Œä½¿ç”¨ POST è¯·æ±‚æ—¶ï¼ŒRestTemplate çš„ API ä¸­æœ‰æ˜Žæ˜¾çš„æ–¹æ³•postForEntityæˆ–postForObjectï¼š ç„¶è€Œ GET è¯·æ±‚å¹¶æ²¡æœ‰æ˜Žæ˜¾å¯ä»¥ç†è§£çš„ API ä½¿ç”¨ï¼ŒæŸ¥é˜…èµ„æ–™å‘çŽ°äº† exchange æ–¹æ³•å¯ä»¥æŒ‡å®š HTTP è¯·æ±‚æ–¹å¼ï¼š okï¼Œå°±å®ƒäº†ï¼Œè€Œä¸”å…¶ä»–è¯·æ±‚æ–¹å¼å‡å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¥æ‰§è¡Œ Headersã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Spring Boot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RestTemplate è‡ªå®šä¹‰ ErrorHandler]]></title>
    <url>%2F2019%2F01%2Fresttemplate-errorhandler%2F</url>
    <content type="text"><![CDATA[åœ¨ä½¿ç”¨ Spring Boot çš„ RestTemplate è°ƒç”¨æ—¶ï¼Œå‘çŽ°è°ƒç”¨æˆåŠŸæ—¶å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯æœåŠ¡å™¨è¿”å›ž 4xx æˆ–è€… 5xx å¼‚å¸¸æ—¶ï¼Œè¿™è´§ç›´æŽ¥ç»™æŠ›å‡ºæ¥äº†ï¼Œæƒ³è¦å¤„ç†å¯ä»¥è‡ªå®šä¹‰ ErrorHandlerã€‚ é—®é¢˜å½“æœåŠ¡ç«¯è¿”å›žéž 200 æ—¶ï¼Œè°ƒç”¨æ–¹ç›´æŽ¥æŠ›å‡ºå¦‚ä¸‹å¼‚å¸¸ï¼š12345678910org.springframework.web.client.HttpClientErrorException: 400 Bad Request at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:94) at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:766) at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:724) at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:680) at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:466) ... ä¸ºä»€ä¹ˆä¼šæŠ›å¼‚å¸¸å‘¢ï¼Œå¯ä»¥ç¿»ä¸€ä¸‹æºç ï¼šRestTemplate ä¸­12345public &lt;T&gt; ResponseEntity&lt;T&gt; postForEntity(String url, @Nullable Object request, Class&lt;T&gt; responseType, Object... uriVariables) throws RestClientException &#123; RequestCallback requestCallback = this.httpEntityCallback(request, responseType); ResponseExtractor&lt;ResponseEntity&lt;T&gt;&gt; responseExtractor = this.responseEntityExtractor(responseType); return (ResponseEntity)nonNull(this.execute(url, HttpMethod.POST, requestCallback, responseExtractor, uriVariables)); &#125; ç»§ç»­ç¿»ï¼š12345@Nullable public &lt;T&gt; T execute(String url, HttpMethod method, @Nullable RequestCallback requestCallback, @Nullable ResponseExtractor&lt;T&gt; responseExtractor, Object... uriVariables) throws RestClientException &#123; URI expanded = this.getUriTemplateHandler().expand(url, uriVariables); return this.doExecute(expanded, method, requestCallback, responseExtractor); &#125; å†å¾€ä¸‹ï¼š123456789101112131415161718192021222324252627282930@Nullable protected &lt;T&gt; T doExecute(URI url, @Nullable HttpMethod method, @Nullable RequestCallback requestCallback, @Nullable ResponseExtractor&lt;T&gt; responseExtractor) throws RestClientException &#123; Assert.notNull(url, "URI is required"); Assert.notNull(method, "HttpMethod is required"); ClientHttpResponse response = null; Object var14; try &#123; ClientHttpRequest request = this.createRequest(url, method); if (requestCallback != null) &#123; requestCallback.doWithRequest(request); &#125; response = request.execute(); this.handleResponse(url, method, response); var14 = responseExtractor != null ? responseExtractor.extractData(response) : null; &#125; catch (IOException var12) &#123; String resource = url.toString(); String query = url.getRawQuery(); resource = query != null ? resource.substring(0, resource.indexOf(63)) : resource; throw new ResourceAccessException("I/O error on " + method.name() + " request for \"" + resource + "\": " + var12.getMessage(), var12); &#125; finally &#123; if (response != null) &#123; response.close(); &#125; &#125; return var14; &#125; ç»§ç»­ï¼š123456789101112131415protected void handleResponse(URI url, HttpMethod method, ClientHttpResponse response) throws IOException &#123; ResponseErrorHandler errorHandler = this.getErrorHandler(); boolean hasError = errorHandler.hasError(response); if (this.logger.isDebugEnabled()) &#123; try &#123; this.logger.debug(method.name() + " request for \"" + url + "\" resulted in " + response.getRawStatusCode() + " (" + response.getStatusText() + ")" + (hasError ? "; invoking error handler" : "")); &#125; catch (IOException var7) &#123; &#125; &#125; if (hasError) &#123; errorHandler.handleError(url, method, response); &#125; &#125; ç»ˆäºŽçœ‹åˆ°äº†æƒ³è¦çš„ï¼Œå¯ä»¥çœ‹å‡º hasError ä¸º trueï¼Œå³æœ‰é”™è¯¯æ—¶ï¼Œä¼šèµ° errorHandler.handleError(url, method, response)ï¼ŒæŽ¥ä¸‹æ¥ç»§ç»­æŸ¥çœ‹è¿™ä¸ª errorHandler çš„æºç ï¼š123456789public interface ResponseErrorHandler &#123; boolean hasError(ClientHttpResponse var1) throws IOException; void handleError(ClientHttpResponse var1) throws IOException; default void handleError(URI url, HttpMethod method, ClientHttpResponse response) throws IOException &#123; this.handleError(response); &#125;&#125; è¿™æ˜¯ä¸€ä¸ªæŽ¥å£ï¼Œæˆ‘ä»¬ç‚¹è¿›å®ƒçš„å®žçŽ°ç±» DefaultResponseErrorHandler çš„ handleError()12345678public void handleError(ClientHttpResponse response) throws IOException &#123; HttpStatus statusCode = HttpStatus.resolve(response.getRawStatusCode()); if (statusCode == null) &#123; throw new UnknownHttpStatusCodeException(response.getRawStatusCode(), response.getStatusText(), response.getHeaders(), this.getResponseBody(response), this.getCharset(response)); &#125; else &#123; this.handleError(response, statusCode); &#125; &#125; ç»§ç»­å¾€ä¸‹ï¼š12345678910protected void handleError(ClientHttpResponse response, HttpStatus statusCode) throws IOException &#123; switch(statusCode.series()) &#123; case CLIENT_ERROR: throw new HttpClientErrorException(statusCode, response.getStatusText(), response.getHeaders(), this.getResponseBody(response), this.getCharset(response)); case SERVER_ERROR: throw new HttpServerErrorException(statusCode, response.getStatusText(), response.getHeaders(), this.getResponseBody(response), this.getCharset(response)); default: throw new UnknownHttpStatusCodeException(statusCode.value(), response.getStatusText(), response.getHeaders(), this.getResponseBody(response), this.getCharset(response)); &#125; &#125; å¯ç®—æ‰¾åˆ°åŽŸå› äº†ï¼ŒåŽŸæ¥åœ¨è¿™é‡ŒæŠ›å‡ºäº†ä¸€ä¸ª HttpClientErrorExceptionï¼Œæ—¢ç„¶ DefaultResponseErrorHandler å®žçŽ°äº† ResponseErrorHandlerï¼Œè€Œä¸”ä»Žåå­—ä¸Šçœ‹è²Œä¼¼æ˜¯ä¸ªé»˜è®¤çš„é”™è¯¯å¤„ç†ï¼Œé‚£æˆ‘ä»¬å¯ä»¥å°è¯•è‡ªå®šä¹‰ ErrorHandler å®žçŽ° ResponseErrorHandler æ¥å¤„ç†å¼‚å¸¸æƒ…å†µã€‚ è‡ªå®šä¹‰ ErrorHandler1234567891011121314151617181920212223import org.springframework.http.client.ClientHttpResponse;import org.springframework.web.client.DefaultResponseErrorHandler;import java.io.IOException;/** * @author tryme.wang * @create 2018-12-03 11:10 * @description è¿œç¨‹è°ƒç”¨è‡ªå®šä¹‰å¼‚å¸¸Handler **/public class RestErrorHandler extends DefaultResponseErrorHandler &#123; @Override public boolean hasError(ClientHttpResponse response) throws IOException &#123; // æ˜¯å¦æœ‰é”™ è¿”å›žfalseå³æ‰‹åŠ¨è®¾ç½®äº†ä¸ç®¡responseæ˜¯ä»€ä¹ˆéƒ½æ²¡æœ‰é”™ return false; &#125; @Override public void handleError(ClientHttpResponse response) throws IOException &#123; // æš‚æ—¶ç©ºç€ &#125;&#125; åˆ«å¿˜è®°é…ç½®è¿›åŽ»ï¼š1234567891011121314151617181920212223242526272829303132import com.merrichat.im.common.handler.RestErrorHandler;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.http.client.ClientHttpRequestFactory;import org.springframework.http.client.SimpleClientHttpRequestFactory;import org.springframework.web.client.RestTemplate;/** * @author tryme.wang * @create 2018-11-30 10:59:48 * @desc httpè¯·æ±‚é…ç½® ï¼ˆæ›¿ä»£httpclientï¼‰ **/@Configurationpublic class RestTemplateConfig &#123; @Bean public RestTemplate restTemplate(ClientHttpRequestFactory factory) &#123; RestTemplate restTemplate = new RestTemplate(factory); // ä½¿ç”¨è‡ªå®šä¹‰çš„ErrorHandler restTemplate.setErrorHandler(new RestErrorHandler()); return restTemplate; &#125; @Bean public ClientHttpRequestFactory simpleClientHttpRequestFactory() &#123; SimpleClientHttpRequestFactory factory = new SimpleClientHttpRequestFactory(); // å•ä½ï¼šms factory.setReadTimeout(5000); // å•ä½ï¼šms factory.setConnectTimeout(15000); return factory; &#125;&#125; è¿™æ ·æ— è®ºæœåŠ¡ç«¯è¿”å›žä»€ä¹ˆçŠ¶æ€ç ï¼Œå®¢æˆ·ç«¯éƒ½ä¼šè®¤ä¸ºæ²¡é”™ï¼Œæˆ‘ä»¬å°±å¯ä»¥èŽ·å–æƒ³è¦çš„ statusCode æˆ–è€… body è¿›è€Œæ¥å¤„ç†å„ç§ä¸šåŠ¡äº†ðŸ˜‰ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Spring Boot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL å­—æ®µé»˜è®¤å€¼çš„é—®é¢˜]]></title>
    <url>%2F2019%2F01%2Fmysql-column-default-value%2F</url>
    <content type="text"><![CDATA[å‰æä½¿ç”¨ SQL è„šæœ¬åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œé‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼ŒSQL è„šæœ¬å¦‚ä¸‹ï¼š 123456create table test( ... create_time datetime not null default now() comment &apos;åˆ›å»ºæ—¶é—´&apos;, ...) åœ¨ä¸ºâ€create_timeâ€œå­—æ®µè®¾ç½®é»˜è®¤å€¼ä¸ºå½“å‰æ—¶é—´æ—¶ï¼ŒSQL æ‰§è¡ŒæŠ¥äº†ä¸€ä¸ªé”™è¯¯å¦‚ä¸‹ï¼š 1[42000][1067] Invalid default value for &apos;create_time&apos; å­—æ®µé»˜è®¤å€¼æ— æ•ˆçš„åŽŸå› ï¼ŒæŸ¥çœ‹äº†ä¸‹å½“å‰çš„ MySQL ç‰ˆæœ¬ï¼š 1234567mysql&gt; select version();+------------+| version() |+------------+| 5.5.35-log |+------------+1 row in set (0.00 sec) ç‰ˆæœ¬æ˜¯ 5.5 çš„ã€‚ è§£å†³æ€è·¯æŸ¥çœ‹äº† MySQL 5.5 çš„æ–‡æ¡£ï¼Œåœ¨ Data Type Default Values è¿™ä¸€æ®µä¸­æœ‰è¿™ä¹ˆä¸ªæè¿°ï¼š 12With one exception, the default value specified in a DEFAULT clause must be a literal constant; it cannot be a function or an expression. This means, for example, that you cannot set the default for a date column to be the value of a function such as NOW() or CURRENT_DATE. The exception is that, for a TIMESTAMP column, you can specify CURRENT_TIMESTAMP as the default. See Section 11.3.5, â€œAutomatic Initialization and Updating for TIMESTAMPâ€. ï¼ˆé™¤äº†ä¸€ä¸ªä¾‹å¤–ï¼ŒDEFAULTå­å¥ä¸­æŒ‡å®šçš„é»˜è®¤å€¼å¿…é¡»æ˜¯æ–‡å­—å¸¸é‡;å®ƒä¸èƒ½æ˜¯ä¸€ä¸ªåŠŸèƒ½æˆ–è¡¨è¾¾ã€‚è¿™æ„å‘³ç€ï¼Œä¾‹å¦‚ï¼Œæ‚¨ä¸èƒ½å°†æ—¥æœŸåˆ—çš„é»˜è®¤å€¼è®¾ç½®ä¸ºå‡½æ•°çš„å€¼ï¼Œä¾‹å¦‚NOWï¼ˆï¼‰æˆ–CURRENT_DATEã€‚ä¾‹å¤–æƒ…å†µæ˜¯ï¼Œå¯¹äºŽTIMESTAMPåˆ—ï¼Œæ‚¨å¯ä»¥å°†CURRENT_TIMESTAMPæŒ‡å®šä¸ºé»˜è®¤å€¼ã€‚è¯·å‚è§ç¬¬11.3.5èŠ‚â€œTIMESTAMPçš„è‡ªåŠ¨åˆå§‹åŒ–å’Œæ›´æ–°â€ã€‚ï¼‰ åŽŸå› å¾ˆæ˜Žæ˜¾äº†ï¼ŒDEFAULT æŒ‡å®šçš„é»˜è®¤å€¼ä¸èƒ½æ˜¯ NOW() ï¼Œå¯ä»¥å°† â€create_timeâ€œå­—æ®µçš„ç±»åž‹æ”¹ä¸º TIMESTAMPï¼Œå†å°†é»˜è®¤å€¼è®¾ä¸º CURRENT_TIMESTAMP æ¥ä½¿ç”¨ã€‚ PSï¼šMySQL 5.6/5.7 ç‰ˆæœ¬ä¸­ï¼Œå¯¹äºŽé»˜è®¤å€¼çš„æè¿°æœ‰æ‰€å˜åŒ–ï¼š 12With one exception, the default value specified in a DEFAULT clause must be a literal constant; it cannot be a function or an expression. This means, for example, that you cannot set the default for a date column to be the value of a function such as NOW() or CURRENT_DATE. The exception is that, for TIMESTAMP and DATETIME columns, you can specify CURRENT_TIMESTAMP as the default. See Section 11.3.5, â€œAutomatic Initialization and Updating for TIMESTAMP and DATETIMEâ€. ï¼ˆé™¤äº†ä¸€ä¸ªä¾‹å¤–ï¼ŒDEFAULTå­å¥ä¸­æŒ‡å®šçš„é»˜è®¤å€¼å¿…é¡»æ˜¯æ–‡å­—å¸¸é‡;å®ƒä¸èƒ½æ˜¯ä¸€ä¸ªåŠŸèƒ½æˆ–è¡¨è¾¾ã€‚è¿™æ„å‘³ç€ï¼Œä¾‹å¦‚ï¼Œæ‚¨ä¸èƒ½å°†æ—¥æœŸåˆ—çš„é»˜è®¤å€¼è®¾ç½®ä¸ºå‡½æ•°çš„å€¼ï¼Œä¾‹å¦‚NOWï¼ˆï¼‰æˆ–CURRENT_DATEã€‚ä¾‹å¤–æƒ…å†µæ˜¯ï¼Œå¯¹äºŽTIMESTAMPå’ŒDATETIMEåˆ—ï¼Œæ‚¨å¯ä»¥å°†CURRENT_TIMESTAMPæŒ‡å®šä¸ºé»˜è®¤å€¼ã€‚è¯·å‚è§ç¬¬11.3.5èŠ‚â€œTIMESTAMPå’ŒDATETIMEçš„è‡ªåŠ¨åˆå§‹åŒ–å’Œæ›´æ–°â€ã€‚ï¼‰ å¯ä»¥çœ‹åˆ°ï¼ŒåŽç»­ç‰ˆæœ¬ä¸­ DATETIME ç±»åž‹çš„å­—æ®µä¹Ÿå¯ä»¥å°† CURRENT_TIMESTAMP è®¾ä¸ºé»˜è®¤å€¼ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dubbo å‘å¸ƒçš„æœåŠ¡å’Œ AOP æ— æ³•å…±å­˜çš„é—®é¢˜]]></title>
    <url>%2F2019%2F01%2Fdubbo-service-aop-conflict%2F</url>
    <content type="text"><![CDATA[Spring Boot ä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜æ€»ç»“ï¼ŒæŒç»­æ›´æ–°â€¦ IDEA ä¸­è¯»å–é…ç½®æ–‡ä»¶é—®é¢˜é—®é¢˜å¦‚å›¾ï¼šè§£å†³æ–¹æ¡ˆï¼šå¼•å…¥å¦‚ä¸‹ä¾èµ–12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; æ­¤æ—¶ä¼šå‡ºçŽ°å¦‚ä¸‹å›¾ï¼šå¯ä»¥ç›´æŽ¥å¿½ç•¥ã€‚ Tomcat å®¹å™¨å¯åŠ¨è¿‡æ…¢çš„é—®é¢˜å¯åŠ¨é¡¹ç›®æ—¶ï¼Œæ˜Žæ˜Žä¸€ä¸ªå¾ˆç®€å•çš„é¡¹ç›®ï¼Œå´å¯åŠ¨å¾ˆæ…¢ï¼ŒTomcat æ—¥å¿—ä¸­æœ‰è¿™ä¹ˆä¸€è¡Œï¼š1WARNING: Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [20,617] milliseconds. å¯åŠ¨æˆåŠŸè€—æ—¶ï¼š1INFO: Server startup in 33239 ms è¿™ä¸ªè­¦å‘Šçš„æ“ä½œè€—äº†å¤§åŠçš„å¯åŠ¨æ—¶é—´ï¼ŒæŸ¥é˜… Tomcat çš„wikiå‘çŽ°è¿™ä¹ˆä¸€æ®µè¯ï¼šè§£é‡Šå¾—å¾ˆæ¸…æ¥šï¼ŒTomcat å¯åŠ¨æ—¶ç†µæºçš„ç”Ÿæˆé»˜è®¤æ˜¯ JRE çš„é˜»å¡žå¼ç†µæºï¼ˆ/ dev / randomï¼‰ï¼Œæ›¿æ¢ä¸ºéžé˜»å¡žå¼ç†µæºï¼ˆ/ dev /./ urandomï¼‰å³å¯ï¼Œä½†æ˜¯ä¼šé™ä½Žå®‰å…¨æ€§ï¼Œå› ä¸ºèŽ·å¾—çš„éšæœºæ•°æ®è¾ƒå°‘ã€‚ä¿®æ”¹æ–¹å¼ï¼šç›´æŽ¥ä¿®æ”¹ $JAVA_HOME/jre/lib/security/java.security ä¸­1securerandom.source=file:/dev/./urandom æˆ–è€…ç›´æŽ¥æ‰§è¡Œ1java -jar app.jar -Djava.security.egd=file:/dev/./urandom ä¿®æ”¹å®Œå†å¯åŠ¨ï¼š1INFO: Server startup in 10847 ms æ•ˆæžœè¿˜æ˜¯å¾ˆæ˜¾è‘—çš„ðŸ˜Šã€‚ é™æ€å˜é‡çš„æ³¨å…¥æ—¥å¸¸å¼€å‘ä¸­ï¼Œä¸€èˆ¬å¸¸ç”¨çš„å·¥å…·ä¼šæŠ½å–åˆ°å·¥å…·ç±»ä¸­ï¼Œå·¥å…·ç±»ä¸­çš„æ–¹æ³•ä¸€èˆ¬éƒ½æ˜¯é™æ€è°ƒç”¨çš„ï¼Œæ–¹æ³•ä¸­å¯èƒ½ä¼šæ³¨å…¥å…¶ä»–æˆå‘˜å˜é‡ï¼Œç”±äºŽæ–¹æ³•æ˜¯ static çš„ï¼Œæ‰€ä»¥æˆå‘˜å˜é‡ä¹Ÿå¿…é¡»æ˜¯é™æ€çš„ã€‚æ­¤æ—¶ï¼Œä½¿ç”¨ @Autowired å·²ç»æ— æ³•æ³¨å…¥ï¼Œæ­¤æ—¶å°±éœ€è¦æ–°çš„æ“ä½œäº†ðŸ˜ã€‚é¦–å…ˆï¼Œå°†éœ€è¦ä½¿ç”¨çš„å®šä¹‰ä¸ºé™æ€å˜é‡ï¼š1private static RestTemplate restTemplate; ç„¶åŽç”Ÿæˆ set æ–¹æ³•å¹¶åœ¨æ–¹æ³•ä¸ŠåŠ  @Autowiredï¼ˆè¯»å–å±žæ€§æ–‡ä»¶çš„è¯ä½¿ç”¨ @Valueï¼‰æ³¨è§£ï¼ˆæ³¨æ„ä¸è¦åŠ  staticï¼‰ï¼š1234@Autowired public void setRestTemplate(RestTemplate restTemplate) &#123; AuthTokenUtil.restTemplate = restTemplate; &#125; æœ€åŽï¼Œç±»ä¸ŠåŠ ä¸Š @Componentæ³¨è§£å³å¯ã€‚ RestTemplate çš„ GET è¯·æ±‚çš„ Headers è®¾ç½®RestTemplate ä»‹ç» Springâ€™s central class for synchronous client-side HTTP access. It simplifies communication with HTTP servers, and enforces RESTful principles. It handles HTTP connections, leaving application code to provide URLs (with possible template variables) and extract results. Spring çš„åŒæ­¥å®¢æˆ·ç«¯ HTTP è®¿é—®çš„ä¸­å¿ƒç±»ã€‚å®ƒç®€åŒ–äº†ä¸Ž HTTP æœåŠ¡å™¨çš„é€šä¿¡ï¼Œå¹¶å®žæ–½äº† RESTful åŽŸåˆ™ã€‚å®ƒå¤„ç† HTTP è¿žæŽ¥ï¼Œä½¿åº”ç”¨ç¨‹åºä»£ç æä¾› URLï¼ˆå¸¦æœ‰å¯èƒ½çš„æ¨¡æ¿å˜é‡ï¼‰å¹¶æå–ç»“æžœã€‚ çŽ¯å¢ƒé…ç½® Spring Boot ç‰ˆæœ¬ 2.0.3.RELEASE spring-web-5.0.7.RELEASE.jar çš„ RestTemplate RestTemplate çš„é…ç½® 12345678910111213141516171819202122232425262728293031323334import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.http.client.ClientHttpRequestFactory;import org.springframework.http.client.SimpleClientHttpRequestFactory;import org.springframework.web.client.RestTemplate;/** * @author tryme.wang * @create 2018-11-30 10:59:48 * @description RestTemplateé…ç½® **/@Configurationpublic class RestTemplateConfig &#123; @Bean public RestTemplate restTemplate(ClientHttpRequestFactory factory) &#123; RestTemplate restTemplate = new RestTemplate(factory); return restTemplate; &#125; @Bean public ClientHttpRequestFactory simpleClientHttpRequestFactory() &#123; /** * é»˜è®¤æƒ…å†µä¸‹ï¼ŒRestTemplateä¾èµ–äºŽæ ‡å‡†JDKå·¥å…·æ¥å»ºç«‹HTTPè¿žæŽ¥ã€‚ * å¯ä»¥é€šè¿‡InterceptingHttpAccessor.setRequestFactoryï¼ˆorg.springframework.http.client.ClientHttpRequestFactoryï¼‰ * å±žæ€§åˆ‡æ¢åˆ°ä½¿ç”¨ä¸åŒçš„HTTPåº“ï¼Œä¾‹å¦‚Apache HttpComponentsï¼ŒNettyå’ŒOkHttpã€‚ */ SimpleClientHttpRequestFactory factory = new SimpleClientHttpRequestFactory(); // å•ä½ï¼šms factory.setReadTimeout(5000); // å•ä½ï¼šms factory.setConnectTimeout(15000); return factory; &#125;&#125; æ–¹æ¡ˆRestTemplate ä½¿ç”¨æ—¶å¯èƒ½ä¼šæœ‰ Headers ä¸­éœ€è¦ä¼ å…¥ token ä¹‹ç±»å‚æ•°çš„æƒ…å†µï¼Œä½¿ç”¨ POST è¯·æ±‚æ—¶ï¼ŒRestTemplate çš„ API ä¸­æœ‰æ˜Žæ˜¾çš„æ–¹æ³•postForEntityæˆ–postForObjectï¼š ç„¶è€Œ GET è¯·æ±‚å¹¶æ²¡æœ‰æ˜Žæ˜¾å¯ä»¥ç†è§£çš„ API ä½¿ç”¨ï¼ŒæŸ¥é˜…èµ„æ–™å‘çŽ°äº† exchange æ–¹æ³•å¯ä»¥æŒ‡å®š HTTP è¯·æ±‚æ–¹å¼ï¼š okï¼Œå°±å®ƒäº†ï¼Œè€Œä¸”å…¶ä»–è¯·æ±‚æ–¹å¼å‡å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¥æ‰§è¡Œ Headersã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Spring Boot</tag>
        <tag>Dubbo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Aria2&AriaNGã€OneIndex é…ç½®]]></title>
    <url>%2F2018%2F11%2Faria2-oneindex%2F</url>
    <content type="text"><![CDATA[Aria2 ä»‹ç» aria2 is a lightweight multi-protocol &amp; multi-source command-line download utility. It supports HTTP/HTTPS, FTP, SFTP, BitTorrent and Metalink. aria2 can be manipulated via built-in JSON-RPC and XML-RPC interfaces. (from https://aria2.github.io) å®‰è£… Aria2ä¸‹è½½è„šæœ¬å¹¶è¿è¡Œ1wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/aria2.sh &amp;&amp; chmod +x aria2.sh &amp;&amp; bash aria2.sh è¿è¡Œè„šæœ¬åŽä¼šå‡ºçŽ°ä»¥ä¸‹èœå•é€‰é¡¹ï¼š12345678910111213141516171819202122 Aria2 ä¸€é”®å®‰è£…ç®¡ç†è„šæœ¬ [v1.1.9] -- Toyo | doub.io/shell-jc4 -- 0. å‡çº§è„šæœ¬â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” 1. å®‰è£… Aria2 2. æ›´æ–° Aria2 3. å¸è½½ Aria2â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” 4. å¯åŠ¨ Aria2 5. åœæ­¢ Aria2 6. é‡å¯ Aria2â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” 7. ä¿®æ”¹ é…ç½®æ–‡ä»¶ 8. æŸ¥çœ‹ é…ç½®ä¿¡æ¯ 9. æŸ¥çœ‹ æ—¥å¿—ä¿¡æ¯ 10. é…ç½® è‡ªåŠ¨æ›´æ–° BT-TrackeræœåŠ¡å™¨â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” å½“å‰çŠ¶æ€: å·²å®‰è£… å¹¶ å·²å¯åŠ¨ è¯·è¾“å…¥æ•°å­— [0-10]: æŒ‰æç¤ºæ“ä½œå³å¯ã€‚PS:å¯åŠ¨ï¼š /etc/init.d/aria2 startåœæ­¢ï¼š /etc/init.d/aria2 stopå½“å‰çŠ¶æ€ï¼š /etc/init.d/aria2 statusé…ç½®æ–‡ä»¶è·¯å¾„ï¼š /root/.aria2/aria2.confä»¤ç‰Œå¯†é’¥ï¼š éšæœºç”Ÿæˆï¼Œå¯ä»¥æ›´æ”¹ä¸‹è½½ç›®å½•ï¼š/usr/local/caddy/www/aria2/Downloadæ¥æºï¼šé€—æ¯”æ•™ç¨‹ å®‰è£… AriaNG ç”±äºŽ Aria2 æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œä¸‹è½½å·¥å…·ï¼Œæ¯æ¬¡ä½¿ç”¨æ•²å‘½ä»¤ä¸‹è½½æ–‡ä»¶ä¸æ–¹ä¾¿ï¼Œæœ‰å¤§ä½¬å¼€å‘å‡ºçš„å¼€æº WEB é¢æ¿æ¥ç®¡ç†ä¸‹è½½ä»»åŠ¡ã€‚å…¶ä¸­ä¹‹ä¸€ä¾¿æ˜¯ AriaNGã€‚AriaNG åªæ˜¯ä¸€ä¸ª WEB ç«¯çš„ç®¡ç†é¢æ¿ï¼Œå¯ä»¥è¿œç¨‹è¿žæŽ¥ Aria2ï¼ŒäºŒè€…å¯ä»¥åˆ†å¤„ä¸åŒæœåŠ¡å™¨ã€‚ ç›´æŽ¥ä»Ž GitHub é¡¹ç›®ä¸»é¡µä¸‹è½½è§£åŽ‹åˆ°æœåŠ¡å™¨å³å¯ï¼Œæ­¤æ—¶å³å¯é€šè¿‡ IP æˆ–é…ç½®å¥½çš„åŸŸåè¿›è¡Œè®¿é—®ã€‚å…·ä½“æ•ˆæžœå¯è®¿é—® http://aria2.tryme.wangæŸ¥çœ‹ å®‰è£… OneIndexå¯ä»¥ä½¿ç”¨å®å¡”é¢æ¿æ–°å»ºç½‘ç«™ï¼Œå…¨ç¨‹ WEB é¢æ¿æ“ä½œï¼Œç®€å•ç²—æš´ã€‚å®‰è£…å‚è€ƒï¼šå®å¡”OneIndex é¡¹ç›®ä¸»é¡µï¼šhttps://github.com/donwa/oneindexä¸‹è½½ï¼š1git clone https://github.com/donwa/oneindex.git ç§»åŠ¨åˆ°ç½‘ç«™æ ¹ç›®å½•åŽè¦åˆ†é…æƒé™ï¼š1chmod 777 ./config &amp;&amp; chmod 777 ./cache æ­¤æ—¶æ ¹æ®é…ç½®çš„åŸŸåï¼Œè®¿é—® http://xxx.com/?/adminï¼Œé»˜è®¤çš„å¯†ç æ˜¯ oneindexï¼ŒæŒ‰ç…§æç¤ºé…ç½®å³å¯ã€‚PSï¼šå¯ä»¥é…ç½® Nginx ä¼ªé™æ€åŽ»æŽ‰ç®¡ç†é¡µé¢ URL ä¸­çš„â€œ?â€ï¼Œä¼ªé™æ€é…ç½®å¦‚ä¸‹ï¼š123if (!-e $request_filename) &#123; rewrite / /?/ last;&#125; é…ç½® Aria2 ä¸‹è½½åŽè‡ªåŠ¨ä¸Šä¼ æ–°å»ºä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼š1vi /root/.aria2/oneindexup.sh å¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼š1234567891011121314151617181920212223242526#!/bin/bashpath=$3 #å–åŽŸå§‹è·¯å¾„ï¼Œæˆ‘çš„çŽ¯å¢ƒä¸‹å¦‚æžœæ˜¯å•æ–‡ä»¶åˆ™ä¸º/data/demo.png,å¦‚æžœæ˜¯æ–‡ä»¶å¤¹åˆ™è¯¥å€¼ä¸ºæ–‡ä»¶å¤¹å†…æŸä¸ªæ–‡ä»¶æ¯”å¦‚/data/a/b/c/d.jpgdownloadpath='/usr/local/caddy/www/aria2/Download' #ä¿®æ”¹æˆAria2ä¸‹è½½æ–‡ä»¶å¤¹domain='tryme.wang' #ä¿®æ”¹æˆè‡ªå·±åŸŸåif [ $2 -eq 0 ] then exit 0fiwhile true; do #æå–ä¸‹è½½æ–‡ä»¶æ ¹è·¯å¾„ï¼Œå¦‚æŠŠ/data/a/b/c/d.jpgå˜æˆ/data/afilepath=$pathpath=$&#123;path%/*&#125;; if [ "$path" = "$downloadpath" ] &amp;&amp; [ $2 -eq 1 ] #å¦‚æžœä¸‹è½½çš„æ˜¯å•ä¸ªæ–‡ä»¶ then php /www/wwwroot/$domain/one.php upload:file $filepath /$folder/ rm -rf $filepath php /www/wwwroot/$domain/one.php cache:refresh exit 0elif [ "$path" = "$downloadpath" ] then php /www/wwwroot/$domain/one.php upload:folder $filepath /$folder/ rm -rf "$filepath/" php /www/wwwroot/$domain/one.php cache:refresh exit 0fidone ç»™è„šæœ¬åˆ†é…å¯æ‰§è¡Œæƒé™ï¼š1chmod +x /root/.aria2/oneindexup.sh æœ€åŽå†™å…¥é…ç½®æ–‡ä»¶ï¼Œå³ä¸Šé¢å®‰è£… Aria2 æ—¶çš„é…ç½®æ–‡ä»¶ /root/.aria2/aria2.confç¼–è¾‘é…ç½®æ–‡ä»¶æˆ–è€…ç›´æŽ¥å‘½ä»¤ï¼š1echo "on-download-complete=/root/.aria2/oneindexup.sh" &gt;&gt;/root/.aria2/aria2.conf å‚è€ƒè‡ªï¼šRatâ€˜så¤§ä½¬]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>Aria2</tag>
        <tag>OneIndex</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Openfire é›†æˆå·²æœ‰æ•°æ®åº“ç”¨æˆ·]]></title>
    <url>%2F2018%2F11%2Fopenfire-database%2F</url>
    <content type="text"><![CDATA[Openfire å®‰è£…å®ŒæˆåŽï¼ŒåŽå°ä¼šé»˜è®¤åœ¨æŒ‡å®šçš„æ•°æ®åº“ä¸­ç”Ÿæˆ of* ç­‰è®¸å¤šè¡¨ï¼Œä½†æ˜¯å®žé™…å¼€å‘ä¸­å¾€å¾€éœ€è¦é›†æˆå·²æœ‰çš„æ•°æ®åº“è¡¨ï¼Œå¯ä»¥é€šè¿‡æ›´æ”¹ç³»ç»Ÿå±žæ€§æ¥å®žçŽ°ï¼ˆç”¨æˆ·è®¤è¯ï¼Œä¸åŒ…å«ç¾¤ç»„ï¼‰ã€‚ å‡†å¤‡å·¥ä½œé¦–å…ˆï¼Œä¸šåŠ¡ç³»ç»Ÿä¸­éœ€å­˜åœ¨ç”¨æˆ·è®¤è¯ç›¸å…³ä¿¡æ¯è¡¨ä»¥ä¾¿é›†æˆã€‚123456789create table im_user( member_id bigint null, mobile varchar(255) null, email varchar(255) null, username varchar(255) null, password varchar(255) null, create_time timestamp null) æ›´æ”¹ ofproperty è¡¨ç³»ç»Ÿé»˜è®¤éªŒè¯ç±»ï¼šOpenfire æä¾›äº† MySQL æ•°æ®åº“çš„éªŒè¯ç±»ï¼Œè·¯å¾„ä¸º org.jivesoftware.openfire.auth.JDBCAuthProviderï¼Œä»¥åŠç”¨æˆ·ç›¸å…³çš„æ“ä½œç±»org.jivesoftware.openfire.user.JDBCUserProviderï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ–°å»ºç›¸å…³å±žæ€§ã€æ›´æ”¹éªŒè¯æ–¹å¼å’Œç”¨æˆ·ç›¸å…³æ“ä½œæ¥è¾¾åˆ°ä½¿ç”¨å·²æœ‰ MySQL æ•°æ®åº“è¡¨çš„ç›®çš„ã€‚ æ‰§è¡Œä»¥ä¸‹ SQL è¯­å¥æ–°å»ºç³»ç»Ÿå±žæ€§ï¼ˆåŒæ ·å¯ä»¥åœ¨ç®¡ç†é¡µé¢æ“ä½œï¼‰ï¼š123456789101112insert into `myopenfire`.ofproperty(name,propValue)values('admin.authorizedJIDs','admin@localhost'),('jdbcProvider.driver','com.mysql.jdbc.Driver'),('jdbcProvider.connectionString','jdbc:mysql://192.168.53.61:3306/myopenfire?user=test&amp;password=test&amp;rewriteBatchedStatements=true&amp;useUnicode=true&amp;characterEncoding=utf8'),('jdbcAuthProvider.passwordSQL','SELECT password FROM im_user WHERE mobile=?'),('jdbcAuthProvider.passwordType','plain'),('jdbcUserProvider.loadUserSQL','SELECT username,email FROM im_user WHERE mobile=?'),('jdbcUserProvider.userCountSQL','SELECT COUNT(*) FROM im_user'),('jdbcUserProvider.allUsersSQL','SELECT username FROM im_user'),('jdbcUserProvider.usernameField','username'),('jdbcUserProvider.nameField','mobile'),('jdbcUserProvider.emailField','email'); å°†ç³»ç»Ÿå±žæ€§æ›´æ”¹ä¸ºä»¥ä¸Šä¸¤ä¸ªç±»å³å¯ã€‚ admin.authorizedJIDs å±žæ€§å³ç®¡ç†å‘˜è´¦æˆ·åç§°ï¼Œ@ åŽæ˜¯åˆå§‹é…ç½®çš„åŸŸï¼Œå¿…é¡»å¸¦ä¸Šï¼Œå¹¶ä¸” im_user è¡¨ä¸­å¿…é¡»æœ‰ admin ç›¸å…³çš„éªŒè¯ä¿¡æ¯æ‰èƒ½ç™»å½•ç®¡ç†é¡µé¢ã€‚ å‚è€ƒï¼šå®˜æ–¹æ–‡æ¡£]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>IDEA</tag>
        <tag>Openfire</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[IDEA å¯¼å…¥ Openfire æºç ]]></title>
    <url>%2F2018%2F11%2Fimport-openfire-source%2F</url>
    <content type="text"><![CDATA[Openfire æ˜¯ä¸€ä¸ªæ˜¯ä¸€ä¸ª IMï¼ˆå³æ—¶é€šè®¯ï¼‰æœåŠ¡å™¨ï¼Œä½¿ç”¨ Java ç¼–å†™çš„ XMPP æœåŠ¡å™¨ï¼Œå¼€å‘è¿‡ç¨‹ Intellij IDEA å¯¼å…¥ Openfire æºç æ­¥éª¤æ¯”è¾ƒå¤æ‚ï¼Œè®°å½•ä¸€ä¸‹ã€‚ ä¸‹è½½æºç ä»Ž GitHub é¡¹ç›®ä¸»é¡µä¸‹è½½æºç æˆ–è€…ä»Žå®˜ç½‘ä¸‹è½½ã€‚ å¯¼å…¥åˆ° IDEA ä¸­é€‰æ‹© Import Projectä¸€è·¯nextå³å¯å¯¼å…¥æˆåŠŸã€‚ è¿›è¡Œæž„å»ºæ³¨æ„ï¼šç”±äºŽéœ€è¦ ant ç›¸å…³ jar åŒ…ï¼Œå¯ä»¥ä¸‹è½½ä¹‹åŽï¼Œå°† ant.jar å¯¼å…¥åˆ° $JAVA_HOME/jre/lib ç›®å½•ä¸‹å³å¯ã€‚æ·»åŠ ä¹‹åŽè¿›è¡Œç¼–è¯‘æŠ¥é”™ï¼šè§£å†³ï¼šé…ç½® JDK é…ç½® application å¯åŠ¨åº”ç”¨æˆåŠŸå¯åŠ¨åŽè¿›å…¥ http://localhost:9000 é¡µé¢æŠ¥é”™å¦‚ä¸‹ï¼šè§£å†³ï¼šå°† $OPENFIRE_HOME/src/resources/jar/admin-sidebar.xmlåŠ$OPENFIRE_HOME/resources/i18n ä¸‹æ‰€æœ‰æ–‡ä»¶æ‹·è´åˆ°è¾“å‡ºç›®å½•ã€‚è¾“å‡ºç›®å½•ï¼šå†æ¬¡å¯åŠ¨å³å¯è¿›å…¥åˆå§‹åŒ–é…ç½®é¡µé¢ã€‚ ç®¡ç†é¡µé¢é…ç½®æ ¹æ®æç¤ºé…ç½®å³å¯ã€‚ è‡³æ­¤ï¼ŒIDEA å¯¼å…¥ Openfire æºç å®Œæˆï¼]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>IDEA</tag>
        <tag>Openfire</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®‰è£… RSS æœåŠ¡ Tiny Tiny RSS]]></title>
    <url>%2F2018%2F11%2Finstall-ttrss%2F</url>
    <content type="text"><![CDATA[RSS å·²ç»é€æ¸æ²¡è½ï¼Œè¢«å¦‚ä»Šå¤§æ•°æ®ä¿¡æ¯æµï¼ŒæŽ¨èç®—æ³•æ‰€å–ä»£ã€‚å¦‚ä»Šè™½ç„¶ç”¨çš„äººæ¯”è¾ƒå°‘ï¼Œä½†æ˜¯å¥½åœ¨æ²¡é‚£ä¹ˆå¤šçƒ¦äººçš„â€œä¸“å±žå¹¿å‘Šâ€åŠå®£ç§°â€œåƒäººåƒé¢â€çš„ðŸŒ¶ðŸ”ç®—æ³•æŽ¨èã€‚è™½ç„¶æœ‰å¾ˆå¤š RSS æä¾›å•†ï¼Œä¾‹å¦‚ Feedlyã€Inoreaderç­‰ï¼Œä¹Ÿå„æœ‰å…è´¹çš„æ–¹æ¡ˆï¼Œä½†æ˜¯å¥½çš„æœåŠ¡ç»ˆç©¶æ˜¯èµ°å‘äº†ä»˜è´¹æ—¶ä»£ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç» Docker ä¸‹å®‰è£… Tiny Tiny RSS çš„æ–¹æ³•åŠå¼€å¯ HTTPS æ”¯æŒï¼ŒDocker å¯ä»¥ç†è§£ä¸ºä¸€ç§å®¿ä¸»æœºä¸Šçš„å®Œå…¨éš”ç¦»çš„å®¹å™¨ï¼Œå®‰è£…å¸è½½å®¹å™¨å†…çš„ä¸œè¥¿å®Œå…¨ä¸å½±å“å®¿ä¸»æœºã€‚ å¼€å§‹å®‰è£…å®‰è£… Docker çŽ¯å¢ƒæ‰§è¡Œå‘½ä»¤ï¼š1$ curl https://get.docker.io/ | sh å¦‚æžœä¸»æœºä½äºŽå›½å†…ï¼Œå¯ä»¥åˆ‡æ¢ä¸ºå›½å†…é•œåƒå®‰è£…è„šæœ¬ï¼š1$ curl -sSL https://get.daocloud.io/docker | sh å¼€å§‹éƒ¨ç½²å‚è€ƒ HenryQW çš„æ–¹æ³•é€šè¿‡ docker-compose éƒ¨ç½²ï¼Œéœ€è¦å®‰è£… docker-compose å‘½ä»¤ï¼Œä¸€æ­¥æ­¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š123$ yum -y install epel-release$ yum -y install python-pip$ pip install docker-compose docker-compose.yml å†…å®¹ï¼š12345678910111213141516171819202122232425version: "3"services: database.postgres: image: sameersbn/postgresql:latest container_name: postgres environment: - PG_PASSWORD=tt-rss # please change the password - DB_EXTENSION=pg_trgm restart: always rss: image: wangqiru/ttrss:latest container_name: ttrss ports: - 181:80 environment: - SELF_URL_PATH=https://rss.tryme.wang/ # please change to your own domain, keep https there and no port for https support later - DB_HOST=database.postgres - DB_PORT=5432 - DB_NAME=ttrss - DB_USER=postgres - DB_PASS=tt-rss # please change the password stdin_open: true tty: true restart: always command: sh -c 'sh /wait-for database.postgres:5432 -- php /configure-db.php &amp;&amp; exec s6-svscan /etc/s6/' åœ¨ docker-compose.yml ç›®å½•ä¸‹æ‰§è¡Œï¼š1$ docker-compose up -d ç­‰å¾…éƒ¨ç½²å®Œæˆã€‚ Nginx HTTPS æ”¯æŒæ·»åŠ  Nginx yum èµ„æºåº“ï¼›1$ rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm ä½¿ç”¨ yum å‘½ä»¤å®‰è£… Nginxï¼š1$ yum install -y nginx å¯åŠ¨ Nginxï¼š1$ service nginx start è¿™æ—¶è®¿é—®å³å¯çœ‹åˆ°â€œWelcome to Nginxâ€æ¬¢è¿Žé¡µã€‚ ä½¿ç”¨ Letâ€™sEncrypt æä¾›çš„å…è´¹ HTTPS è¯ä¹¦123$ wget https://dl.eff.org/certbot-auto$ chmod a+x ./certbot-auto$ certbot-auto æ ¹æ®æç¤ºç”Ÿæˆå³å¯ã€‚ç¼–è¾‘/etc/nginx/conf.d/ttrss.confï¼ˆæ²¡æœ‰çš„è¯æ‰‹åŠ¨åˆ›å»ºï¼‰ï¼Œä¿å­˜å¦‚ä¸‹å†…å®¹ï¼š12345678910111213141516171819202122232425262728293031323334upstream ttrssdev &#123; server 127.0.0.1:181;&#125;server &#123; listen 80; server_name rss.tryme.wang; #return 301 https://rss.tryme.wang$request_uri; rewrite ^(.*)$ https://$host$1 permanent;&#125;server &#123; listen 443 ssl; gzip on; server_name rss.tryme.wang; ssl_certificate /etc/letsencrypt/live/rss.tryme.wang/fullchain.pem; ssl_certificate_key /etc/letsencrypt/live/rss.tryme.wang/privkey.pem; access_log /var/log/nginx/ttrssdev_access.log combined; error_log /var/log/nginx/ttrssdev_error.log; location / &#123; proxy_redirect off; proxy_pass http://ttrssdev; proxy_set_header Host $http_host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-Ssl on; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header X-Frame-Options SAMEORIGIN; client_max_body_size 100m; client_body_buffer_size 128k; proxy_buffer_size 4k; proxy_buffers 4 32k; proxy_busy_buffers_size 64k; proxy_temp_file_write_size 64k; &#125;&#125; ç¡®ä¿/etc/nginx/nginx.confä¸»é…ç½®æ–‡ä»¶httpå—é‡Œæœ‰â€œinclude /etc/nginx/conf.d/*.conf;â€éªŒè¯å¹¶æ›´æ–° Nginx é…ç½®12$ nginx -t$ nginx -s reload è¿™æ˜¯ç›´æŽ¥è®¿é—® https://rss.tryme.wang å³å¯çœ‹åˆ°ç™»å½•é¡µé¢ï¼Œé»˜è®¤ç”¨æˆ·å adminï¼Œå¯†ç  passwordï¼Œå»ºè®®ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼ å¯èƒ½å‡ºçŽ°çš„é—®é¢˜GCP çš„æœºå™¨ç›´æŽ¥è®¿é—®åŸŸåçš„æ—¶å€™ Nginx çš„é”™è¯¯æ—¥å¿—å¯èƒ½ä¼šå‡ºçŽ°ä¸‹é¢é—®é¢˜ï¼š1*33 connect() to 127.0.0.1:181 failed (13: Permission denied) while connecting to upstream è§£å†³æ–¹æ¡ˆå‚è€ƒ åœ°å€]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>RSS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Typecho åŠ å¯†æ–‡ç« æ˜¾ç¤ºæ ‡é¢˜]]></title>
    <url>%2F2018%2F11%2Ftypecho-encrypt-show-title%2F</url>
    <content type="text"><![CDATA[Typecho çš„æ–‡ç« å¯ä»¥åŠ å¯†ï¼Œä½†æ˜¯åŠ å¯†çš„æ–‡ç« æ ‡é¢˜é»˜è®¤æ˜¾ç¤ºçš„æ˜¯â€œæ­¤å†…å®¹è¢«å¯†ç ä¿æŠ¤â€ï¼Œä»€ä¹ˆæ–‡ç« éƒ½ä¸çŸ¥é“ðŸ˜¶ï¼Œä¸è¿‡è¿˜å¥½å¯ä»¥æ›´æ”¹é…ç½®ã€‚ è§£å†³æ–¹æ¡ˆåœ¨ $SITE_HOME/var/Widget/Abstract/Contents.php æ–‡ä»¶çš„å¦‚å›¾ä½ç½®ï¼š å°† $value[â€˜titleâ€™] = _t(â€˜æ­¤å†…å®¹è¢«å¯†ç ä¿æŠ¤â€™) æ³¨é‡ŠæŽ‰å³å¯ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ä¸Šé¢çš„ è¯·è¾“å…¥å¯†ç ä»¥è®¿é—® å’Œ æäº¤ ä¸ºè‡ªå®šä¹‰å†…å®¹ã€‚]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>Typecho</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Typecho æ–‡ç« æ”¯æŒ emoji]]></title>
    <url>%2F2018%2F11%2Ftypecho-support-emoji%2F</url>
    <content type="text"><![CDATA[åœ¨ MySQL æ•°æ®åº“ä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„ utf-8 æ ¼å¼ç¼–ç æœ€å¤šæ”¯æŒ 3 ä¸ªå­—èŠ‚ï¼Œè€Œ emoji è¡¨æƒ…æ˜¯ 4 ä¸ªå­—èŠ‚çš„ç¬¦å·ï¼Œæ‰€ä»¥ emoji è¡¨æƒ…çš„é•¿åº¦å°±è¶…å‡ºäº†æˆ‘ä»¬å¸¸ç”¨ utf-8 çš„å­—ç¬¦é›†èŒƒå›´è€Œæ— æ³•å­˜å‚¨ã€‚ä»Ž MySQL5.5 å¼€å§‹ï¼Œå¯ä»¥æ›´æ”¹æ•°æ®åº“å’Œæ•°æ®è¡¨çš„ç¼–ç ä¸º utf8mb4 ä½¿å…¶æ”¯æŒå­˜å‚¨ emojiï¼Œutf8mb4 å…¼å®¹ utf8ï¼Œä¸”æ¯” utf8 èƒ½è¡¨ç¤ºæ›´å¤šçš„å­—ç¬¦ï¼Œæ˜¯ utf8 å­—ç¬¦é›†çš„è¶…é›†ã€‚ä¿®æ”¹ä¹‹å‰ä¸€å®šè¦å¤‡ä»½æ•°æ®ï¼ä¿®æ”¹ä¹‹å‰ä¸€å®šè¦å¤‡ä»½æ•°æ®ï¼ä¿®æ”¹ä¹‹å‰ä¸€å®šè¦å¤‡ä»½æ•°æ®ï¼ 1. æ›´æ”¹æ•°æ®åº“çš„æŽ’åºè§„åˆ™ 2. ç‚¹å‡» SQL æŒ‰é’®ï¼Œæ‰§è¡Œä»¥ä¸‹ SQL è¯­å¥(å°† Typecho ä¿®æ”¹ä¸ºè‡ªå·±å¯¹åº”çš„å‰ç¼€)1234567alter table typecho_comments convert to character set utf8mb4 collate utf8mb4_unicode_ci;alter table typecho_contents convert to character set utf8mb4 collate utf8mb4_unicode_ci;alter table typecho_fields convert to character set utf8mb4 collate utf8mb4_unicode_ci;alter table typecho_metas convert to character set utf8mb4 collate utf8mb4_unicode_ci;alter table typecho_options convert to character set utf8mb4 collate utf8mb4_unicode_ci;alter table typecho_relationships convert to character set utf8mb4 collate utf8mb4_unicode_ci;alter table typecho_users convert to character set utf8mb4 collate utf8mb4_unicode_ci; ä¿®æ”¹å®Œä¹‹åŽï¼š 3. ç¼–è¾‘ç½‘ç«™æ ¹ç›®å½•çš„ config.inc.php æ–‡ä»¶ï¼Œæ–‡ä»¶æœ«å°¾1234567891011/** å®šä¹‰æ•°æ®åº“å‚æ•° */$db = new Typecho_Db('Pdo_Mysql', 'typecho_');$db-&gt;addServer(array ( 'host' =&gt; 'localhost', 'user' =&gt; 'username', 'password' =&gt; 'password', 'charset' =&gt; 'utf8mb4',// å°†utf-8ä¿®æ”¹ä¸ºutf8mb4 'port' =&gt; '3306', 'database' =&gt; 'database-name',), Typecho_Db::READ | Typecho_Db::WRITE);Typecho_Db::set($db); æŒ‰ç…§ä»¥ä¸Šæ­¥éª¤ä¿®æ”¹å®Œä¹‹åŽï¼Œæ–‡ç« å³å¯æ”¯æŒ emoji è¡¨æƒ…ã€‚]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>Typecho</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring Boot2.X æ‹¦æˆªå™¨é…ç½®]]></title>
    <url>%2F2018%2F07%2Fspringboot-interceptor%2F</url>
    <content type="text"><![CDATA[Spring Boot2.0 ä¹‹åŽçš„æ‹¦æˆªå™¨é…ç½®å’Œä¹‹å‰ä¸å¤ªä¸€æ ·ï¼Œä½†æ˜¯æ®Šé€”åŒå½’ï¼Œç‰¹æ­¤æ€»ç»“ä¸€ä¸‹ðŸ˜ Spring Boot2.0 ä¹‹å‰Spring Boot2.0 ä¹‹å‰çš„æ‹¦æˆªå™¨é…ç½®å¦‚ä¸‹ï¼š123456789101112@Configurationpublic class InterceptorConfigurerAdapter extends WebMvcConfigurerAdapter &#123; @Bean RestRequestValidatorInterceptor restRequestValidatorInterceptor() &#123; return new RestRequestValidatorInterceptor(); &#125; @Override public void addInterceptors(InterceptorRegistry registry) &#123; registry.addInterceptor(restRequestValidatorInterceptor()).addPathPatterns("/**") .excludePathPatterns("/push/test"); &#125;&#125; è¿™æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯åœ¨ Spring Boot2.0 æˆ–æ›´é«˜ç‰ˆæœ¬ä¸­ï¼ŒWebMvcConfigurerAdapter ç±»å·²ç» deprecatedï¼šè™½ç„¶è¿‡æœŸï¼Œä½†æ˜¯å¯ä»¥çœ‹åˆ° WebMvcConfigurerAdapter å®žçŽ°äº† WebMvcConfigurer æŽ¥å£ï¼Œæ‰€ä»¥å¯ä»¥ç›´æŽ¥è‡ªå®šä¹‰ç±»å®žçŽ° WebMvcConfigurer æŽ¥å£ï¼Œå…¶ä»–ä¸å˜ã€‚ Spring Boot2.0 ä¹‹åŽåªéœ€è¦å°†ä¹‹å‰ç»§æ‰¿çš„ WebMvcConfigurerAdapter ç±»æ”¹ä¸ºå®žçŽ° WebMvcConfigurer æŽ¥å£ã€‚123456789101112@Configurationpublic class InterceptorConfigurerAdapter implements WebMvcConfigurer &#123; @Bean RestRequestValidatorInterceptor restRequestValidatorInterceptor() &#123; return new RestRequestValidatorInterceptor(); &#125; @Override public void addInterceptors(InterceptorRegistry registry) &#123; registry.addInterceptor(restRequestValidatorInterceptor()).addPathPatterns("/**") .excludePathPatterns("/push/test"); &#125;&#125;]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Spring Boot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ–‡ä»¶ MD5ã€SHA1ã€SHA256 æ ¡éªŒ]]></title>
    <url>%2F2018%2F05%2Ffile-verify%2F</url>
    <content type="text"><![CDATA[ç½‘ä¸Šä¸‹è½½å¾ˆå¤šæ–‡ä»¶ï¼Œéƒ½ä¼šæä¾› MD5 æˆ–è€… SHA256 æ ¡éªŒï¼Œé˜²æ­¢æ–‡ä»¶å†…å®¹è¢«ç¯¡æ”¹ï¼Œæ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°åŽï¼Œ æˆ‘ä»¬å¯ä»¥å¯¹æ–‡ä»¶è¿›è¡Œæ ¡éªŒã€‚ Windows çŽ¯å¢ƒä¸‹åœ¨ Windows æ“ä½œç³»ç»ŸçŽ¯å¢ƒä¸‹ï¼Œè®¡ç®—è¿™å‡ ä¸ªå¸¸ç”¨çš„æ ¡éªŒå€¼éœ€è¦ä¸‹è½½ä¸€æ¬¾è½¯ä»¶ [MD5 &amp; SHA Checksum Utility ](https://raylin.wordpress.com/downloads/md5-sha-1-checksum-utility/)ï¼Œä¸‹è½½åŽå³å¯ä½¿ç”¨ã€‚ Linux çŽ¯å¢ƒä¸‹Linux ä¸‹æœ‰ md5sum å‘½ä»¤ï¼Œsha1sum å‘½ä»¤å’Œ sha256sum å‘½ä»¤æ¥è®¡ç®—æ–‡ä»¶ç›¸å¯¹åº”çš„å€¼ï¼Œå…·ä½“ä½¿ç”¨å¦‚ä¸‹ï¼š 12345678910111213[root@iz2ze0ibk1pvak9ckuwb5yz /]# md5sum test.txt 2f6c38be914b756fde482fff83064d37 test.txt[root@iz2ze0ibk1pvak9ckuwb5yz /]# sha1sum test.txt 228dfdb10e9ad6fdf5ca97f402355df1952112fe test.txt[root@iz2ze0ibk1pvak9ckuwb5yz /]# sha256sum test.txt d8a0785f3ce124ee8c79c172eefdc6989141aafaf9deab2dac8437ed5e60f5c4 test.txt macOS çŽ¯å¢ƒä¸‹macOS ä¸‹æœ‰ MD5 å‘½ä»¤å’Œ shasum å‘½ä»¤ï¼Œå…·ä½“ä½¿ç”¨å¦‚ä¸‹ï¼š 12345678910111213wangyxdeMBP:~ wangyx$ md5 test.txtMD5 (test.txt) = af7bbf6c8b822e9e89ccc2b8552ca294wangyxdeMBP:~ wangyx$ shasum -a 1 test.txt1367a1ab1da100436c5ea6b0dc0d737ada6aede4 test.txtwangyxdeMBP:~ wangyx$ shasum -a 256 test.txt5913f04a2a92cbd0346a4a7cf7856f8174e12657ca267764b57da90b27c4c51f test.txt æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®¡ç®—å‡ºçš„æ ¡éªŒå€¼å’Œç½‘ç«™æä¾›çš„æ ¡éªŒå€¼å¯¹æ¯”ï¼Œå¯ä»¥çœ‹å‡ºæ–‡ä»¶æ˜¯å¦è¢«ç¯¡æ”¹ã€‚]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é…¸é…¸ä¹³]]></title>
    <url>%2F2018%2F05%2Fvultr-ssr%2F</url>
    <content type="text"><![CDATA[1. é¦–å…ˆå®˜ç½‘æ³¨å†Œè´¦å·ç‚¹æˆ‘æ³¨å†Œè´¦å· 2. å……å€¼Vultr æ”¯æŒæ”¯ä»˜å®åŠ PayPal å’Œä¿¡ç”¨å¡æ”¯ä»˜ã€‚ 3. é€‰æ‹©å±žæ€§ åœ°åŒº é€‰æ‹©æ“ä½œç³»ç»Ÿï¼ˆå»ºè®® Centos6ï¼‰ é€‰æ‹©é…ç½® é¢å¤–é€‰é¡¹ï¼ˆæ ¹æ®éœ€è¦è‡ªå®šä¹‰ï¼‰ ç­‰å¾…å®‰è£… 4. ç™»å½• VPS èŽ·å¾— IP åŠå¯†ç ï¼Œç™»å½•è¿œç¨‹ VPS å®‰è£…è„šæœ¬ï¼ˆé€—æ¯”æä¾›ï¼‰ wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/ssr.sh &amp;&amp; chmod +x ssr.sh &amp;&amp; bash ssr.sh æŒ‰æç¤ºæ“ä½œ æœ€åŽå¯ä»¥ä½¿ç”¨ SSR å®¢æˆ·ç«¯è¿›è¡Œè¿žæŽ¥æµ‹è¯•ã€‚]]></content>
      <categories>
        <category>å®žç”¨</category>
      </categories>
      <tags>
        <tag>Vultr</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®‰è£…é”é€Ÿç ´è§£ç‰ˆæˆ– Google BBR é­”æ”¹ç‰ˆ]]></title>
    <url>%2F2018%2F05%2Fvps-install-server-speeder%2F</url>
    <content type="text"><![CDATA[æ³¨æ„ï¼šå®‰è£…é”é€Ÿéœ€é™çº§ç³»ç»Ÿå†…æ ¸ï¼Œè€Œå®‰è£… Google BBR ç®—æ³•éœ€è¦å‡çº§ç³»ç»Ÿå†…æ ¸ï¼ŒäºŒè€…ä¸å¯åŒæ—¶å®‰è£…ï¼ˆæœ¬æ–‡ä»¥CentOS6 64ä½ä¸ºä¾‹ï¼‰ å®‰è£…é”é€Ÿï¼ˆServerSpeederï¼‰ç ´è§£ç‰ˆ1. æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬è¾“å…¥ $ uname -r æŸ¥çœ‹å½“å‰ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ï¼ˆå¦‚æžœå®‰è£…æ—¶é€‰çš„ CentOS6 64 ä½ç³»ç»Ÿçš„è¯ï¼Œä¼šå‡ºçŽ°ä»¥ä¸‹æ–‡å­—ï¼‰ 2. èŽ·å–å¹¶æ‰§è¡Œå®‰è£…è„šæœ¬æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼šwget --no-check-certificate -O appex.sh https://raw.githubusercontent.com/0oVicero0/serverSpeeder_Install/master/appex.sh &amp;&amp; bash appex.sh install &#39;2.6.32-642.el6.x86_64&#39; ä¸€è·¯å›žè½¦å³å¯å‡ºçŽ°ä»¥ä¸‹å†…å®¹å³ä¸ºå®‰è£…æˆåŠŸ å¦é™„ CentOS7 å®‰è£…é”é€Ÿç ´è§£ç‰ˆå‘½ä»¤ï¼š æ›´æ¢å†…æ ¸ wget --no-check-certificate -O rskernel.sh https://raw.githubusercontent.com/uxh/shadowsocks_bash/master/rskernel.sh &amp;&amp; bash rskernel.shé‡å¯åŽæ‰§è¡Œå®‰è£… yum install net-tools -y &amp;&amp; wget --no-check-certificate -O appex.sh https://raw.githubusercontent.com/0oVicero0/serverSpeeder_Install/master/appex.sh &amp;&amp; bash appex.sh install å®‰è£… Google BBR é­”æ”¹ç‰ˆCentOS6/7 ä½¿ç”¨ è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š wget --no-check-certificate https://raw.githubusercontent.com/nanqinlang-tcp/tcp_nanqinlang/master/General/CentOS/bash/tcp_nanqinlang-1.3.2.sh &amp;&amp; bash tcp_nanqinlang-1.3.2.sh å¦‚å†…æ ¸è¿‡ä½Žï¼Œéœ€è¦å…ˆå‡çº§å†…æ ¸ï¼Œå†å®‰è£…ç®—æ³•ã€‚ å®‰è£…æˆåŠŸåŽä¼šå‡ºçŽ°ä»¥ä¸‹ç•Œé¢ï¼š å‚è€ƒåœ°å€ï¼šåœ°å€1 åœ°å€2]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>Google</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring æ•´åˆ Redis çš„åºåˆ—åŒ–]]></title>
    <url>%2F2018%2F04%2Fspring-redis%2F</url>
    <content type="text"><![CDATA[åºåˆ—åŒ–ç­–ç•¥ String åºåˆ—åŒ–StringRedisTemplate é»˜è®¤é‡‡ç”¨çš„æ˜¯ String çš„åºåˆ—åŒ–ç­–ç•¥ï¼Œä¿å­˜çš„ key å’Œ value éƒ½æ˜¯é‡‡ç”¨æ­¤ç­–ç•¥åºåˆ—åŒ–ä¿å­˜çš„ã€‚å³ StringRedisSerializer JDK åºåˆ—åŒ–RedisTemplate é»˜è®¤é‡‡ç”¨çš„æ˜¯ JDK çš„åºåˆ—åŒ–ç­–ç•¥ï¼Œä¿å­˜çš„ key å’Œ value éƒ½æ˜¯é‡‡ç”¨æ­¤ç­–ç•¥åºåˆ—åŒ–ä¿å­˜çš„ã€‚å³ JdkSerializationRedisSerializer JacksonJsonRedisSerializer Jackson2JsonRedisSerializer OxmSerializer å¯èƒ½é‡åˆ°çš„é—®é¢˜ å› ä¸ºåºåˆ—åŒ–ç­–ç•¥çš„ä¸åŒï¼Œå³ä½¿æ˜¯åŒä¸€ä¸ª key ç”¨ä¸åŒçš„ Template åŽ»åºåˆ—åŒ–ï¼Œç»“æžœæ˜¯ä¸åŒçš„ã€‚æ‰€ä»¥æ ¹æ® key åŽ»è¿›è¡Œæ“ä½œ Redis ä¸­çš„æ•°æ®æ—¶ï¼Œå°±ä¼šå‡ºçŽ°å„ç§æ“ä½œå¤±è´¥çš„é—®é¢˜ã€‚ è§£å†³æ–¹æ¡ˆå¯ä»¥æ‰‹åŠ¨æŒ‡å®š RedisTemplate çš„ key çš„åºåˆ—åŒ–ç­–ç•¥ 12345678910&lt;!-- redis åºåˆ—åŒ–ç­–ç•¥ ï¼Œé€šå¸¸æƒ…å†µä¸‹keyå€¼é‡‡ç”¨Stringåºåˆ—åŒ–ç­–ç•¥ï¼Œ --&gt; &lt;!-- å¦‚æžœä¸æŒ‡å®šåºåˆ—åŒ–ç­–ç•¥ï¼ŒStringRedisTemplateçš„keyå’Œvalueéƒ½å°†é‡‡ç”¨Stringåºåˆ—åŒ–ç­–ç•¥ï¼› --&gt; &lt;!-- ä½†æ˜¯RedisTemplateçš„keyå’Œvalueéƒ½å°†é‡‡ç”¨JDKåºåˆ—åŒ– è¿™æ ·å°±ä¼šå‡ºçŽ°é‡‡ç”¨ä¸åŒtemplateä¿å­˜çš„æ•°æ®ä¸èƒ½ç”¨åŒä¸€ä¸ªtemplateæ“ä½œçš„é—®é¢˜ --&gt; &lt;bean id="stringRedisSerializer" class="org.springframework.data.redis.serializer.StringRedisSerializer" /&gt; &lt;bean id='redisWriteTemplate' class="org.springframework.data.redis.core.RedisTemplate"&gt; &lt;property name="connectionFactory" ref="jedisWriteConnectionFactory" /&gt; &lt;property name="keySerializer" ref="stringRedisSerializer" /&gt; &lt;property name="hashKeySerializer" ref="stringRedisSerializer" /&gt; &lt;/bean&gt; æ€»ç»“æŽ¨èå°†æ‰€æœ‰ Template çš„ key éƒ½é‡‡ç”¨ String çš„åºåˆ—åŒ–æ–¹å¼ï¼Œè€Œ value çš„åºåˆ—åŒ–æ–¹å¼å¯ä»¥é‡‡ç”¨ä¸åŒçš„åºåˆ—åŒ–æ–¹å¼ã€‚ï¼ˆjedis è‡ªåŠ¨é€‰æ‹©ï¼‰(è¿™æ ·è¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ä¸å¿… string çš„ä¹Ÿé‡‡ç”¨ jdk çš„åºåˆ—åŒ–ä»Žè€Œå¯¼å¸¸ç”¨æ•°æ®æ ¼å¼è‡´ä¸ºäº†å­˜å‚¨æ•°æ®ç»“æž„æµªè´¹ç©ºé—´) å‚è€ƒåœ°å€]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®ä¿¡å…¬ä¼—å·ç½‘é¡µæŽˆæƒ]]></title>
    <url>%2F2018%2F04%2Fwechat-userinfo%2F</url>
    <content type="text"><![CDATA[èµ·å›  ä¹‹å‰å†™è¿‡ä¸€ä¸ªæŽ¥å£ï¼Œé…åˆå‰ç«¯åœ¨å¾®ä¿¡å†…çš„ H5 é¡µé¢èŽ·å–ç”¨æˆ·ä¿¡æ¯ï¼Œä¹‹å‰ä¸ºäº†çœäº‹ï¼Œé…¿æˆä¸Šçº¿å½“æ™šç–¯ç‹‚æ”¹ä»£ç çš„æƒ¨ç¥¸ã€‚ æœ¬æ¥å¾ˆç®€å•çš„æŽ¥å£ï¼Œåªéœ€è¦å®Œå…¨æŒ‰ç…§å®˜æ–¹ API å¼€å‘å³å¯ï¼Œä½†æ˜¯ï¼Œæˆ‘æƒ³ç§€ä¸€æŠŠéªšæ“ä½œï¼Œäº‹å®žè¯æ˜Žè¿™å®Œå…¨æ˜¯é”™è¯¯çš„æ€è·¯ã€‚ é”™è¯¯ç¤ºä¾‹ðŸ˜‚ å®˜æ–¹ç½‘é¡µèŽ·å–ç”¨æˆ·ä¿¡æ¯æ­¥éª¤ï¼š è¡¥å……ä¸€å¥ï¼šç¬¬ä¸€æ­¥ä¸­æ‰€è¯´çš„éœ€è¦å¼•å¯¼ç”¨æˆ·åŒæ„æŽˆæƒï¼Œä¹‹å‰è‚¯å®šæ˜¯æ²¡æœ‰è¿™å¥çš„ï¼ˆæ¬¢è¿Žæ‰“è„¸ï¼‰ å…¶ä¸­ï¼Œç¬¬äºŒæ­¥å…¶å®žå°±å¯ä»¥èŽ·å–åˆ°ç”¨æˆ·çš„ openidï¼Œä½†æ˜¯ï¼š è¿™é‡Œå¯ä»¥èŽ·å–åˆ° openidï¼Œç„¶åŽï¼š å¾®ä¿¡æä¾›çš„è¿™ä¸ªæŽ¥å£å¯ä»¥ç›´æŽ¥èŽ·å–åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶ä¸”æœ‰æˆ‘æœ€æƒ³è¦çš„ unionidï¼ŒäºŽæ˜¯æ¯«ä¸çŠ¹è±«çš„å°±æ˜¯ç”¨ä¸Šä¸€æ­¥èŽ·å–åˆ°çš„ openid åŽ»èŽ·å–ç”¨æˆ·ä¿¡æ¯äº†ï¼Œ ç»“æžœå¿…é¡»ç”¨æˆ·å…³æ³¨åŽæ‰èƒ½èŽ·å–åˆ°ï¼Œå¼€å§‹æ˜¯æµ‹è¯•å·ï¼Œä»¥ä¸ºä¸æ˜¯æ­£å¼çŽ¯å¢ƒï¼Œæ‰€ä»¥æ‰å¾—å…³æ³¨ï¼Œå°±æ²¡åœ¨æ„ã€‚ ç»“æžœ ä¸Šåˆ°ç”Ÿäº§çŽ¯å¢ƒåŽï¼Œæœªå…³æ³¨å…¬ä¼—å·çš„å¾®ä¿¡å·æ‰“å¼€ç½‘é¡µåŽï¼Œåˆ©ç”¨å…¬ä¼—å·åšçš„å¼‚å¸¸é€šçŸ¥æ¨¡æ¿æŽ¨é€ä¸€ç›´æŽ¨æ¶ˆæ¯æŠ¥é”™ code èŽ·å– access_token é¡ºä¾¿èŽ·å–åˆ° openid æ˜¯æ²¡é”™çš„ 12&#123;"access_token":"8_gmDP6FclzBab_kfY3t5pL7SNfWItCykr90BwhxrD0BJ8m7vHQkevqaL0H10GMg_tL340F0PT91VaQoLnGkLHdMTsLDpB165gByGbJie-ZkQ","expires_in":7200,"refresh_token":"8_9c3mYLWv6T_Emsdq2rydo2h9uBHY9RbEBQsjr4IwTdihvx6lA842tDZM4-WdftOSBMLIsN40C3kRT9X3QydF0AQq8jh876slOH83iMXGnvI","openid":"osyqutx1SsYKZDhwuHe5HoR_B72I","scope":"snsapi_base"&#125; ä¹‹åŽç”¨èŽ·å–åˆ°çš„ openid è°ƒé€šç”¨æŽ¥å£èŽ·å–ç”¨æˆ·ä¿¡æ¯æŠ¥é”™ï¼Œå…·ä½“å†…å®¹è®°ä¸æ¸…äº†ï¼Œå¤§è‡´æ˜¯æç¤ºç”¨æˆ·æœªå…³æ³¨å…¬ä¼—å·ã€‚ å¤±è´¥å‘Šç»ˆ æ­£ç¡®æ–¹æ³• å°å¿ƒé©¶å¾—ä¸‡å¹´èˆ¹]]></content>
      <categories>
        <category>æ—¥å¸¸è¸©å‘</category>
      </categories>
      <tags>
        <tag>WeChat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello, Music!]]></title>
    <url>%2F2018%2F04%2Fhello-music%2F</url>
    <content type="text"><![CDATA[Welcome to my music world! Iâ€™m still working on this page, but itâ€™ll be on-line soon!]]></content>
      <categories>
        <category>Music</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Gitee(ç äº‘)åŸºæœ¬ä½¿ç”¨]]></title>
    <url>%2F2018%2F03%2Fgitee-usage%2F</url>
    <content type="text"><![CDATA[æ¦‚è¦ä½¿ç”¨ GitHub æ—¶ï¼Œç»å¸¸é‡åˆ°é€Ÿåº¦æ…¢ç”šè‡³æ— æ³•è¿žæŽ¥çš„æƒ…å†µï¼ˆWallï¼‰ï¼Œè€Œä¸” GitHub åˆ›å»ºç§æœ‰ä»“åº“æ˜¯éœ€è¦æ”¶è´¹çš„ï¼Œæœ‰ä»¥ä¸Šéœ€æ±‚çš„å¯ä»¥è€ƒè™‘ä½¿ç”¨å›½å†…çš„ Git æ‰˜ç®¡æœåŠ¡ ç äº‘ã€‚ ç›¸æ¯”äºŽ GitHub ï¼Œç äº‘æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š é¦–å…ˆï¼Œåœ¨è¯­è¨€çš„ä½¿ç”¨ä¸Šï¼Œå½“ç„¶ä¸­æ–‡äº¤æµæ›´ç•…å¿«ã€æ›´æœ‰æ•ˆçŽ‡ï¼› å…¶æ¬¡ï¼Œå›½å†… IT è¡Œä¸šæœ‰è‡ªå·±çš„ç‰¹ç‚¹ï¼Œå¤©ç„¶å†³å®šäº†å¯¹å¼€æºè½¯ä»¶çš„éœ€æ±‚ä¹Ÿæœ‰è‡ªå·±çš„ç‰¹ç‚¹ï¼Œæ¯”å¦‚å°ç¨‹åºè¿™ä¸ªä¸œè¥¿ï¼Œåªæœ‰å›½å†…æœ‰ï¼Œåšä¸ªå¼€æºçš„å°ç¨‹åºæ‰˜ç®¡åœ¨ç äº‘æ¯” GitHub æ˜Žæ˜¾æ›´æœ‰ä¼˜åŠ¿ï¼Œå› ä¸ºå…³æ³¨ç€éƒ½æ˜¯å›½å†…çš„å¼€å‘è€…ï¼› ç„¶åŽï¼Œå¼€æºä¸ä»…ä»…æ˜¯å¤§é¡¹ç›®ï¼Œåƒ OpenStackã€Tensorflow è¿™æ ·çš„å¤§åŽ‚å¤§ä½œï¼Œç¡®å®žæœ‰ GitHub å°±å¤Ÿäº†ï¼Œä½†æ˜¯è¿™æ ·çš„å¤§åž‹é¡¹ç›®æ¯•ç«Ÿä¸æ˜¯æ™®éæƒ…å†µã€‚çŽ°åœ¨ç¼–ç¨‹è¶Šæ¥è¶Šæ™®åŠï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥å‚ä¸Žå’Œè´¡çŒ®å¼€æºé¡¹ç›®ï¼ŒåŽ»åšä¸€äº›æœ‰æ„æ€çš„ä¸œè¥¿åˆ†äº«å‡ºæ¥ï¼Œé‚£ä¹ˆä»Žå—ä¼—ã€äº¤æµä¾¿åˆ©åº¦ã€è®¿é—®é€Ÿåº¦ç­‰æ–¹é¢ï¼Œç äº‘éƒ½æœ‰ä¼˜åŠ¿ã€‚ é…ç½®å…¬é’¥macOS ä¸‹è¿è¡Œ $ ssh-keygen -t rsa -C &quot;XXXXX&quot; å°†ç”Ÿæˆçš„å…¬é’¥å†…å®¹æŒ‰ç…§å¦‚ä¸‹æ–¹å¼é…ç½®åˆ°ä¸ªäººç äº‘ä¸Šï¼š æ–°å»ºé¡¹ç›® é…ç½®è¿œç¨‹åº“å…³è”é¦–å…ˆæ‰§è¡Œï¼š $ git remote -v æŸ¥çœ‹æœ¬åœ°å…³è”çš„è¿œç¨‹åº“ï¼Œå¦‚æžœæ²¡æœ‰ä»»ä½•å…³è”ï¼Œå¯ä»¥æ‰§è¡Œ$ git remote add gitee git@gitee.com:trymesoft/myblog.gitæ·»åŠ è¿œç¨‹åº“ã€‚ å¦‚æžœå­˜åœ¨è¯´æ˜Žå½“å‰ç›®å½•ä¹‹å‰å…³è”è¿‡ Git è¿œç¨‹åº“ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªæ–°çš„ç›®å½•æ‰§è¡Œ$ git initåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„æœ¬åœ°ä»“åº“ï¼Œä¹Ÿå¯ä»¥æ‰§è¡Œ$ git remove rm &quot;XXX&quot;åˆ é™¤ï¼Œè¿˜å¯ä»¥å†æ·»åŠ ä¸€ä¸ªä¸é‡åçš„è¿œç¨‹åº“ã€‚ æäº¤çš„æ—¶å€™æŒ‡å®š pushï¼Œä¾‹ï¼š$ git push gitee masterè¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬çš„æœ¬åœ°åº“å°±å¯ä»¥åŒæ—¶ä¸Žå¤šä¸ªè¿œç¨‹åº“äº’ç›¸åŒæ­¥ï¼š å‚è€ƒï¼šåœ°å€1 åœ°å€2 2018-05-06æ›´æ–° æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬æŒ‰ä¸Šè¿°è¿‡ç¨‹é…ç½®å®ŒæˆåŽï¼Œæ‰§è¡Œ$ ssh -T v git@gitee.comæ—¶ï¼Œä¼šå‡ºçŽ°ä»¥ä¸‹é”™è¯¯ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798OpenSSH_7.4p1, LibreSSL 2.5.0debug1: Reading configuration data /etc/ssh/ssh_configdebug1: Connecting to gitee.com [120.55.226.24] port 22.debug1: Connection established.debug1: key_load_public: No such file or directorydebug1: identity file /Users/wangyx/.ssh/id_rsa type -1debug1: key_load_public: No such file or directorydebug1: identity file /Users/wangyx/.ssh/id_rsa-cert type -1debug1: key_load_public: No such file or directorydebug1: identity file /Users/wangyx/.ssh/id_dsa type -1debug1: key_load_public: No such file or directorydebug1: identity file /Users/wangyx/.ssh/id_dsa-cert type -1debug1: key_load_public: No such file or directorydebug1: identity file /Users/wangyx/.ssh/id_ecdsa type -1debug1: key_load_public: No such file or directorydebug1: identity file /Users/wangyx/.ssh/id_ecdsa-cert type -1debug1: key_load_public: No such file or directorydebug1: identity file /Users/wangyx/.ssh/id_ed25519 type -1debug1: key_load_public: No such file or directorydebug1: identity file /Users/wangyx/.ssh/id_ed25519-cert type -1debug1: Enabling compatibility mode for protocol 2.0debug1: Local version string SSH-2.0-OpenSSH_7.4debug1: Remote protocol version 2.0, remote software version OSChina.NETdebug1: no match: OSChina.NETdebug1: Authenticating to gitee.com:22 as &apos;git&apos;debug1: SSH2_MSG_KEXINIT sentdebug1: SSH2_MSG_KEXINIT receiveddebug1: kex: algorithm: curve25519-sha256@libssh.orgdebug1: kex: host key algorithm: ecdsa-sha2-nistp256debug1: kex: server-&gt;client cipher: aes128-ctr MAC: hmac-sha2-256 compression: nonedebug1: kex: client-&gt;server cipher: aes128-ctr MAC: hmac-sha2-256 compression: nonedebug1: expecting SSH2_MSG_KEX_ECDH_REPLYdebug1: Server host key: ecdsa-sha2-nistp256 SHA256:FQGC9Kn/eye1W8icdBgrQp+KkGYoFgbVr17bmjey0Wcdebug1: Host &apos;gitee.com&apos; is known and matches the ECDSA host key.debug1: Found key in /Users/wangyx/.ssh/known_hosts:1debug1: rekey after 4294967296 blocksdebug1: SSH2_MSG_NEWKEYS sentdebug1: expecting SSH2_MSG_NEWKEYSdebug1: SSH2_MSG_NEWKEYS receiveddebug1: rekey after 4294967296 blocksdebug1: SSH2_MSG_SERVICE_ACCEPT receiveddebug1: Authentications that can continue: publickeydebug1: Next authentication method: publickeydebug1: Trying private key: /Users/wangyx/.ssh/id_rsadebug1: Trying private key: /Users/wangyx/.ssh/id_dsadebug1: Trying private key: /Users/wangyx/.ssh/id_ecdsadebug1: Trying private key: /Users/wangyx/.ssh/id_ed25519debug1: No more authentication methods to try.Permission denied (publickey). è§£å†³æ–¹æ³• æ‰§è¡Œssh-add æ–‡ä»¶ç»å¯¹è·¯å¾„å³å¯ã€‚]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JDK1.5-JDK1.8 æ–°ç‰¹æ€§]]></title>
    <url>%2F2018%2F03%2Fjdk1.5-1.8features%2F</url>
    <content type="text"><![CDATA[æœ¬ç¯‡æ–‡ç« è®°å½•JDK1.5ç‰ˆæœ¬åˆ°JDK1.7ç‰ˆæœ¬çš„æ–°ç‰¹æ€§åŠJDK1.8ä¸»è¦éƒ¨åˆ†ç‰¹æ€§ã€‚ JDK1.5æ–°ç‰¹æ€§1. è‡ªåŠ¨è£…ç®±ä¸Žæ‹†ç®± è‡ªåŠ¨è£…ç®±ï¼šæ¯å½“éœ€è¦ä¸€ç§ç±»åž‹çš„å¯¹è±¡æ—¶ï¼Œè¿™ç§åŸºæœ¬ç±»åž‹å°±è‡ªåŠ¨åœ°å°è£…åˆ°ä¸Žå®ƒç›¸åŒç±»åž‹çš„åŒ…è£…ä¸­ã€‚è‡ªåŠ¨æ‹†ç®±ï¼šæ¯å½“éœ€è¦ä¸€ä¸ªå€¼æ—¶ï¼Œè¢«è£…ç®±å¯¹è±¡ä¸­çš„å€¼å°±è¢«è‡ªåŠ¨åœ°æå–å‡ºæ¥ï¼Œæ²¡å¿…è¦å†åŽ»è°ƒç”¨intValue()å’ŒdoubleValue()æ–¹æ³•ã€‚è‡ªåŠ¨è£…ç®±ï¼Œåªéœ€å°†è¯¥å€¼èµ‹ç»™ä¸€ä¸ªç±»åž‹åŒ…è£…å™¨å¼•ç”¨ï¼Œjavaä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚è‡ªåŠ¨æ‹†ç®±ï¼Œåªéœ€å°†è¯¥å¯¹è±¡å€¼èµ‹ç»™ä¸€ä¸ªåŸºæœ¬ç±»åž‹å³å¯ã€‚ç±»åž‹åŒ…è£…å™¨æœ‰ï¼šDouble,Float,Long,Integer,Short,Characterå’ŒBoolean 2. æžšä¸¾ æŠŠé›†åˆé‡Œçš„å¯¹è±¡å…ƒç´ ä¸€ä¸ªä¸ªæå–å‡ºæ¥ã€‚æžšä¸¾ç±»åž‹ä½¿ä»£ç æ›´å…·å¯è¯»æ€§ï¼Œç†è§£æ¸…æ™°ï¼Œæ˜“äºŽç»´æŠ¤ã€‚æžšä¸¾ç±»åž‹æ˜¯å¼ºç±»åž‹çš„ï¼Œä»Žè€Œä¿è¯äº†ç³»ç»Ÿå®‰å…¨æ€§ã€‚è€Œä»¥ç±»çš„é™æ€å­—æ®µå®žçŽ°çš„ç±»ä¼¼æ›¿ä»£æ¨¡åž‹ï¼Œä¸å…·æœ‰æžšä¸¾çš„ç®€å•æ€§å’Œç±»åž‹å®‰å…¨æ€§ã€‚ç®€å•ç”¨æ³•ï¼šJavaEnumç®€å•çš„ç”¨æ³•ä¸€èˆ¬ç”¨äºŽä»£è¡¨ä¸€ç»„å¸¸ç”¨å¸¸é‡ï¼Œå¯ç”¨æ¥ä»£è¡¨ä¸€ç±»ç›¸åŒç±»åž‹çš„å¸¸é‡å€¼ã€‚å¤æ‚ç”¨æ³•ï¼šJavaä¸ºæžšä¸¾ç±»åž‹æä¾›äº†ä¸€äº›å†…ç½®çš„æ–¹æ³•ï¼ŒåŒäº‹æžšä¸¾å¸¸é‡è¿˜å¯ä»¥æœ‰è‡ªå·±çš„æ–¹æ³•ã€‚å¯ä»¥å¾ˆæ–¹ä¾¿çš„éåŽ†æžšä¸¾å¯¹è±¡ã€‚ 3. é™æ€å¯¼å…¥ é€šè¿‡ä½¿ç”¨ import staticï¼Œå°±å¯ä»¥ä¸ç”¨æŒ‡å®š Constants ç±»åè€Œç›´æŽ¥ä½¿ç”¨é™æ€æˆå‘˜ï¼ŒåŒ…æ‹¬é™æ€æ–¹æ³•ã€‚import xxxx å’Œ import static xxxxçš„åŒºåˆ«æ˜¯å‰è€…ä¸€èˆ¬å¯¼å…¥çš„æ˜¯ç±»æ–‡ä»¶å¦‚import java.util.Scanner;åŽè€…ä¸€èˆ¬æ˜¯å¯¼å…¥é™æ€çš„æ–¹æ³•ï¼Œimport static java.lang.System.outã€‚ 4. å¯å˜å‚æ•°ï¼ˆVarargsï¼‰ å¯å˜å‚æ•°çš„ç®€å•è¯­æ³•æ ¼å¼ä¸ºï¼šmethodName([argumentList], dataType... argumentName); 5. å†…çœï¼ˆIntrospectorï¼‰ å†…çœæ˜¯Javaè¯­è¨€å¯¹Beanç±»å±žæ€§ã€äº‹ä»¶çš„ä¸€ç§ç¼ºçœå¤„ç†æ–¹æ³•ã€‚ä¾‹å¦‚ç±»Aä¸­æœ‰å±žæ€§name,é‚£æˆ‘ä»¬å¯ä»¥é€šè¿‡getName,setNameæ¥å¾—åˆ°å…¶å€¼æˆ–è€…è®¾ç½®æ–°çš„å€¼ã€‚é€šè¿‡getName/setNameæ¥è®¿é—®nameå±žæ€§ï¼Œè¿™å°±æ˜¯é»˜è®¤çš„è§„åˆ™ã€‚Javaä¸­æä¾›äº†ä¸€å¥—APIç”¨æ¥è®¿é—®æŸä¸ªå±žæ€§çš„getter /setteræ–¹æ³•ï¼Œé€šè¿‡è¿™äº›APIå¯ä»¥ä½¿ä½ ä¸éœ€è¦äº†è§£è¿™ä¸ªè§„åˆ™ï¼ˆä½†æœ€å¥½è¿˜æ˜¯è¦æžæ¸…æ¥šï¼‰ï¼Œè¿™äº›APIå­˜æ”¾äºŽåŒ…java.beansä¸­ã€‚ 6. æ³›åž‹(Generic) C++ é€šè¿‡æ¨¡æ¿æŠ€æœ¯å¯ä»¥æŒ‡å®šé›†åˆçš„å…ƒç´ ç±»åž‹ï¼Œè€ŒJavaåœ¨1.5ä¹‹å‰ä¸€ç›´æ²¡æœ‰ç›¸å¯¹åº”çš„åŠŸèƒ½ã€‚ä¸€ä¸ªé›†åˆå¯ä»¥æ”¾ä»»ä½•ç±»åž‹çš„å¯¹è±¡ï¼Œç›¸åº”åœ°ä»Žé›†åˆé‡Œé¢æ‹¿å¯¹è±¡çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿä¸å¾—ä¸å¯¹ä»–ä»¬è¿›è¡Œå¼ºåˆ¶å¾—ç±»åž‹è½¬æ¢ã€‚çŒ›è™Žå¼•å…¥äº†æ³›åž‹ï¼Œå®ƒå…è®¸æŒ‡å®šé›†åˆé‡Œå…ƒç´ çš„ç±»åž‹ï¼Œè¿™æ ·å¯ä»¥å¾—åˆ°å¼ºç±»åž‹åœ¨ç¼–è¯‘æ—¶åˆ»è¿›è¡Œç±»åž‹æ£€æŸ¥çš„å¥½å¤„ã€‚ 7. For-Eachå¾ªçŽ¯ For-Eachå¾ªçŽ¯å¾—åŠ å…¥ç®€åŒ–äº†é›†åˆçš„éåŽ†ã€‚ JDK1.6æ–°ç‰¹æ€§1. Desktopç±»å’ŒSystemTrayç±» åœ¨JDK6ä¸­ ,AWTæ–°å¢žåŠ äº†ä¸¤ä¸ªç±»:Desktopå’ŒSystemTrayã€‚ å‰è€…å¯ä»¥ç”¨æ¥æ‰“å¼€ç³»ç»Ÿé»˜è®¤æµè§ˆå™¨æµè§ˆæŒ‡å®šçš„URLï¼Œæ‰“å¼€ç³»ç»Ÿé»˜è®¤é‚®ä»¶å®¢æˆ·ç«¯ç»™æŒ‡å®šçš„é‚®ç®±å‘é‚®ä»¶ï¼Œç”¨é»˜è®¤åº”ç”¨ç¨‹åºæ‰“å¼€æˆ–ç¼–è¾‘æ–‡ä»¶ï¼ˆæ¯”å¦‚ï¼šç”¨è®°äº‹æœ¬æ‰“å¼€ä»¥txtä¸ºåŽç¼€åçš„æ–‡ä»¶ï¼‰ï¼Œ ç”¨ç³»ç»Ÿé»˜è®¤çš„æ‰“å°æœºæ‰“å°æ–‡æ¡£ï¼›åŽè€…å¯ä»¥ç”¨æ¥åœ¨ç³»ç»Ÿæ‰˜ç›˜åŒºåˆ›å»ºä¸€ä¸ªæ‰˜ç›˜ç¨‹åºã€‚ 2. ä½¿ç”¨JAXB2æ¥å®žçŽ°å¯¹è±¡ä¸ŽXMLä¹‹é—´çš„æ˜ å°„ JAXBæ˜¯Java Architecture for XML Bindingçš„ç¼©å†™ï¼Œå¯ä»¥å°†ä¸€ä¸ªJavaå¯¹è±¡è½¬å˜æˆä¸ºXMLæ ¼å¼ï¼Œåä¹‹äº¦ç„¶ã€‚ æˆ‘ä»¬æŠŠå¯¹è±¡ä¸Žå…³ç³»æ•°æ®åº“ä¹‹é—´çš„æ˜ å°„ç§°ä¸ºORMï¼Œå…¶å®žä¹Ÿå¯ä»¥æŠŠå¯¹è±¡ä¸ŽXMLä¹‹é—´çš„æ˜ å°„ç§°ä¸ºOXMï¼ˆObject XML Mappingï¼‰ åŽŸæ¥JAXBæ˜¯Java EEçš„ä¸€éƒ¨åˆ†ï¼Œåœ¨JDK6ä¸­ï¼ŒSUNå°†å…¶æ”¾åˆ°äº†Java SEä¸­ï¼Œè¿™ä¹Ÿæ˜¯SUNçš„ä¸€è´¯åšæ³•ã€‚JDK6ä¸­è‡ªå¸¦çš„è¿™ä¸ªJAXBç‰ˆæœ¬æ˜¯2.0ï¼Œæ¯”èµ·1.0(JSR 31)æ¥ï¼Œ JAXB2(JSR 222)ç”¨JDK5çš„æ–°ç‰¹æ€§Annotationæ¥æ ‡è¯†è¦ä½œç»‘å®šçš„ç±»å’Œå±žæ€§ç­‰ï¼Œè¿™å°±æžå¤§ç®€åŒ–äº†å¼€å‘çš„å·¥ä½œé‡ã€‚ å®žé™…ä¸Šï¼Œåœ¨Java EE 5.0ä¸­ï¼ŒEJBå’ŒWeb Servicesä¹Ÿé€šè¿‡Annotationæ¥ç®€åŒ–å¼€å‘å·¥ä½œã€‚å¦å¤–,JAXB2åœ¨åº•å±‚æ˜¯ç”¨StAX(JSR 173)æ¥å¤„ç†XMLæ–‡æ¡£ã€‚ é™¤äº†JAXBä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡XMLBeanså’ŒCastorç­‰æ¥å®žçŽ°åŒæ ·çš„åŠŸèƒ½ã€‚ 3. ç†è§£StAX StAX(JSR 173)æ˜¯JDK6.0ä¸­é™¤äº†DOMå’ŒSAXä¹‹å¤–çš„åˆä¸€ç§å¤„ç†XMLæ–‡æ¡£çš„APIã€‚ StAXçš„æ¥åŽ†ï¼šåœ¨JAXP1.3(JSR 206)æœ‰ä¸¤ç§å¤„ç†XMLæ–‡æ¡£çš„æ–¹æ³•ï¼šDOM(Document Object Model)å’ŒSAX(Simple API for XML)ã€‚ ç”±äºŽJDK6.0ä¸­çš„JAXB2(JSR 222)å’ŒJAX-WS 2.0(JSR 224)éƒ½ä¼šç”¨åˆ°StAXï¼Œæ‰€ä»¥Sunå†³å®šæŠŠStAXåŠ å…¥åˆ°JAXPå®¶æ—å½“ä¸­æ¥ï¼Œå¹¶å°†JAXPçš„ç‰ˆæœ¬å‡çº§åˆ°1.4 (JAXP1.4æ˜¯JAXP1.3çš„ç»´æŠ¤ç‰ˆæœ¬)ã€‚ JDK6é‡Œé¢JAXPçš„ç‰ˆæœ¬å°±æ˜¯1.4ã€‚ StAXæ˜¯The Streaming API for XMLçš„ç¼©å†™ï¼Œä¸€ç§åˆ©ç”¨æ‹‰æ¨¡å¼è§£æž(pull-parsing)XMLæ–‡æ¡£çš„API.StAXé€šè¿‡æä¾›ä¸€ç§åŸºäºŽäº‹ä»¶è¿­ä»£å™¨(Iterator)çš„APIè®© ç¨‹åºå‘˜åŽ»æŽ§åˆ¶xmlæ–‡æ¡£è§£æžè¿‡ç¨‹ï¼Œç¨‹åºéåŽ†è¿™ä¸ªäº‹ä»¶è¿­ä»£å™¨åŽ»å¤„ç†æ¯ä¸€ä¸ªè§£æžäº‹ä»¶ï¼Œè§£æžäº‹ä»¶å¯ä»¥çœ‹åšæ˜¯ç¨‹åºæ‹‰å‡ºæ¥çš„ï¼Œä¹Ÿå°±æ˜¯ç¨‹åºä¿ƒä½¿è§£æžå™¨äº§ç”Ÿä¸€ä¸ªè§£æžäº‹ä»¶ï¼Œ ç„¶åŽå¤„ç†è¯¥äº‹ä»¶ï¼Œä¹‹åŽåˆä¿ƒä½¿è§£æžå™¨äº§ç”Ÿä¸‹ä¸€ä¸ªè§£æžäº‹ä»¶ï¼Œå¦‚æ­¤å¾ªçŽ¯ç›´åˆ°ç¢°åˆ°æ–‡æ¡£ç»“æŸç¬¦ SAXä¹Ÿæ˜¯åŸºäºŽäº‹ä»¶å¤„ç†xmlæ–‡æ¡£ï¼Œä½†å´æ˜¯ç”¨æŽ¨æ¨¡å¼è§£æžï¼Œè§£æžå™¨è§£æžå®Œæ•´ä¸ªxmlæ–‡æ¡£åŽï¼Œæ‰äº§ç”Ÿè§£æžäº‹ä»¶ï¼Œç„¶åŽæŽ¨ç»™ç¨‹åºåŽ»å¤„ç†è¿™äº›äº‹ä»¶ï¼›DOM é‡‡ç”¨çš„æ–¹å¼æ˜¯å°†æ•´ä¸ª xmlæ–‡æ¡£æ˜ å°„åˆ°ä¸€é¢—å†…å­˜æ ‘ï¼Œè¿™æ ·å°±å¯ä»¥å¾ˆå®¹æ˜“åœ°å¾—åˆ°çˆ¶èŠ‚ç‚¹å’Œå­ç»“ç‚¹ä»¥åŠå…„å¼ŸèŠ‚ç‚¹çš„æ•°æ®ï¼Œä½†å¦‚æžœæ–‡æ¡£å¾ˆå¤§ï¼Œå°†ä¼šä¸¥é‡å½±å“æ€§èƒ½ã€‚ 4. ä½¿ç”¨Compiler API çŽ°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨JDK6 çš„Compiler API(JSR 199)åŽ»åŠ¨æ€ç¼–è¯‘Javaæºæ–‡ä»¶ï¼ŒCompiler APIç»“åˆåå°„åŠŸèƒ½å°±å¯ä»¥å®žçŽ°åŠ¨æ€çš„äº§ç”ŸJavaä»£ç å¹¶ç¼–è¯‘æ‰§è¡Œè¿™äº›ä»£ç ï¼Œæœ‰ç‚¹åŠ¨æ€è¯­è¨€çš„ç‰¹å¾ã€‚è¿™ä¸ªç‰¹æ€§å¯¹äºŽæŸäº›éœ€è¦ç”¨åˆ°åŠ¨æ€ç¼–è¯‘çš„åº”ç”¨ç¨‹åºç›¸å½“æœ‰ç”¨ï¼Œæ¯”å¦‚JSP Web Serverï¼Œå½“æˆ‘ä»¬æ‰‹åŠ¨ä¿®æ”¹JSPåŽï¼Œæ˜¯ä¸å¸Œæœ›éœ€è¦é‡å¯Web Serveræ‰å¯ä»¥çœ‹åˆ°æ•ˆæžœçš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ç”¨Compiler APIæ¥å®žçŽ°åŠ¨æ€ç¼–è¯‘JSPæ–‡ä»¶ï¼Œå½“ç„¶ï¼ŒçŽ°åœ¨çš„JSP Web Serverä¹Ÿæ˜¯æ”¯æŒJSPçƒ­éƒ¨ç½²çš„ï¼ŒçŽ°åœ¨çš„JSP Web Serveré€šè¿‡åœ¨è¿è¡ŒæœŸé—´é€šè¿‡Runtime.execæˆ–ProcessBuilderæ¥è°ƒç”¨javacæ¥ç¼–è¯‘ä»£ç ï¼Œè¿™ç§æ–¹å¼éœ€è¦æˆ‘ä»¬äº§ç”Ÿå¦ä¸€ä¸ªè¿›ç¨‹åŽ»åšç¼–è¯‘å·¥ä½œï¼Œä¸å¤Ÿä¼˜é›…è€Œä¸”å®¹æ˜“ä½¿ä»£ç ä¾èµ–ä¸Žç‰¹å®šçš„æ“ä½œç³»ç»Ÿï¼›Compiler APIé€šè¿‡ä¸€å¥—æ˜“ç”¨çš„æ ‡å‡†çš„APIæä¾›äº†æ›´åŠ ä¸°å¯Œçš„æ–¹å¼åŽ»åšåŠ¨æ€ç¼–è¯‘ï¼Œè€Œä¸”æ˜¯è·¨å¹³å°çš„ã€‚ 5. è½»é‡çº§Http Server API JDK6 æä¾›äº†ä¸€ä¸ªç®€å•çš„Http Server API,æ®æ­¤æˆ‘ä»¬å¯ä»¥æž„å»ºè‡ªå·±çš„åµŒå…¥å¼Http Server,å®ƒæ”¯æŒHttpå’ŒHttpsåè®®,æä¾›äº†HTTP1.1çš„éƒ¨åˆ†å®žçŽ°ï¼Œæ²¡æœ‰è¢«å®žçŽ°çš„é‚£éƒ¨åˆ†å¯ä»¥é€šè¿‡æ‰©å±•å·²æœ‰çš„Http Server APIæ¥å®žçŽ°,ç¨‹åºå‘˜å¿…é¡»è‡ªå·±å®žçŽ°HttpHandleræŽ¥å£,HttpServerä¼šè°ƒç”¨HttpHandlerå®žçŽ°ç±»çš„å›žè°ƒæ–¹æ³•æ¥å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ï¼Œåœ¨è¿™é‡Œ,æˆ‘ä»¬æŠŠä¸€ä¸ªHttpè¯·æ±‚å’Œå®ƒçš„å“åº”ç§°ä¸ºä¸€ä¸ªäº¤æ¢,åŒ…è£…æˆHttpExchangeç±»,HttpServerè´Ÿè´£å°†HttpExchangeä¼ ç»™ HttpHandlerå®žçŽ°ç±»çš„å›žè°ƒæ–¹æ³•. 6. æ’å…¥å¼æ³¨è§£å¤„ç†API(Pluggable Annotation Processing API) æ’å…¥å¼æ³¨è§£å¤„ç†API(JSR 269)æä¾›ä¸€å¥—æ ‡å‡†APIæ¥å¤„ç†Annotations(JSR 175)å®žé™…ä¸ŠJSR 269ä¸ä»…ä»…ç”¨æ¥å¤„ç†Annotation,æˆ‘è§‰å¾—æ›´å¼ºå¤§çš„åŠŸèƒ½æ˜¯å®ƒå»ºç«‹äº†Java è¯­è¨€æœ¬èº«çš„ä¸€ä¸ªæ¨¡åž‹,å®ƒæŠŠmethod, package, constructor, type,variable, enum, annotationç­‰Javaè¯­è¨€å…ƒç´ æ˜ å°„ä¸ºTypeså’ŒElements(ä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«?), ä»Žè€Œå°†Javaè¯­è¨€çš„è¯­ä¹‰æ˜ å°„æˆä¸ºå¯¹è±¡, æˆ‘ä»¬å¯ä»¥åœ¨javax.lang.modelåŒ…ä¸‹é¢å¯ä»¥çœ‹åˆ°è¿™äº›ç±». æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨JSR 269æä¾›çš„APIæ¥æž„å»ºä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„å…ƒç¼–ç¨‹(metaprogramming)çŽ¯å¢ƒ. JSR 269ç”¨Annotation Processoråœ¨ç¼–è¯‘æœŸé—´è€Œä¸æ˜¯è¿è¡ŒæœŸé—´å¤„ç†Annotation, Annotation Processorç›¸å½“äºŽç¼–è¯‘å™¨çš„ä¸€ä¸ªæ’ä»¶,æ‰€ä»¥ç§°ä¸ºæ’å…¥å¼æ³¨è§£å¤„ç†. å¦‚æžœAnnotation Processorå¤„ç†Annotationæ—¶(æ‰§è¡Œprocessæ–¹æ³•)äº§ç”Ÿäº†æ–°çš„Javaä»£ç ,ç¼–è¯‘å™¨ä¼šå†è°ƒç”¨ä¸€æ¬¡Annotation Processor,å¦‚æžœç¬¬äºŒæ¬¡å¤„ç†è¿˜æœ‰æ–°ä»£ç äº§ç”Ÿ,å°±ä¼šæŽ¥ç€è°ƒç”¨Annotation Processor,ç›´åˆ°æ²¡æœ‰æ–°ä»£ç äº§ç”Ÿä¸ºæ­¢.æ¯æ‰§è¡Œä¸€æ¬¡process()æ–¹æ³•è¢«ç§°ä¸ºä¸€ä¸ªâ€roundâ€,è¿™æ ·æ•´ä¸ªAnnotation processingè¿‡ç¨‹å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªroundçš„åºåˆ—. JSR 269ä¸»è¦è¢«è®¾è®¡æˆä¸ºé’ˆå¯¹Toolsæˆ–è€…å®¹å™¨çš„API. ä¸¾ä¸ªä¾‹å­,æˆ‘ä»¬æƒ³å»ºç«‹ä¸€å¥—åŸºäºŽAnnotationçš„å•å…ƒæµ‹è¯•æ¡†æž¶(å¦‚TestNG),åœ¨æµ‹è¯•ç±»é‡Œé¢ç”¨Annotationæ¥æ ‡è¯†æµ‹è¯•æœŸé—´éœ€è¦æ‰§è¡Œçš„æµ‹è¯•æ–¹æ³•ã€‚ 7. ç”¨Consoleå¼€å‘æŽ§åˆ¶å°ç¨‹åº JDK6 ä¸­æä¾›äº†java.io.Console ç±»ä¸“ç”¨æ¥è®¿é—®åŸºäºŽå­—ç¬¦çš„æŽ§åˆ¶å°è®¾å¤‡. ä½ çš„ç¨‹åºå¦‚æžœè¦ä¸ŽWindowsä¸‹çš„cmdæˆ–è€…Linuxä¸‹çš„Terminaläº¤äº’,å°±å¯ä»¥ç”¨Consoleç±»ä»£åŠ³. ä½†æˆ‘ä»¬ä¸æ€»æ˜¯èƒ½å¾—åˆ°å¯ç”¨çš„Console, ä¸€ä¸ªJVMæ˜¯å¦æœ‰å¯ç”¨çš„Consoleä¾èµ–äºŽåº•å±‚å¹³å°å’ŒJVMå¦‚ä½•è¢«è°ƒç”¨. å¦‚æžœJVMæ˜¯åœ¨äº¤äº’å¼å‘½ä»¤è¡Œ(æ¯”å¦‚Windowsçš„cmd)ä¸­å¯åŠ¨çš„,å¹¶ä¸”è¾“å…¥è¾“å‡ºæ²¡æœ‰é‡å®šå‘åˆ°å¦å¤–çš„åœ°æ–¹,é‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªå¯ç”¨çš„Consoleå®žä¾‹. 8. å¯¹è„šæœ¬è¯­è¨€çš„æ”¯æŒå¦‚: ruby, groovy, javascript9. Common Annotations Common annotationsåŽŸæœ¬æ˜¯Java EE 5.0(JSR 244)è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼ŒçŽ°åœ¨SUNæŠŠå®ƒçš„ä¸€éƒ¨åˆ†æ”¾åˆ°äº†Java SE 6.0ä¸­.éšç€Annotationå…ƒæ•°æ®åŠŸèƒ½(JSR 175)åŠ å…¥åˆ°Java SE 5.0é‡Œé¢ï¼Œå¾ˆå¤šJava æŠ€æœ¯(æ¯”å¦‚EJB,Web Services)éƒ½ä¼šç”¨Annotationéƒ¨åˆ†ä»£æ›¿XMLæ–‡ä»¶æ¥é…ç½®è¿è¡Œå‚æ•°ï¼ˆæˆ–è€…è¯´æ˜¯æ”¯æŒå£°æ˜Žå¼ç¼–ç¨‹,å¦‚EJBçš„å£°æ˜Žå¼äº‹åŠ¡,å¦‚æžœè¿™äº›æŠ€æœ¯ä¸ºé€šç”¨ç›®çš„éƒ½å•ç‹¬å®šä¹‰äº†è‡ªå·±çš„Annotations,æ˜¾ç„¶æœ‰ç‚¹é‡å¤å»ºè®¾, æ‰€ä»¥,ä¸ºå…¶ä»–ç›¸å…³çš„JavaæŠ€æœ¯å®šä¹‰ä¸€å¥—å…¬å…±çš„Annotationæ˜¯æœ‰ä»·å€¼çš„ï¼Œå¯ä»¥é¿å…é‡å¤å»ºè®¾çš„åŒæ—¶ï¼Œä¹Ÿä¿è¯Java SEå’ŒJava EE å„ç§æŠ€æœ¯çš„ä¸€è‡´æ€§. ä¸‹é¢åˆ—ä¸¾å‡ºCommon Annotations 1.0é‡Œé¢çš„10ä¸ªAnnotations Common Annotations Annotation Retention Target Description Generated Source ANNOTATION_TYPE, CONSTRUCTOR, FIELD, LOCAL_VARIABLE, METHOD, PACKAGE, PARAMETER, TYPE ç”¨äºŽæ ‡æ³¨ç”Ÿæˆçš„æºä»£ç  Resource Runtime TYPE, METHOD, FIELD ç”¨äºŽæ ‡æ³¨æ‰€ä¾èµ–çš„èµ„æº,å®¹å™¨æ®æ­¤æ³¨å…¥å¤–éƒ¨èµ„æºä¾èµ–ï¼Œæœ‰åŸºäºŽå­—æ®µçš„æ³¨å…¥å’ŒåŸºäºŽsetteræ–¹æ³•çš„æ³¨å…¥ä¸¤ç§æ–¹å¼ Resources Runtime TYPE åŒæ—¶æ ‡æ³¨å¤šä¸ªå¤–éƒ¨ä¾èµ–ï¼Œå®¹å™¨ä¼šæŠŠæ‰€æœ‰è¿™äº›å¤–éƒ¨ä¾èµ–æ³¨å…¥ PostConstruct Runtime METHOD æ ‡æ³¨å½“å®¹å™¨æ³¨å…¥æ‰€æœ‰ä¾èµ–ä¹‹åŽè¿è¡Œçš„æ–¹æ³•ï¼Œç”¨æ¥è¿›è¡Œä¾èµ–æ³¨å…¥åŽçš„åˆå§‹åŒ–å·¥ä½œï¼Œåªæœ‰ä¸€ä¸ªæ–¹æ³•å¯ä»¥æ ‡æ³¨ä¸ºPostConstruct PreDestroy Runtime METHOD å½“å¯¹è±¡å®žä¾‹å°†è¦è¢«ä»Žå®¹å™¨å½“ä¸­åˆ æŽ‰ä¹‹å‰ï¼Œè¦æ‰§è¡Œçš„å›žè°ƒæ–¹æ³•è¦æ ‡æ³¨ä¸ºPreDestroy RunAs Runtime TYPE ç”¨äºŽæ ‡æ³¨ç”¨ä»€ä¹ˆå®‰å…¨è§’è‰²æ¥æ‰§è¡Œè¢«æ ‡æ³¨ç±»çš„æ–¹æ³•ï¼Œè¿™ä¸ªå®‰å…¨è§’è‰²å¿…é¡»å’ŒContainer çš„Securityè§’è‰²ä¸€è‡´çš„ã€‚RolesAllowed Runtime TYPE, METHOD ç”¨äºŽæ ‡æ³¨å…è®¸æ‰§è¡Œè¢«æ ‡æ³¨ç±»æˆ–æ–¹æ³•çš„å®‰å…¨è§’è‰²ï¼Œè¿™ä¸ªå®‰å…¨è§’è‰²å¿…é¡»å’ŒContainer çš„Securityè§’è‰²ä¸€è‡´çš„ PermitAll Runtime TYPE, METHOD å…è®¸æ‰€æœ‰è§’è‰²æ‰§è¡Œè¢«æ ‡æ³¨çš„ç±»æˆ–æ–¹æ³• DenyAll Runtime TYPE, METHOD ä¸å…è®¸ä»»ä½•è§’è‰²æ‰§è¡Œè¢«æ ‡æ³¨çš„ç±»æˆ–æ–¹æ³•ï¼Œè¡¨æ˜Žè¯¥ç±»æˆ–æ–¹æ³•ä¸èƒ½åœ¨Java EEå®¹å™¨é‡Œé¢è¿è¡Œ DeclareRoles Runtime TYPE ç”¨æ¥å®šä¹‰å¯ä»¥è¢«åº”ç”¨ç¨‹åºæ£€éªŒçš„å®‰å…¨è§’è‰²ï¼Œé€šå¸¸ç”¨isUserInRoleæ¥æ£€éªŒå®‰å…¨è§’è‰² æ³¨æ„: RolesAllowed,PermitAll,DenyAllä¸èƒ½åŒæ—¶åº”ç”¨åˆ°ä¸€ä¸ªç±»æˆ–æ–¹æ³•ä¸Š æ ‡æ³¨åœ¨æ–¹æ³•ä¸Šçš„RolesAllowed,PermitAll,DenyAllä¼šè¦†ç›–æ ‡æ³¨åœ¨ç±»ä¸Šçš„RolesAllowed,PermitAll,DenyAll RunAs,RolesAllowed,PermitAll,DenyAllå’ŒDeclareRolesè¿˜æ²¡æœ‰åŠ åˆ°Java SE 6.0ä¸Šæ¥ å¤„ç†ä»¥ä¸ŠAnnotationsçš„å·¥ä½œæ˜¯ç”±Java EEå®¹å™¨æ¥åš, Java SE 6.0åªæ˜¯åŒ…å«äº†ä¸Šé¢è¡¨æ ¼çš„å‰äº”ç§Annotationsçš„å®šä¹‰ç±»,å¹¶æ²¡æœ‰åŒ…å«å¤„ç†è¿™äº›Annotationsçš„å¼•æ“Ž,è¿™ä¸ªå·¥ä½œå¯ä»¥ç”±Pluggable Annotation Processing API(JSR 269)æ¥åšæ”¹åŠ¨çš„åœ°æ–¹æœ€å¤§çš„å°±æ˜¯java GUIç•Œé¢çš„æ˜¾ç¤ºäº†ï¼ŒJDK6.0ï¼ˆä¹Ÿå°±æ˜¯JDK1.6ï¼‰æ”¯æŒæœ€æ–°çš„windows vistaç³»ç»Ÿçš„Windows Aeroè§†çª—æ•ˆæžœï¼Œè€ŒJDK1.5ä¸æ”¯æŒï¼ï¼ï¼ä½ è¦åœ¨vistaçŽ¯å¢ƒä¸‹ç¼–ç¨‹çš„è¯æœ€å¥½è£…jdk6.0ï¼Œå¦åˆ™å®ƒæ€»æ˜¯æ¢åˆ°windows basicè§†çª—æ•ˆæžœ. JDK 1.7æ–°ç‰¹æ€§1. switchä¸­å¯ä»¥ä½¿ç”¨å­—ä¸²1234567891011String s = "test";switch (s) &#123; case "test" : System.out.println("test");case "test1" : System.out.println("test1");break ;default : System.out.println("break");break ;&#125; 2. â€œ&lt;&gt;â€çš„è¿ç”¨List tempList = new ArrayList&lt;&gt;(); å³æ³›åž‹å®žä¾‹åŒ–ç±»åž‹è‡ªåŠ¨æŽ¨æ–­ã€‚123456789101112131415161718192021222324252627public class JDK7GenericTest &#123; public static void main(String[] args) &#123; // Pre-JDK 7 List&lt;String&gt; lst1 = new ArrayList&lt;String&gt;(); // JDK 7 supports limited type inference for generic instance creation List&lt;String&gt; lst2 = new ArrayList&lt;&gt;(); lst1.add("Mon"); lst1.add("Tue"); lst2.add("Wed"); lst2.add("Thu"); for (String item: lst1) &#123; System.out.println(item); &#125; for (String item: lst2) &#123; System.out.println(item); &#125; &#125;&#125; 3. è‡ªå®šä¹‰è‡ªåŠ¨å…³é—­ç±»ä»¥ä¸‹æ˜¯jdk7 apiä¸­çš„æŽ¥å£ï¼Œï¼ˆä¸è¿‡æ³¨é‡Šå¤ªé•¿ï¼Œåˆ æŽ‰äº†close()æ–¹æ³•çš„ä¸€éƒ¨åˆ†æ³¨é‡Šï¼‰123456789101112131415/** * A resource that must be closed when it is no longer needed. * * @author Josh Bloch * @since 1.7 */public interface AutoCloseable &#123; /** * Closes this resource, relinquishing any underlying resources. * This method is invoked automatically on objects managed by the * &#123;@code try&#125;-with-resources statement. * */ void close() throws Exception;&#125; åªè¦å®žçŽ°è¯¥æŽ¥å£ï¼Œåœ¨è¯¥ç±»å¯¹è±¡é”€æ¯æ—¶è‡ªåŠ¨è°ƒç”¨closeæ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨closeæ–¹æ³•å…³é—­ä½ æƒ³å…³é—­çš„èµ„æºï¼Œä¾‹å­å¦‚ä¸‹12345678910111213141516171819class TryClose implements AutoCloseable &#123; @Override public void close() throws Exception &#123; System.out.println(" Custom close method â€¦ close resources "); &#125;&#125;//è¯·çœ‹jdkè‡ªå¸¦ç±»BufferedReaderå¦‚ä½•å®žçŽ°closeæ–¹æ³•ï¼ˆå½“ç„¶è¿˜æœ‰å¾ˆå¤šç±»ä¼¼ç±»åž‹çš„ç±»ï¼‰ public void close() throws IOException &#123; synchronized (lock) &#123; if (in == null) return; in.close(); in = null; cb = null; &#125; &#125; 4. æ–°å¢žä¸€äº›å–çŽ¯å¢ƒä¿¡æ¯çš„å·¥å…·æ–¹æ³•123456789File System.getJavaIoTempDir() // IOä¸´æ—¶æ–‡ä»¶å¤¹File System.getJavaHomeDir() // JREçš„å®‰è£…ç›®å½•File System.getUserHomeDir() // å½“å‰ç”¨æˆ·ç›®å½•File System.getUserDir() // å¯åŠ¨javaè¿›ç¨‹æ—¶æ‰€åœ¨çš„ç›®å½•....... 5. Booleanç±»åž‹åè½¬ï¼Œç©ºæŒ‡é’ˆå®‰å…¨ï¼Œå‚ä¸Žä½è¿ç®—123456789101112131415Boolean Booleans.negate(Boolean booleanObj)True =&gt; False , False =&gt; True, Null =&gt; Nullboolean Booleans.and(boolean[] array)boolean Booleans.or(boolean[] array)boolean Booleans.xor(boolean[] array)boolean Booleans.and(Boolean[] array)boolean Booleans.or(Boolean[] array)boolean Booleans.xor(Boolean[] array) 6. ä¸¤ä¸ªcharé—´çš„equals1boolean Character.equalsIgnoreCase(char ch1, char ch2) 7. å®‰å…¨çš„åŠ å‡ä¹˜é™¤1234567891011121314151617181920212223int Math.safeToInt(long value)int Math.safeNegate(int value)long Math.safeSubtract(long value1, int value2)long Math.safeSubtract(long value1, long value2)int Math.safeMultiply(int value1, int value2)long Math.safeMultiply(long value1, int value2)long Math.safeMultiply(long value1, long value2)long Math.safeNegate(long value)int Math.safeAdd(int value1, int value2)long Math.safeAdd(long value1, int value2)long Math.safeAdd(long value1, long value2)int Math.safeSubtract(int value1, int value2) 8. å¯¹Javaé›†åˆï¼ˆCollectionsï¼‰çš„å¢žå¼ºæ”¯æŒ åœ¨JDK1.7ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒJavaé›†åˆå®¹å™¨ä¸­å­˜å–å…ƒç´ çš„å½¢å¼å¦‚ä¸‹ï¼šä»¥Listã€Setã€Mapé›†åˆå®¹å™¨ä¸ºä¾‹ï¼š1234567891011121314151617//åˆ›å»ºListæŽ¥å£å¯¹è±¡List&lt;String&gt; list=new ArrayList&lt;String&gt;();list.add("item"); //ç”¨add()æ–¹æ³•èŽ·å–å¯¹è±¡String Item=list.get(0); //ç”¨get()æ–¹æ³•èŽ·å–å¯¹è±¡ //åˆ›å»ºSetæŽ¥å£å¯¹è±¡Set&lt;String&gt; set=new HashSet&lt;String&gt;();set.add("item"); //ç”¨add()æ–¹æ³•æ·»åŠ å¯¹è±¡ //åˆ›å»ºMapæŽ¥å£å¯¹è±¡Map&lt;String,Integer&gt; map=new HashMap&lt;String,Integer&gt;();map.put("key",1); //ç”¨put()æ–¹æ³•æ·»åŠ å¯¹è±¡int value=map.get("key"); åœ¨JDK1.7ä¸­ï¼Œæ‘’å¼ƒäº†Javaé›†åˆæŽ¥å£çš„å®žçŽ°ç±»ï¼Œå¦‚ï¼šArrayListã€HashSetå’ŒHashMapã€‚è€Œæ˜¯ç›´æŽ¥é‡‡ç”¨[]ã€{}çš„å½¢å¼å­˜å…¥å¯¹è±¡ï¼Œé‡‡ç”¨[]çš„å½¢å¼æŒ‰ç…§ç´¢å¼•ã€é”®å€¼æ¥èŽ·å–é›†åˆä¸­çš„å¯¹è±¡ï¼Œå¦‚ä¸‹ï¼š12345List&lt;String&gt; list=["item"]; //å‘Listé›†åˆä¸­æ·»åŠ å…ƒç´ String item=list[0]; //ä»ŽListé›†åˆä¸­èŽ·å–å…ƒç´ Set&lt;String&gt; set=&#123;"item"&#125;; //å‘Seté›†åˆå¯¹è±¡ä¸­æ·»åŠ å…ƒç´ Map&lt;String,Integer&gt; map=&#123;"key":1&#125;; //å‘Mapé›†åˆä¸­æ·»åŠ å¯¹è±¡int value=map["key"]; //ä»ŽMapé›†åˆä¸­èŽ·å–å¯¹è±¡ 9. æ•°å€¼å¯åŠ ä¸‹åˆ’çº¿1int one_million = 1_000_000; 10. æ”¯æŒäºŒè¿›åˆ¶æ–‡å­—1int binary = 0b1001_1001; 11. ç®€åŒ–äº†å¯å˜å‚æ•°æ–¹æ³•çš„è°ƒç”¨ å½“ç¨‹åºå‘˜è¯•å›¾ä½¿ç”¨ä¸€ä¸ªä¸å¯å…·ä½“åŒ–çš„å¯å˜å‚æ•°å¹¶è°ƒç”¨ä¸€ä¸ªvarargs ï¼ˆå¯å˜ï¼‰æ–¹æ³•æ—¶ï¼Œç¼–è¾‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªâ€œéžå®‰å…¨æ“ä½œâ€çš„è­¦å‘Šã€‚ 12. åœ¨try catchå¼‚å¸¸æ•æ‰ä¸­ï¼Œä¸€ä¸ªcatchå¯ä»¥å†™å¤šä¸ªå¼‚å¸¸ç±»åž‹ï¼Œç”¨â€|â€éš”å¼€jdk7ä¹‹å‰ï¼š1234567try &#123; ......&#125; catch(ClassNotFoundException ex) &#123; ex.printStackTrace();&#125; catch(SQLException ex) &#123; ex.printStackTrace();&#125; jdk7ä¾‹:12345try &#123; ......&#125; catch(ClassNotFoundException|SQLException ex) &#123; ex.printStackTrace();&#125; 13. jdk7ä¹‹å‰ï¼Œä½ å¿…é¡»ç”¨try{}finally{}åœ¨tryå†…ä½¿ç”¨èµ„æºï¼Œåœ¨finallyä¸­å…³é—­èµ„æºï¼Œä¸ç®¡tryä¸­çš„ä»£ç æ˜¯å¦æ­£å¸¸é€€å‡ºæˆ–è€…å¼‚å¸¸é€€å‡ºã€‚jdk7ä¹‹åŽï¼Œä½ å¯ä»¥ä¸å¿…è¦å†™finallyè¯­å¥æ¥å…³é—­èµ„æºï¼Œåªè¦ä½ åœ¨try()çš„æ‹¬å·å†…éƒ¨å®šä¹‰è¦ä½¿ç”¨çš„èµ„æºjdk7ä¹‹å‰ï¼š123456789101112131415161718192021222324252627282930313233import java.io.*;// Copy from one file to another file character by character.// Pre-JDK 7 requires you to close the resources using a finally block.public class FileCopyPreJDK7 &#123; public static void main(String[] args) &#123; BufferedReader in = null; BufferedWriter out = null; try &#123; in = new BufferedReader(new FileReader("in.txt")); out = new BufferedWriter(new FileWriter("out.txt")); int charRead; while ((charRead = in.read()) != -1) &#123; System.out.printf("%c ", (char)charRead); out.write(charRead); &#125; &#125; catch (IOException ex) &#123; ex.printStackTrace(); &#125; finally &#123; // always close the streams try &#123; if (in != null) in.close(); if (out != null) out.close(); &#125; catch (IOException ex) &#123; ex.printStackTrace(); &#125; &#125; try &#123; in.read(); // Trigger IOException: Stream closed &#125; catch (IOException ex) &#123; ex.printStackTrace(); &#125; &#125;&#125; jdk7ä¹‹åŽï¼š123456789101112131415161718import java.io.*;// Copy from one file to another file character by character.// JDK 7 has a try-with-resources statement, which ensures that// each resource opened in try() is closed at the end of the statement.public class FileCopyJDK7 &#123; public static void main(String[] args) &#123; try (BufferedReader in = new BufferedReader(new FileReader("in.txt")); BufferedWriter out = new BufferedWriter(new FileWriter("out.txt"))) &#123; int charRead; while ((charRead = in.read()) != -1) &#123; System.out.printf("%c ", (char)charRead); out.write(charRead); &#125; &#125; catch (IOException ex) &#123; ex.printStackTrace(); &#125; &#125;&#125; JDK1.8 åå¤§æ–°ç‰¹æ€§1. æŽ¥å£çš„é»˜è®¤æ–¹æ³•Java 8å…è®¸æˆ‘ä»¬ç»™æŽ¥å£æ·»åŠ ä¸€ä¸ªéžæŠ½è±¡çš„æ–¹æ³•å®žçŽ°ï¼Œåªéœ€è¦ä½¿ç”¨ defaultå…³é”®å­—å³å¯ï¼Œè¿™ä¸ªç‰¹å¾åˆå«åšæ‰©å±•æ–¹æ³•123456interface Formula &#123; double calculate(int a); default double sqrt(int a) &#123; return Math.sqrt(a); &#125;&#125; FormulaæŽ¥å£åœ¨æ‹¥æœ‰calculateæ–¹æ³•ä¹‹å¤–åŒæ—¶è¿˜å®šä¹‰äº†sqrtæ–¹æ³•ï¼Œå®žçŽ°äº†FormulaæŽ¥å£çš„å­ç±»åªéœ€è¦å®žçŽ°ä¸€ä¸ªcalculateæ–¹æ³•ï¼Œé»˜è®¤æ–¹æ³•sqrtå°†åœ¨å­ç±»ä¸Šå¯ä»¥ç›´æŽ¥ä½¿ç”¨ã€‚12345678Formula formula = new Formula() &#123; @Override public double calculate(int a) &#123; return sqrt(a * 100); &#125;&#125;;formula.calculate(100); // 100.0formula.sqrt(16); // 4.0 æ–‡ä¸­çš„formulaè¢«å®žçŽ°ä¸ºä¸€ä¸ªåŒ¿åç±»çš„å®žä¾‹ï¼Œè¯¥ä»£ç éžå¸¸å®¹æ˜“ç†è§£ï¼Œ6è¡Œä»£ç å®žçŽ°äº†è®¡ç®— sqrt(a * 100)ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šçœ‹åˆ°å®žçŽ°å•æ–¹æ³•æŽ¥å£çš„æ›´ç®€å•çš„åšæ³•ã€‚æ³¨ï¼š åœ¨Javaä¸­åªæœ‰å•ç»§æ‰¿ï¼Œå¦‚æžœè¦è®©ä¸€ä¸ªç±»èµ‹äºˆæ–°çš„ç‰¹æ€§ï¼Œé€šå¸¸æ˜¯ä½¿ç”¨æŽ¥å£æ¥å®žçŽ°ï¼Œåœ¨C++ä¸­æ”¯æŒå¤šç»§æ‰¿ï¼Œå…è®¸ä¸€ä¸ªå­ç±»åŒæ—¶å…·æœ‰å¤šä¸ªçˆ¶ç±»çš„æŽ¥å£ä¸ŽåŠŸèƒ½ï¼Œåœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œè®©ä¸€ä¸ªç±»åŒæ—¶å…·æœ‰å…¶ä»–çš„å¯å¤ç”¨ä»£ç çš„æ–¹æ³•å«åšmixinã€‚æ–°çš„Java8çš„è¿™ä¸ªç‰¹æ–°åœ¨ç¼–è¯‘å™¨å®žçŽ°çš„è§’åº¦ä¸Šæ¥è¯´æ›´åŠ æŽ¥è¿‘Scalaçš„traitã€‚åœ¨C#ä¸­ä¹Ÿæœ‰åä¸ºæ‰©å±•æ–¹æ³•çš„æ¦‚å¿µï¼Œå…è®¸ç»™å·²å­˜åœ¨çš„ç±»åž‹æ‰©å±•æ–¹æ³•ï¼Œå’ŒJava8çš„è¿™ä¸ªåœ¨è¯­ä¹‰ä¸Šæœ‰å·®åˆ«ã€‚ 2. Lambda è¡¨è¾¾å¼é¦–å…ˆçœ‹çœ‹åœ¨è€ç‰ˆæœ¬çš„Javaä¸­æ˜¯å¦‚ä½•æŽ’åˆ—å­—ç¬¦ä¸²çš„ï¼š1234567List&lt;String&gt; names = Arrays.asList("peter", "anna", "mike", "xenia");Collections.sort(names, new Comparator&lt;String&gt;() &#123; @Override public int compare(String a, String b) &#123; return b.compareTo(a); &#125;&#125;); åªéœ€è¦ç»™é™æ€æ–¹æ³•Collections.sortä¼ å…¥ä¸€ä¸ªListå¯¹è±¡ä»¥åŠä¸€ä¸ªæ¯”è¾ƒå™¨æ¥æŒ‰æŒ‡å®šé¡ºåºæŽ’åˆ—ã€‚é€šå¸¸åšæ³•éƒ½æ˜¯åˆ›å»ºä¸€ä¸ªåŒ¿åçš„æ¯”è¾ƒå™¨å¯¹è±¡ç„¶åŽå°†å…¶ä¼ é€’ç»™sortæ–¹æ³•ã€‚åœ¨Java 8 ä¸­ä½ å°±æ²¡å¿…è¦ä½¿ç”¨è¿™ç§ä¼ ç»Ÿçš„åŒ¿åå¯¹è±¡çš„æ–¹å¼äº†ï¼ŒJava8æä¾›äº†æ›´ç®€æ´çš„è¯­æ³•ï¼Œlambdaè¡¨è¾¾å¼ï¼š123Collections.sort(names, (String a, String b) -&gt; &#123; return b.compareTo(a);&#125;); ä»£ç å˜å¾—æ›´æ®µä¸”æ›´å…·æœ‰å¯è¯»æ€§ï¼Œä½†æ˜¯å®žé™…ä¸Šè¿˜å¯ä»¥å†™å¾—æ›´çŸ­ï¼š1Collections.sort(names, (String a, String b) -&gt; b.compareTo(a)); å¯¹äºŽå‡½æ•°ä½“åªæœ‰ä¸€è¡Œä»£ç çš„ï¼Œä½ å¯ä»¥åŽ»æŽ‰å¤§æ‹¬å·{}ä»¥åŠreturnå…³é”®å­—ï¼Œä½†æ˜¯ä½ è¿˜å¯ä»¥å†™å¾—æ›´çŸ­ç‚¹ï¼š1Collections.sort(names, (a, b) -&gt; b.compareTo(a)); avaç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æŽ¨å¯¼å‡ºå‚æ•°ç±»åž‹ï¼Œæ‰€ä»¥ä½ å¯ä»¥ä¸ç”¨å†å†™ä¸€æ¬¡ç±»åž‹ã€‚ 3. å‡½æ•°å¼æŽ¥å£Lambdaè¡¨è¾¾å¼æ˜¯å¦‚ä½•åœ¨javaçš„ç±»åž‹ç³»ç»Ÿä¸­è¡¨ç¤ºçš„å‘¢ï¼Ÿæ¯ä¸€ä¸ªlambdaè¡¨è¾¾å¼éƒ½å¯¹åº”ä¸€ä¸ªç±»åž‹ï¼Œé€šå¸¸æ˜¯æŽ¥å£ç±»åž‹ã€‚è€Œâ€œå‡½æ•°å¼æŽ¥å£â€æ˜¯æŒ‡ä»…ä»…åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æŽ¥å£ï¼Œæ¯ä¸€ä¸ªè¯¥ç±»åž‹çš„lambdaè¡¨è¾¾å¼éƒ½ä¼šè¢«åŒ¹é…åˆ°è¿™ä¸ªæŠ½è±¡æ–¹æ³•ã€‚å› ä¸º é»˜è®¤æ–¹æ³• ä¸ç®—æŠ½è±¡æ–¹æ³•ï¼Œæ‰€ä»¥ä½ ä¹Ÿå¯ä»¥ç»™ä½ çš„å‡½æ•°å¼æŽ¥å£æ·»åŠ é»˜è®¤æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥å°†lambdaè¡¨è¾¾å¼å½“ä½œä»»æ„åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æŽ¥å£ç±»åž‹ï¼Œç¡®ä¿ä½ çš„æŽ¥å£ä¸€å®šè¾¾åˆ°è¿™ä¸ªè¦æ±‚ï¼Œä½ åªéœ€è¦ç»™ä½ çš„æŽ¥å£æ·»åŠ @FunctionalInterfaceæ³¨è§£ï¼Œç¼–è¯‘å™¨å¦‚æžœå‘çŽ°ä½ æ ‡æ³¨äº†è¿™ä¸ªæ³¨è§£çš„æŽ¥å£æœ‰å¤šäºŽä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ—¶å€™ä¼šæŠ¥é”™çš„ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š1234567@FunctionalInterfaceinterface Converter&lt;F, T&gt; &#123; T convert(F from);&#125;Converter&lt;String, Integer&gt; converter = (from) -&gt; Integer.valueOf(from);Integer converted = converter.convert("123");System.out.println(converted); // 123 éœ€è¦æ³¨æ„å¦‚æžœ@FunctionalInterfaceå¦‚æžœæ²¡æœ‰æŒ‡å®šï¼Œä¸Šé¢çš„ä»£ç ä¹Ÿæ˜¯å¯¹çš„ã€‚æ³¨ï¼š å°†lambdaè¡¨è¾¾å¼æ˜ å°„åˆ°ä¸€ä¸ªå•æ–¹æ³•çš„æŽ¥å£ä¸Šï¼Œè¿™ç§åšæ³•åœ¨Java8ä¹‹å‰å°±æœ‰åˆ«çš„è¯­è¨€å®žçŽ°ï¼Œæ¯”å¦‚Rhino JavaScriptè§£é‡Šå™¨ï¼Œå¦‚æžœä¸€ä¸ªå‡½æ•°å‚æ•°æŽ¥æ”¶ä¸€ä¸ªå•æ–¹æ³•çš„æŽ¥å£è€Œä½ ä¼ é€’çš„æ˜¯ä¸€ä¸ªfunctionï¼ŒRhino è§£é‡Šå™¨ä¼šè‡ªåŠ¨åšä¸€ä¸ªå•æŽ¥å£çš„å®žä¾‹åˆ°functionçš„é€‚é…å™¨ï¼Œå…¸åž‹çš„åº”ç”¨åœºæ™¯æœ‰ org.w3c.dom.events.EventTargetçš„addEventListenerç¬¬äºŒä¸ªå‚æ•°EventListenerã€‚ 4. æ–¹æ³•ä¸Žæž„é€ å‡½æ•°å¼•ç”¨å‰ä¸€èŠ‚ä¸­çš„ä»£ç è¿˜å¯ä»¥é€šè¿‡é™æ€æ–¹æ³•å¼•ç”¨æ¥è¡¨ç¤ºï¼š123Converter&lt;String, Integer&gt; converter = Integer::valueOf;Integer converted = converter.convert("123");System.out.println(converted); // 123 Java8å…è®¸ä½ ä½¿ç”¨ :: å…³é”®å­—æ¥ä¼ é€’æ–¹æ³•æˆ–è€…æž„é€ å‡½æ•°å¼•ç”¨ï¼Œä¸Šé¢çš„ä»£ç å±•ç¤ºäº†å¦‚ä½•å¼•ç”¨ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¼•ç”¨ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼š123converter = something::startsWith;String converted = converter.convert("Java");System.out.println(converted); // "J" æŽ¥ä¸‹æ¥çœ‹çœ‹æž„é€ å‡½æ•°æ˜¯å¦‚ä½•ä½¿ç”¨::å…³é”®å­—æ¥å¼•ç”¨çš„ï¼Œé¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåŒ…å«å¤šä¸ªæž„é€ å‡½æ•°çš„ç®€å•ç±»ï¼š12345678910class Person &#123; String firstName; String lastName; Person() &#123;&#125; Person(String firstName, String lastName) &#123; this.firstName = firstName; this.lastName = lastName; &#125;&#125; æŽ¥ä¸‹æ¥æˆ‘ä»¬æŒ‡å®šä¸€ä¸ªç”¨æ¥åˆ›å»ºPersonå¯¹è±¡çš„å¯¹è±¡å·¥åŽ‚æŽ¥å£ï¼š123interface PersonFactory&lt;P extends Person&gt; &#123; P create(String firstName, String lastName);&#125; è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨æž„é€ å‡½æ•°å¼•ç”¨æ¥å°†ä»–ä»¬å…³è”èµ·æ¥ï¼Œè€Œä¸æ˜¯å®žçŽ°ä¸€ä¸ªå®Œæ•´çš„å·¥åŽ‚ï¼š12PersonFactory&lt;Person&gt; personFactory = Person::new;Person person = personFactory.create("Peter", "Parker"); æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ Person::new æ¥èŽ·å–Personç±»æž„é€ å‡½æ•°çš„å¼•ç”¨ï¼ŒJavaç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ ¹æ®PersonFactory.createæ–¹æ³•çš„ç­¾åæ¥é€‰æ‹©åˆé€‚çš„æž„é€ å‡½æ•°ã€‚ 5. Lambda ä½œç”¨åŸŸåœ¨lambdaè¡¨è¾¾å¼ä¸­è®¿é—®å¤–å±‚ä½œç”¨åŸŸå’Œè€ç‰ˆæœ¬çš„åŒ¿åå¯¹è±¡ä¸­çš„æ–¹å¼å¾ˆç›¸ä¼¼ã€‚ä½ å¯ä»¥ç›´æŽ¥è®¿é—®æ ‡è®°äº†finalçš„å¤–å±‚å±€éƒ¨å˜é‡ï¼Œæˆ–è€…å®žä¾‹çš„å­—æ®µä»¥åŠé™æ€å˜é‡ã€‚ 6. è®¿é—®å±€éƒ¨å˜é‡å¯ä»¥ç›´æŽ¥åœ¨lambdaè¡¨è¾¾å¼ä¸­è®¿é—®å¤–å±‚çš„å±€éƒ¨å˜é‡ï¼š1234final int num = 1;Converter&lt;Integer, String&gt; stringConverter = (from) -&gt; String.valueOf(from + num);stringConverter.convert(2); // 3 ä½†æ˜¯å’ŒåŒ¿åå¯¹è±¡ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œçš„å˜é‡numå¯ä»¥ä¸ç”¨å£°æ˜Žä¸ºfinalï¼Œè¯¥ä»£ç åŒæ ·æ­£ç¡®ï¼š1234int num = 1;Converter&lt;Integer, String&gt; stringConverter = (from) -&gt; String.valueOf(from + num);stringConverter.convert(2); // 3 ä¸è¿‡è¿™é‡Œçš„numå¿…é¡»ä¸å¯è¢«åŽé¢çš„ä»£ç ä¿®æ”¹ï¼ˆå³éšæ€§çš„å…·æœ‰finalçš„è¯­ä¹‰ï¼‰ï¼Œä¾‹å¦‚ä¸‹é¢çš„å°±æ— æ³•ç¼–è¯‘ï¼š1234int num = 1;Converter&lt;Integer, String&gt; stringConverter = (from) -&gt; String.valueOf(from + num);num = 3; åœ¨lambdaè¡¨è¾¾å¼ä¸­è¯•å›¾ä¿®æ”¹numåŒæ ·æ˜¯ä¸å…è®¸çš„ã€‚ 7. è®¿é—®å¯¹è±¡å­—æ®µä¸Žé™æ€å˜é‡å’Œæœ¬åœ°å˜é‡ä¸åŒçš„æ˜¯ï¼Œlambdaå†…éƒ¨å¯¹äºŽå®žä¾‹çš„å­—æ®µä»¥åŠé™æ€å˜é‡æ˜¯å³å¯è¯»åˆå¯å†™ã€‚è¯¥è¡Œä¸ºå’ŒåŒ¿åå¯¹è±¡æ˜¯ä¸€è‡´çš„ï¼š123456789101112131415class Lambda4 &#123; static int outerStaticNum; int outerNum; void testScopes() &#123; Converter&lt;Integer, String&gt; stringConverter1 = (from) -&gt; &#123; outerNum = 23; return String.valueOf(from); &#125;; Converter&lt;Integer, String&gt; stringConverter2 = (from) -&gt; &#123; outerStaticNum = 72; return String.valueOf(from); &#125;; &#125;&#125; 8. è®¿é—®æŽ¥å£çš„é»˜è®¤æ–¹æ³•è¿˜è®°å¾—ä¹‹å‰çš„formulaä¾‹å­ä¹ˆï¼ŒæŽ¥å£Formulaå®šä¹‰äº†ä¸€ä¸ªé»˜è®¤æ–¹æ³•sqrtå¯ä»¥ç›´æŽ¥è¢«formulaçš„å®žä¾‹åŒ…æ‹¬åŒ¿åå¯¹è±¡è®¿é—®åˆ°ï¼Œä½†æ˜¯åœ¨lambdaè¡¨è¾¾å¼ä¸­è¿™ä¸ªæ˜¯ä¸è¡Œçš„ã€‚Lambdaè¡¨è¾¾å¼ä¸­æ˜¯æ— æ³•è®¿é—®åˆ°é»˜è®¤æ–¹æ³•çš„ï¼Œä»¥ä¸‹ä»£ç å°†æ— æ³•ç¼–è¯‘ï¼š12Formula formula = (a) -&gt; sqrt( a * 100);Built-in Functional Interfaces JDK 1.8 APIåŒ…å«äº†å¾ˆå¤šå†…å»ºçš„å‡½æ•°å¼æŽ¥å£ï¼Œåœ¨è€Javaä¸­å¸¸ç”¨åˆ°çš„æ¯”å¦‚Comparatoræˆ–è€…RunnableæŽ¥å£ï¼Œè¿™äº›æŽ¥å£éƒ½å¢žåŠ äº†@FunctionalInterfaceæ³¨è§£ä»¥ä¾¿èƒ½ç”¨åœ¨lambdaä¸Šã€‚Java 8 APIåŒæ ·è¿˜æä¾›äº†å¾ˆå¤šå…¨æ–°çš„å‡½æ•°å¼æŽ¥å£æ¥è®©å·¥ä½œæ›´åŠ æ–¹ä¾¿ï¼Œæœ‰ä¸€äº›æŽ¥å£æ˜¯æ¥è‡ªGoogle Guavaåº“é‡Œçš„ï¼Œå³ä¾¿ä½ å¯¹è¿™äº›å¾ˆç†Ÿæ‚‰äº†ï¼Œè¿˜æ˜¯æœ‰å¿…è¦çœ‹çœ‹è¿™äº›æ˜¯å¦‚ä½•æ‰©å±•åˆ°lambdaä¸Šä½¿ç”¨çš„ã€‚ Predicate æŽ¥å£åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›žbooleanç±»åž‹ã€‚è¯¥æŽ¥å£åŒ…å«å¤šç§é»˜è®¤æ–¹æ³•æ¥å°†Predicateç»„åˆæˆå…¶ä»–å¤æ‚çš„é€»è¾‘ï¼ˆæ¯”å¦‚ï¼šä¸Žï¼Œæˆ–ï¼Œéžï¼‰ï¼š123456789Predicate&lt;String&gt; predicate = (s) -&gt; s.length() &gt; 0;predicate.test("foo"); // truepredicate.negate().test("foo"); // falsePredicate&lt;Boolean&gt; nonNull = Objects::nonNull;Predicate&lt;Boolean&gt; isNull = Objects::isNull;Predicate&lt;String&gt; isEmpty = String::isEmpty;Predicate&lt;String&gt; isNotEmpty = isEmpty.negate(); Function æŽ¥å£æœ‰ä¸€ä¸ªå‚æ•°å¹¶ä¸”è¿”å›žä¸€ä¸ªç»“æžœï¼Œå¹¶é™„å¸¦äº†ä¸€äº›å¯ä»¥å’Œå…¶ä»–å‡½æ•°ç»„åˆçš„é»˜è®¤æ–¹æ³•ï¼ˆcompose, andThenï¼‰ï¼š123Function&lt;String, Integer&gt; toInteger = Integer::valueOf;Function&lt;String, String&gt; backToString = toInteger.andThen(String::valueOf);backToString.apply("123"); // "123" Supplier æŽ¥å£è¿”å›žä¸€ä¸ªä»»æ„èŒƒåž‹çš„å€¼ï¼Œå’ŒFunctionæŽ¥å£ä¸åŒçš„æ˜¯è¯¥æŽ¥å£æ²¡æœ‰ä»»ä½•å‚æ•°12Supplier&lt;Person&gt; personSupplier = Person::new;personSupplier.get(); // new Person Consumer æŽ¥å£è¡¨ç¤ºæ‰§è¡Œåœ¨å•ä¸ªå‚æ•°ä¸Šçš„æ“ä½œã€‚12Consumer&lt;Person&gt; greeter = (p) -&gt; System.out.println("Hello, " + p.firstName);greeter.accept(new Person("Luke", "Skywalker")); Comparator æ˜¯è€Javaä¸­çš„ç»å…¸æŽ¥å£ï¼Œ Java 8åœ¨æ­¤ä¹‹ä¸Šæ·»åŠ äº†å¤šç§é»˜è®¤æ–¹æ³•123456Comparator&lt;Person&gt; comparator = (p1, p2) -&gt; p1.firstName.compareTo(p2.firstName);Person p1 = new Person("John", "Doe");Person p2 = new Person("Alice", "Wonderland");comparator.compare(p1, p2); // &gt; 0comparator.reversed().compare(p1, p2); // &lt; 0 Optional ä¸æ˜¯å‡½æ•°æ˜¯æŽ¥å£ï¼Œè¿™æ˜¯ä¸ªç”¨æ¥é˜²æ­¢NullPointerExceptionå¼‚å¸¸çš„è¾…åŠ©ç±»åž‹ï¼Œè¿™æ˜¯ä¸‹ä¸€å±Šä¸­å°†è¦ç”¨åˆ°çš„é‡è¦æ¦‚å¿µï¼ŒçŽ°åœ¨å…ˆç®€å•çš„çœ‹çœ‹è¿™ä¸ªæŽ¥å£èƒ½å¹²ä»€ä¹ˆï¼š Optional è¢«å®šä¹‰ä¸ºä¸€ä¸ªç®€å•çš„å®¹å™¨ï¼Œå…¶å€¼å¯èƒ½æ˜¯nullæˆ–è€…ä¸æ˜¯nullã€‚åœ¨Java 8ä¹‹å‰ä¸€èˆ¬æŸä¸ªå‡½æ•°åº”è¯¥è¿”å›žéžç©ºå¯¹è±¡ä½†æ˜¯å¶å°”å´å¯èƒ½è¿”å›žäº†nullï¼Œè€Œåœ¨Java 8ä¸­ï¼Œä¸æŽ¨èä½ è¿”å›žnullè€Œæ˜¯è¿”å›žOptionalã€‚123456Optional&lt;String&gt; optional = Optional.of("bam");optional.isPresent(); // trueoptional.get(); // "bam"optional.orElse("fallback"); // "bam"optional.ifPresent((s) -&gt; System.out.println(s.charAt(0))); // "b" Stream æŽ¥å£ java.util.Stream è¡¨ç¤ºèƒ½åº”ç”¨åœ¨ä¸€ç»„å…ƒç´ ä¸Šä¸€æ¬¡æ‰§è¡Œçš„æ“ä½œåºåˆ—ã€‚Stream æ“ä½œåˆ†ä¸ºä¸­é—´æ“ä½œæˆ–è€…æœ€ç»ˆæ“ä½œä¸¤ç§ï¼Œæœ€ç»ˆæ“ä½œè¿”å›žä¸€ç‰¹å®šç±»åž‹çš„è®¡ç®—ç»“æžœï¼Œè€Œä¸­é—´æ“ä½œè¿”å›žStreamæœ¬èº«ï¼Œè¿™æ ·ä½ å°±å¯ä»¥å°†å¤šä¸ªæ“ä½œä¾æ¬¡ä¸²èµ·æ¥ã€‚Stream çš„åˆ›å»ºéœ€è¦æŒ‡å®šä¸€ä¸ªæ•°æ®æºï¼Œæ¯”å¦‚ java.util.Collectionçš„å­ç±»ï¼ŒListæˆ–è€…Setï¼Œ Mapä¸æ”¯æŒã€‚Streamçš„æ“ä½œå¯ä»¥ä¸²è¡Œæ‰§è¡Œæˆ–è€…å¹¶è¡Œæ‰§è¡Œã€‚ é¦–å…ˆçœ‹çœ‹Streamæ˜¯æ€Žä¹ˆç”¨ï¼Œé¦–å…ˆåˆ›å»ºå®žä¾‹ä»£ç çš„ç”¨åˆ°çš„æ•°æ®Listï¼š123456789List&lt;String&gt; stringCollection = new ArrayList&lt;&gt;();stringCollection.add("ddd2");stringCollection.add("aaa2");stringCollection.add("bbb1");stringCollection.add("aaa1");stringCollection.add("bbb3");stringCollection.add("ccc");stringCollection.add("bbb2");stringCollection.add("ddd1"); Java 8æ‰©å±•äº†é›†åˆç±»ï¼Œå¯ä»¥é€šè¿‡ Collection.stream() æˆ–è€… Collection.parallelStream() æ¥åˆ›å»ºä¸€ä¸ªStreamã€‚ Filter è¿‡æ»¤è¿‡æ»¤é€šè¿‡ä¸€ä¸ªpredicateæŽ¥å£æ¥è¿‡æ»¤å¹¶åªä¿ç•™ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œè¯¥æ“ä½œå±žäºŽä¸­é—´æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è¿‡æ»¤åŽçš„ç»“æžœæ¥åº”ç”¨å…¶ä»–Streamæ“ä½œ ï¼ˆæ¯”å¦‚forEachï¼‰ã€‚forEachéœ€è¦ä¸€ä¸ªå‡½æ•°æ¥å¯¹è¿‡æ»¤åŽçš„å…ƒç´ ä¾æ¬¡æ‰§è¡Œã€‚forEachæ˜¯ä¸€ä¸ªæœ€ç»ˆæ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½åœ¨forEachä¹‹åŽæ¥æ‰§è¡Œ å…¶ä»–Streamæ“ä½œã€‚12345stringCollection .stream() .filter((s) -&gt; s.startsWith("a")) .forEach(System.out::println);// "aaa2", "aaa1" Sort æŽ’åºæŽ’åºæ˜¯ä¸€ä¸ªä¸­é—´æ“ä½œï¼Œè¿”å›žçš„æ˜¯æŽ’åºå¥½åŽçš„Streamã€‚å¦‚æžœä½ ä¸æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰çš„Comparatoråˆ™ä¼šä½¿ç”¨é»˜è®¤æŽ’åºã€‚123456stringCollection .stream() .sorted() .filter((s) -&gt; s.startsWith("a")) .forEach(System.out::println);// "aaa1", "aaa2" éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒæŽ’åºåªåˆ›å»ºäº†ä¸€ä¸ªæŽ’åˆ—å¥½åŽçš„Streamï¼Œè€Œä¸ä¼šå½±å“åŽŸæœ‰çš„æ•°æ®æºï¼ŒæŽ’åºä¹‹åŽåŽŸæ•°æ®stringCollectionæ˜¯ä¸ä¼šè¢«ä¿®æ”¹çš„12System.out.println(stringCollection);// ddd2, aaa2, bbb1, aaa1, bbb3, ccc, bbb2, ddd1 Map æ˜ å°„ä¸­é—´æ“ä½œmapä¼šå°†å…ƒç´ æ ¹æ®æŒ‡å®šçš„FunctionæŽ¥å£æ¥ä¾æ¬¡å°†å…ƒç´ è½¬æˆå¦å¤–çš„å¯¹è±¡ï¼Œä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™å­—ç¬¦ä¸²ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡mapæ¥è®²å¯¹è±¡è½¬æ¢æˆå…¶ä»–ç±»åž‹ï¼Œmapè¿”å›žçš„Streamç±»åž‹æ˜¯æ ¹æ®ä½ mapä¼ é€’è¿›åŽ»çš„å‡½æ•°çš„è¿”å›žå€¼å†³å®šçš„ã€‚123456stringCollection .stream() .map(String::toUpperCase) .sorted((a, b) -&gt; b.compareTo(a)) .forEach(System.out::println);// "DDD2", "DDD1", "CCC", "BBB3", "BBB2", "AAA2", "AAA1" Match åŒ¹é… Streamæä¾›äº†å¤šç§åŒ¹é…æ“ä½œï¼Œå…è®¸æ£€æµ‹æŒ‡å®šçš„Predicateæ˜¯å¦åŒ¹é…æ•´ä¸ªStreamã€‚æ‰€æœ‰çš„åŒ¹é…æ“ä½œéƒ½æ˜¯æœ€ç»ˆæ“ä½œï¼Œå¹¶è¿”å›žä¸€ä¸ªbooleanç±»åž‹çš„å€¼ã€‚12345678910111213141516171819boolean anyStartsWithA = stringCollection .stream() .anyMatch((s) -&gt; s.startsWith("a"));System.out.println(anyStartsWithA); // trueboolean allStartsWithA = stringCollection .stream() .allMatch((s) -&gt; s.startsWith("a"));System.out.println(allStartsWithA); // falseboolean noneStartsWithZ = stringCollection .stream() .noneMatch((s) -&gt; s.startsWith("z"));System.out.println(noneStartsWithZ); // true Count è®¡æ•°è®¡æ•°æ˜¯ä¸€ä¸ªæœ€ç»ˆæ“ä½œï¼Œè¿”å›žStreamä¸­å…ƒç´ çš„ä¸ªæ•°ï¼Œè¿”å›žå€¼ç±»åž‹æ˜¯longã€‚123456long startsWithB = stringCollection .stream() .filter((s) -&gt; s.startsWith("b")) .count();System.out.println(startsWithB); // 3 Reduce è§„çº¦è¿™æ˜¯ä¸€ä¸ªæœ€ç»ˆæ“ä½œï¼Œå…è®¸é€šè¿‡æŒ‡å®šçš„å‡½æ•°æ¥è®²streamä¸­çš„å¤šä¸ªå…ƒç´ è§„çº¦ä¸ºä¸€ä¸ªå…ƒç´ ï¼Œè§„è¶ŠåŽçš„ç»“æžœæ˜¯é€šè¿‡OptionalæŽ¥å£è¡¨ç¤ºçš„ï¼š1234567Optional&lt;String&gt; reduced = stringCollection .stream() .sorted() .reduce((s1, s2) -&gt; s1 + "#" + s2);reduced.ifPresent(System.out::println);// "aaa1#aaa2#bbb1#bbb2#bbb3#ccc#ddd1#ddd2" å¹¶è¡ŒStreams å‰é¢æåˆ°è¿‡Streamæœ‰ä¸²è¡Œå’Œå¹¶è¡Œä¸¤ç§ï¼Œä¸²è¡ŒStreamä¸Šçš„æ“ä½œæ˜¯åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ä¾æ¬¡å®Œæˆï¼Œè€Œå¹¶è¡ŒStreamåˆ™æ˜¯åœ¨å¤šä¸ªçº¿ç¨‹ä¸ŠåŒæ—¶æ‰§è¡Œã€‚ ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†æ˜¯å¦‚ä½•é€šè¿‡å¹¶è¡ŒStreamæ¥æå‡æ€§èƒ½ï¼š é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ²¡æœ‰é‡å¤å…ƒç´ çš„å¤§è¡¨ï¼š123456int max = 1000000;List&lt;String&gt; values = new ArrayList&lt;&gt;(max);for (int i = 0; i &lt; max; i++) &#123; UUID uuid = UUID.randomUUID(); values.add(uuid.toString());&#125; ç„¶åŽæˆ‘ä»¬è®¡ç®—ä¸€ä¸‹æŽ’åºè¿™ä¸ªStreamè¦è€—æ—¶å¤šä¹…ï¼Œä¸²è¡ŒæŽ’åºï¼š123456789long t0 = System.nanoTime();long count = values.stream().sorted().count();System.out.println(count);long t1 = System.nanoTime();long millis = TimeUnit.NANOSECONDS.toMillis(t1 - t0);System.out.println(String.format("sequential sort took: %d ms", millis));// ä¸²è¡Œè€—æ—¶: 899 ms å¹¶è¡ŒæŽ’åºï¼š12345678910long t0 = System.nanoTime();long count = values.parallelStream().sorted().count();System.out.println(count);long t1 = System.nanoTime();long millis = TimeUnit.NANOSECONDS.toMillis(t1 - t0);System.out.println(String.format("parallel sort took: %d ms", millis));// å¹¶è¡ŒæŽ’åºè€—æ—¶: 472 ms ä¸Šé¢ä¸¤ä¸ªä»£ç å‡ ä¹Žæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å¹¶è¡Œç‰ˆçš„å¿«äº†50%ä¹‹å¤šï¼Œå”¯ä¸€éœ€è¦åšçš„æ”¹åŠ¨å°±æ˜¯å°†stream()æ”¹ä¸ºparallelStream()ã€‚ MapMapç±»åž‹ä¸æ”¯æŒstreamï¼Œä¸è¿‡Mapæä¾›äº†ä¸€äº›æ–°çš„æœ‰ç”¨çš„æ–¹æ³•æ¥å¤„ç†ä¸€äº›æ—¥å¸¸ä»»åŠ¡ã€‚12345Map&lt;Integer, String&gt; map = new HashMap&lt;&gt;();for (int i = 0; i &lt; 10; i++) &#123; map.putIfAbsent(i, "val" + i);&#125;map.forEach((id, val) -&gt; System.out.println(val)); ä»¥ä¸Šä»£ç å¾ˆå®¹æ˜“ç†è§£ï¼Œ putIfAbsent ä¸éœ€è¦æˆ‘ä»¬åšé¢å¤–çš„å­˜åœ¨æ€§æ£€æŸ¥ï¼Œè€ŒforEachåˆ™æŽ¥æ”¶ä¸€ä¸ªConsumeræŽ¥å£æ¥å¯¹mapé‡Œçš„æ¯ä¸€ä¸ªé”®å€¼å¯¹è¿›è¡Œæ“ä½œã€‚ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†mapä¸Šçš„å…¶ä»–æœ‰ç”¨çš„å‡½æ•°ï¼š12345678910map.computeIfPresent(3, (num, val) -&gt; val + num);map.get(3); // val33map.computeIfPresent(9, (num, val) -&gt; null);map.containsKey(9); // falsemap.computeIfAbsent(23, num -&gt; "val" + num);map.containsKey(23); // truemap.computeIfAbsent(3, num -&gt; "bam");map.get(3); // val33 æŽ¥ä¸‹æ¥å±•ç¤ºå¦‚ä½•åœ¨Mapé‡Œåˆ é™¤ä¸€ä¸ªé”®å€¼å…¨éƒ½åŒ¹é…çš„é¡¹ï¼š1234map.remove(3, "val3");map.get(3); // val33map.remove(3, "val33");map.get(3); // null å¦å¤–ä¸€ä¸ªæœ‰ç”¨çš„æ–¹æ³•ï¼š1map.getOrDefault(42, "not found"); // not found å¯¹Mapçš„å…ƒç´ åšåˆå¹¶ä¹Ÿå˜å¾—å¾ˆå®¹æ˜“äº†ï¼š1234map.merge(9, "val9", (value, newValue) -&gt; value.concat(newValue));map.get(9); // val9map.merge(9, "concat", (value, newValue) -&gt; value.concat(newValue));map.get(9); // val9concat Mergeåšçš„äº‹æƒ…æ˜¯å¦‚æžœé”®åä¸å­˜åœ¨åˆ™æ’å…¥ï¼Œå¦åˆ™åˆ™å¯¹åŽŸé”®å¯¹åº”çš„å€¼åšåˆå¹¶æ“ä½œå¹¶é‡æ–°æ’å…¥åˆ°mapä¸­ã€‚ 9. Date APIJava 8 åœ¨åŒ…java.timeä¸‹åŒ…å«äº†ä¸€ç»„å…¨æ–°çš„æ—¶é—´æ—¥æœŸAPIã€‚æ–°çš„æ—¥æœŸAPIå’Œå¼€æºçš„Joda-Timeåº“å·®ä¸å¤šï¼Œä½†åˆä¸å®Œå…¨ä¸€æ ·ï¼Œä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†è¿™ç»„æ–°APIé‡Œæœ€é‡è¦çš„ä¸€äº›éƒ¨åˆ†ï¼šClock æ—¶é’Ÿ Clockç±»æä¾›äº†è®¿é—®å½“å‰æ—¥æœŸå’Œæ—¶é—´çš„æ–¹æ³•ï¼ŒClockæ˜¯æ—¶åŒºæ•æ„Ÿçš„ï¼Œå¯ä»¥ç”¨æ¥å–ä»£ System.currentTimeMillis() æ¥èŽ·å–å½“å‰çš„å¾®ç§’æ•°ã€‚æŸä¸€ä¸ªç‰¹å®šçš„æ—¶é—´ç‚¹ä¹Ÿå¯ä»¥ä½¿ç”¨Instantç±»æ¥è¡¨ç¤ºï¼ŒInstantç±»ä¹Ÿå¯ä»¥ç”¨æ¥åˆ›å»ºè€çš„java.util.Dateå¯¹è±¡ã€‚1234Clock clock = Clock.systemDefaultZone();long millis = clock.millis();Instant instant = clock.instant();Date legacyDate = Date.from(instant); // legacy java.util.Date Timezones æ—¶åŒºåœ¨æ–°APIä¸­æ—¶åŒºä½¿ç”¨ZoneIdæ¥è¡¨ç¤ºã€‚æ—¶åŒºå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨é™æ€æ–¹æ³•ofæ¥èŽ·å–åˆ°ã€‚ æ—¶åŒºå®šä¹‰äº†åˆ°UTSæ—¶é—´çš„æ—¶é—´å·®ï¼Œåœ¨Instantæ—¶é—´ç‚¹å¯¹è±¡åˆ°æœ¬åœ°æ—¥æœŸå¯¹è±¡ä¹‹é—´è½¬æ¢çš„æ—¶å€™æ˜¯æžå…¶é‡è¦çš„ã€‚12345678System.out.println(ZoneId.getAvailableZoneIds());// prints all available timezone idsZoneId zone1 = ZoneId.of("Europe/Berlin");ZoneId zone2 = ZoneId.of("Brazil/East");System.out.println(zone1.getRules());System.out.println(zone2.getRules());// ZoneRules[currentStandardOffset=+01:00]// ZoneRules[currentStandardOffset=-03:00] LocalTime æœ¬åœ°æ—¶é—´LocalTime å®šä¹‰äº†ä¸€ä¸ªæ²¡æœ‰æ—¶åŒºä¿¡æ¯çš„æ—¶é—´ï¼Œä¾‹å¦‚ æ™šä¸Š10ç‚¹ï¼Œæˆ–è€… 17:30:15ã€‚ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨å‰é¢ä»£ç åˆ›å»ºçš„æ—¶åŒºåˆ›å»ºäº†ä¸¤ä¸ªæœ¬åœ°æ—¶é—´ã€‚ä¹‹åŽæ¯”è¾ƒæ—¶é—´å¹¶ä»¥å°æ—¶å’Œåˆ†é’Ÿä¸ºå•ä½è®¡ç®—ä¸¤ä¸ªæ—¶é—´çš„æ—¶é—´å·®ï¼š123456789LocalTime now1 = LocalTime.now(zone1);LocalTime now2 = LocalTime.now(zone2);System.out.println(now1.isBefore(now2)); // falselong hoursBetween = ChronoUnit.HOURS.between(now1, now2);long minutesBetween = ChronoUnit.MINUTES.between(now1, now2);System.out.println(hoursBetween); // -3System.out.println(minutesBetween); // -239 LocalTime æä¾›äº†å¤šç§å·¥åŽ‚æ–¹æ³•æ¥ç®€åŒ–å¯¹è±¡çš„åˆ›å»ºï¼ŒåŒ…æ‹¬è§£æžæ—¶é—´å­—ç¬¦ä¸²ã€‚123456789LocalTime late = LocalTime.of(23, 59, 59);System.out.println(late); // 23:59:59DateTimeFormatter germanFormatter = DateTimeFormatter .ofLocalizedTime(FormatStyle.SHORT) .withLocale(Locale.GERMAN);LocalTime leetTime = LocalTime.parse("13:37", germanFormatter);System.out.println(leetTime); // 13:37 LocalDate æœ¬åœ°æ—¥æœŸLocalDate è¡¨ç¤ºäº†ä¸€ä¸ªç¡®åˆ‡çš„æ—¥æœŸï¼Œæ¯”å¦‚ 2014-03-11ã€‚è¯¥å¯¹è±¡å€¼æ˜¯ä¸å¯å˜çš„ï¼Œç”¨èµ·æ¥å’ŒLocalTimeåŸºæœ¬ä¸€è‡´ã€‚ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†å¦‚ä½•ç»™Dateå¯¹è±¡åŠ å‡å¤©/æœˆ/å¹´ã€‚å¦å¤–è¦æ³¨æ„çš„æ˜¯è¿™äº›å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œæ“ä½œè¿”å›žçš„æ€»æ˜¯ä¸€ä¸ªæ–°å®žä¾‹ã€‚12345678LocalDate today = LocalDate.now();LocalDate tomorrow = today.plus(1, ChronoUnit.DAYS);LocalDate yesterday = tomorrow.minusDays(2);LocalDate independenceDay = LocalDate.of(2014, Month.JULY, 4);DayOfWeek dayOfWeek = independenceDay.getDayOfWeek();System.out.println(dayOfWeek); // FRIDAY ä»Žå­—ç¬¦ä¸²è§£æžä¸€ä¸ªLocalDateç±»åž‹å’Œè§£æžLocalTimeä¸€æ ·ç®€å•ï¼š123456DateTimeFormatter germanFormatter = DateTimeFormatter .ofLocalizedDate(FormatStyle.MEDIUM) .withLocale(Locale.GERMAN);LocalDate xmas = LocalDate.parse("24.12.2014", germanFormatter);System.out.println(xmas); // 2014-12-24 LocalDateTime æœ¬åœ°æ—¥æœŸæ—¶é—´LocalDateTime åŒæ—¶è¡¨ç¤ºäº†æ—¶é—´å’Œæ—¥æœŸï¼Œç›¸å½“äºŽå‰ä¸¤èŠ‚å†…å®¹åˆå¹¶åˆ°ä¸€ä¸ªå¯¹è±¡ä¸Šäº†ã€‚LocalDateTimeå’ŒLocalTimeè¿˜æœ‰LocalDateä¸€æ ·ï¼Œéƒ½æ˜¯ä¸å¯å˜çš„ã€‚LocalDateTimeæä¾›äº†ä¸€äº›èƒ½è®¿é—®å…·ä½“å­—æ®µçš„æ–¹æ³•ã€‚123456789LocalDateTime sylvester = LocalDateTime.of(2014, Month.DECEMBER, 31, 23, 59, 59);DayOfWeek dayOfWeek = sylvester.getDayOfWeek();System.out.println(dayOfWeek); // WEDNESDAYMonth month = sylvester.getMonth();System.out.println(month); // DECEMBERlong minuteOfDay = sylvester.getLong(ChronoField.MINUTE_OF_DAY);System.out.println(minuteOfDay); // 1439 åªè¦é™„åŠ ä¸Šæ—¶åŒºä¿¡æ¯ï¼Œå°±å¯ä»¥å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªæ—¶é—´ç‚¹Instantå¯¹è±¡ï¼ŒInstantæ—¶é—´ç‚¹å¯¹è±¡å¯ä»¥å¾ˆå®¹æ˜“çš„è½¬æ¢ä¸ºè€å¼çš„java.util.Dateã€‚12345Instant instant = sylvester .atZone(ZoneId.systemDefault()) .toInstant();Date legacyDate = Date.from(instant);System.out.println(legacyDate); // Wed Dec 31 23:59:59 CET 2014 æ ¼å¼åŒ–LocalDateTimeå’Œæ ¼å¼åŒ–æ—¶é—´å’Œæ—¥æœŸä¸€æ ·çš„ï¼Œé™¤äº†ä½¿ç”¨é¢„å®šä¹‰å¥½çš„æ ¼å¼å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰æ ¼å¼ï¼š123456DateTimeFormatter formatter = DateTimeFormatter .ofPattern("MMM dd, yyyy - HH:mm");LocalDateTime parsed = LocalDateTime.parse("Nov 03, 2014 - 07:13", formatter);String string = formatter.format(parsed);System.out.println(string); // Nov 03, 2014 - 07:13 å’Œjava.text.NumberFormatä¸ä¸€æ ·çš„æ˜¯æ–°ç‰ˆçš„DateTimeFormatteræ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å…³äºŽæ—¶é—´æ—¥æœŸæ ¼å¼çš„è¯¦ç»†ä¿¡æ¯ï¼šhttp://download.java.net/jdk8/docs/api/java/time/format/DateTimeFormatter.html 10. Annotation æ³¨è§£åœ¨Java 8ä¸­æ”¯æŒå¤šé‡æ³¨è§£äº†ï¼Œå…ˆçœ‹ä¸ªä¾‹å­æ¥ç†è§£ä¸€ä¸‹æ˜¯ä»€ä¹ˆæ„æ€ã€‚é¦–å…ˆå®šä¹‰ä¸€ä¸ªåŒ…è£…ç±»Hintsæ³¨è§£ç”¨æ¥æ”¾ç½®ä¸€ç»„å…·ä½“çš„Hintæ³¨è§£ï¼š1234567@interface Hints &#123; Hint[] value();&#125;@Repeatable(Hints.class)@interface Hint &#123; String value();&#125; Java 8å…è®¸æˆ‘ä»¬æŠŠåŒä¸€ä¸ªç±»åž‹çš„æ³¨è§£ä½¿ç”¨å¤šæ¬¡ï¼Œåªéœ€è¦ç»™è¯¥æ³¨è§£æ ‡æ³¨ä¸€ä¸‹@Repeatableå³å¯ã€‚ ä¾‹ 1: ä½¿ç”¨åŒ…è£…ç±»å½“å®¹å™¨æ¥å­˜å¤šä¸ªæ³¨è§£ï¼ˆè€æ–¹æ³•ï¼‰12@Hints(&#123;@Hint("hint1"), @Hint("hint2")&#125;)class Person &#123;&#125; ä¾‹ 2ï¼šä½¿ç”¨å¤šé‡æ³¨è§£ï¼ˆæ–°æ–¹æ³•ï¼‰123@Hint("hint1")@Hint("hint2")class Person &#123;&#125; ç¬¬äºŒä¸ªä¾‹å­é‡Œjavaç¼–è¯‘å™¨ä¼šéšæ€§çš„å¸®ä½ å®šä¹‰å¥½@Hintsæ³¨è§£ï¼Œäº†è§£è¿™ä¸€ç‚¹æœ‰åŠ©äºŽä½ ç”¨åå°„æ¥èŽ·å–è¿™äº›ä¿¡æ¯ï¼š123456Hint hint = Person.class.getAnnotation(Hint.class);System.out.println(hint); // nullHints hints1 = Person.class.getAnnotation(Hints.class);System.out.println(hints1.value().length); // 2Hint[] hints2 = Person.class.getAnnotationsByType(Hint.class);System.out.println(hints2.length); // 2 å³ä¾¿æˆ‘ä»¬æ²¡æœ‰åœ¨Personç±»ä¸Šå®šä¹‰@Hintsæ³¨è§£ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥é€šè¿‡ getAnnotation(Hints.class) æ¥èŽ·å– @Hintsæ³¨è§£ï¼Œæ›´åŠ æ–¹ä¾¿çš„æ–¹æ³•æ˜¯ä½¿ç”¨ getAnnotationsByType å¯ä»¥ç›´æŽ¥èŽ·å–åˆ°æ‰€æœ‰çš„@Hintæ³¨è§£ã€‚å¦å¤–Java 8çš„æ³¨è§£è¿˜å¢žåŠ åˆ°ä¸¤ç§æ–°çš„targetä¸Šäº†ï¼š12@Target(&#123;ElementType.TYPE_PARAMETER, ElementType.TYPE_USE&#125;)@interface MyAnnotation &#123;&#125; å…³äºŽJava 8çš„æ–°ç‰¹æ€§å°±å†™åˆ°è¿™äº†ï¼Œè‚¯å®šè¿˜æœ‰æ›´å¤šçš„ç‰¹æ€§ç­‰å¾…å‘æŽ˜ã€‚JDK 1.8é‡Œè¿˜æœ‰å¾ˆå¤šå¾ˆæœ‰ç”¨çš„ä¸œè¥¿ï¼Œæ¯”å¦‚Arrays.parallelSort, StampedLockå’ŒCompletableFutureç­‰ç­‰ã€‚ å‚è€ƒï¼š ç‚¹æˆ‘]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JDK</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Web3.js è°ƒç”¨å·²éƒ¨ç½²æ™ºèƒ½åˆçº¦çš„ function]]></title>
    <url>%2F2018%2F03%2Fethereum-web3js%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹ä¸ŽçŽ¯å¢ƒç®€ä»‹ web3.js æ˜¯ä»¥å¤ªåŠæä¾›çš„ä¸€ä¸ª JavaScript åº“ï¼Œå®ƒå°è£…äº†ä»¥å¤ªåŠçš„ JSON RPC APIã€IPC è°ƒç”¨ï¼Œæä¾›äº†ä¸€ç³»åˆ—ä¸Žä»¥å¤ªåŠåŒºå—é“¾äº¤äº’çš„å¯¹è±¡å’Œå‡½æ•°ã€‚å‡ ä¹Žå›Šæ‹¬ JSON RPC çš„ APIï¼Œè¿˜å¯ä»¥ç¼–è¯‘å’Œéƒ¨ç½²æ™ºèƒ½åˆçº¦ä»¥åŠè°ƒç”¨æ™ºèƒ½åˆçº¦ç­‰ï¼Œå…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯ä¸Žæ™ºèƒ½åˆçº¦äº¤äº’çš„ JS å¯¹è±¡åŠå‡½æ•°ã€‚ å¼€å‘çŽ¯å¢ƒ macOS æ“ä½œç³»ç»Ÿ Node.js 8.9.4 npm 5.6.0 è°ƒç”¨æ™ºèƒ½åˆçº¦é¦–å…ˆéœ€è¦ä½¿ç”¨ Solidity ç¼–å†™æ™ºèƒ½åˆçº¦ï¼Œæœ€ç®€å•çš„åˆçº¦å¦‚ä¸‹ï¼Œä¸ä¸ŽåŒºå—å‘ç”Ÿè”ç³»ï¼š 1234567891011pragma solidity ^0.4.2; contract hello &#123; function hello() public &#123; &#125; function say() constant public returns (string) &#123; return &quot;Hello World!&quot;; &#125; &#125; æ³¨ï¼šSolidity åœ¨çº¿ç¼–è¯‘çŽ¯å¢ƒ åœ°å€ ç¼–è¯‘åŽä¼šäº§ç”Ÿå¾ˆå¤šä¸åŒçš„ä¸œè¥¿ï¼Œéƒ¨åˆ†å¦‚ä¸‹ï¼š WEB3DEPLOYï¼š 123456789101112var helloContract = web3.eth.contract([&#123;"constant":true,"inputs":[],"name":"say","outputs":[&#123;"name":"","type":"string"&#125;],"payable":false,"type":"function","stateMutability":"view"&#125;,&#123;"inputs":[],"payable":false,"type":"constructor","stateMutability":"nonpayable"&#125;]);var hello = helloContract.new( &#123; from: web3.eth.accounts[0], data: '0x6060604052341561000c57fe5b5b5b5b6101598061001e6000396000f30060606040526000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063954ab4b21461003b575bfe5b341561004357fe5b61004b6100d4565b604051808060200182810382528381815181526020019150805190602001908083836000831461009a575b80518252602083111561009a57602082019150602081019050602083039250610076565b505050905090810190601f1680156100c65780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6100dc610119565b604060405190810160405280600c81526020017f48656c6c6f20576f726c6421000000000000000000000000000000000000000081525090505b90565b6020604051908101604052806000815250905600a165627a7a72305820b88ade0e1b40d9f8ffeba3f2bc9aa2ee4a1ae17f03fc52fc568812eb5d96f5ad0029', gas: '4700000' &#125;, function (e, contract)&#123; console.log(e, contract); if (typeof contract.address !== 'undefined') &#123; console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash); &#125; &#125;) ABIï¼ˆåŽé¢ä¼šç”¨åˆ°ï¼‰ï¼š 12345678910111213141516171819202122[ &#123; &quot;constant&quot;: true, &quot;inputs&quot;: [], &quot;name&quot;: &quot;say&quot;, &quot;outputs&quot;: [ &#123; &quot;name&quot;: &quot;&quot;, &quot;type&quot;: &quot;string&quot; &#125; ], &quot;payable&quot;: false, &quot;type&quot;: &quot;function&quot;, &quot;stateMutability&quot;: &quot;view&quot; &#125;, &#123; &quot;inputs&quot;: [], &quot;payable&quot;: false, &quot;type&quot;: &quot;constructor&quot;, &quot;stateMutability&quot;: &quot;nonpayable&quot; &#125;] åˆ›å»ºä¸€ä¸ª test.jsï¼Œå†…å®¹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940// å¼•å…¥ä¾èµ–æ¨¡å—var express = require("express")var Web3 = require("web3")var net = require("net")var http = require("http")var web3;// åˆ›å»ºweb3å¯¹è±¡å¹¶è¿žæŽ¥åˆ°ä»¥å¤ªåŠèŠ‚ç‚¹if (typeof web3 !== 'undefined') &#123; web3 = new Web3(web3.currentProvider);&#125; else &#123; // set the provider you want from Web3.providers web3 = new Web3(new Web3.providers.HttpProvider("http://192.168.53.60:8545"));&#125;// åˆçº¦ABIvar abi = [&#123;"constant":true,"inputs":[],"name":"say","outputs":[&#123;"name":"","type":"string"&#125;],"payable":false,"stateMutability":"view","type":"function"&#125;,&#123;"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"&#125;];// åˆçº¦åœ°å€var address = "0xf77976c9a552f2934d3694c38fbd057ae803ef45";// é€šè¿‡ABIå’Œåœ°å€èŽ·å–å·²éƒ¨ç½²çš„åˆçº¦å¯¹è±¡var helloContract = new web3.eth.Contract(abi,address);http.createServer(function (request, response) &#123; // è°ƒç”¨æ™ºèƒ½åˆçº¦æ–¹æ³• var helloResult = helloContract.methods.say().call().then(function(result)&#123; console.log("è¿”å›žå€¼:" + result); // å‘é€ HTTP å¤´éƒ¨ // HTTP çŠ¶æ€å€¼: 200 : OK // å†…å®¹ç±»åž‹: text/plain response.writeHead(200, &#123;'Content-Type': 'text/plain'&#125;); // å‘é€å“åº”æ•°æ® response.end(result);&#125;); &#125;).listen(8888);// ç»ˆç«¯æ‰“å°å¦‚ä¸‹ä¿¡æ¯console.log('Server running at http://127.0.0.1:8888/'); å¯åŠ¨ä¹‹å‰åº”è¯¥å…ˆåŠ è½½ test.js æ‰€ä¾èµ–çš„æ¨¡å—ï¼š 123$ npm install express $ npm install web3 $ npm install http è¿è¡Œ 1$ node test.js ç»ˆç«¯æ‰“å°å‡ºâ€Server running at http://127.0.0.1:8888&quot;æ—¶å³å¯è®¿é—®&quot;http://127.0.0.1:8888&quot;ï¼Œç½‘é¡µä¼šè¿”å›ž&quot;Hello Worldâ€ï¼]]></content>
      <categories>
        <category>åŒºå—é“¾</category>
      </categories>
      <tags>
        <tag>ä»¥å¤ªåŠ</tag>
        <tag>Web3.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CentOS å®‰è£… Jenkins]]></title>
    <url>%2F2018%2F02%2Fcentos-jenkins-install%2F</url>
    <content type="text"><![CDATA[ä¸‹è½½ä¸‹è½½ Jenkins çš„ war åŒ…ï¼Œåœ°å€ æ–°çš„ Jenkins çš„ war åŒ…éœ€è¦ JDK1.8 çš„æ”¯æŒï¼Œå¦‚æžœæƒ³åœ¨ JDK1.7 çš„çŽ¯å¢ƒä¸‹ä½¿ç”¨ï¼Œå¯ä»¥ä¸‹è½½ Jenkins2.19.3 çš„åŒ… ç‚¹å‡»å¦‚ä¸Šé“¾æŽ¥å¯ä»¥è¿›å…¥é€‰æ‹©æ—§ç‰ˆæœ¬çš„ war åŒ…è¿›è¡Œä¸‹è½½ã€‚ å¯åŠ¨å¯å°† Jenkins ç›´æŽ¥æ”¾åˆ° Tomcat å®¹å™¨ä¸­ï¼Œå¯åŠ¨ Tomcat å®¹å™¨å³å¯è‡ªåŠ¨éƒ¨ç½²ï¼Œå¯åŠ¨æ—¶ä¼šç”Ÿæˆä¸€ä¸ªé»˜è®¤å¯†ç å¦‚ä¸‹ï¼š æ­¤æ—¶å¯ä»¥ç›´æŽ¥è®¿é—®äº†ï¼Œç¬¬ä¸€æ¬¡è®¿é—® Jenkins ä¼šè‡ªåŠ¨ä¸‹è½½ä¸€äº›ä¸œè¥¿ï¼Œç­‰å¾…ç‰‡åˆ»å³å¯ï¼š æ­¤æ—¶å¯ä»¥è®¿é—® Jenkins é¡µé¢ï¼Œè¾“å…¥å¯åŠ¨æ—¶æŽ§åˆ¶å°æ‰“å°çš„éšæœºå¯†ç å³å¯ï¼š å¼€å§‹ä½¿ç”¨è¾“å…¥å®Œå¯†ç åŽå‡ºçŽ°å¦‚ä¸‹é¡µé¢ï¼š å¯æ ¹æ®ä¸ªäººä½¿ç”¨ä¹ æƒ¯é€‰æ‹©å®‰è£…å»ºè®®çš„æ’ä»¶æˆ–è€…è‡ªå®šä¹‰å®‰è£…æ’ä»¶ï¼ŒåŽç»­ä»å¯åœ¨æ’ä»¶ç®¡ç†ä¸­ç®¡ç†æ’ä»¶ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©ç¬¬ä¸€ä¸ªã€‚è‡ªåŠ¨å®‰è£…ä¸€äº›æ’ä»¶ï¼Œå®‰è£…å®ŒæˆåŽé¡µé¢ï¼š è¿›å…¥åŽï¼Œé€‰æ‹©æ€§çš„å®‰è£…æ’ä»¶å³å¯ä½¿ç”¨ï¼]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>Jenkins</tag>
        <tag>CentOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[int ç±»åž‹è¿‡å¤§å˜æˆè´Ÿæ•°]]></title>
    <url>%2F2017%2F09%2Frecord-int%2F</url>
    <content type="text"><![CDATA[è®¡ç®—æœºå­˜å‚¨ç³»ç»Ÿä½¿ç”¨è¡¥ç æ ‡è¯†ï¼Œint ç±»åž‹å  32 ä½ï¼Œé¦–ä½æ˜¯ç¬¦å·ä½ï¼š0 è¡¨ç¤ºæ­£æ•°ï¼Œ1 è¡¨ç¤ºè´Ÿæ•°ã€‚æ­£æ•°è¡¥ç ä¸ŽåŽŸç ç›¸åŒè´Ÿæ•°è¡¥ç é™¤ç¬¦å·ä½å…¶ä½™å„ä½ä¸ŽåŽŸç å–åï¼Œç„¶åŽåŠ  1 æ—¥å¸¸å¼€å‘ä¸­å¸¸ç”¨çš„æ–¹æ³•æˆ‘ä»¬ä¸€èˆ¬ä¼šæŠ½å–å‡ºå…¬ç”¨çš„æ–¹æ³•ï¼Œæƒ³ä½¿ç”¨ä¸€ä¸ªæ“ä½œæ—¥æœŸçš„å·¥å…·ç±»ï¼Œæœ¬æ¥æƒ³ç”¨ Apache çš„ commons åŒ…çš„ DateUtils å·¥å…·ç±»ï¼Œä½†æ˜¯æ²¡æœ‰æ‰¾åˆ°æƒ³è¦çš„æ–¹æ³•ï¼Œè½¬è€Œæ±‚å…¶æ¬¡ä½¿ç”¨ä¹‹å‰åŒäº‹å°è£…çš„å·¥å…·ç±»ï¼Œç»“æžœé‡åˆ°ä¸€ä¸ªé—®é¢˜ã€‚ éœ€æ±‚ï¼šç»™å®šä¸€ä¸ª Date å¯¹è±¡ï¼Œæ‰¾åˆ°ç‰¹å®šå¤©æ•°åŽçš„æ—¥æœŸæ—¶é—´ å·¥å…·ç±»ä»£ç å¦‚ä¸‹ï¼š1234public static Date datetimeAddDay(Date datetime, int day) &#123; datetime.setTime(datetime.getTime() + day * 24 * 60 * 60 * 1000); return datetime;&#125; çŒ›çš„ä¸€çœ‹ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆä¸å¯¹ï¼Œç»“æžœè¿è¡Œæ—¶æ—¥æœŸä¸å¯¹ï¼Œå†™ä¸ªæµ‹è¯•ç±»è·‘äº†ä¸€ä¸‹ï¼Œå¤§åƒä¸€æƒŠï¼ï¼ï¼æµ‹è¯•ç±»ä»£ç ï¼š1234567@Testpublic void testDatetimeAddDay() &#123; Date datetime = new Date(); System.out.println("å½“å‰æ—¶é—´ï¼š" + datetime); Date datetimeAddDay = DateUtil.datetimeAddDay(datetime, 30); System.out.println("30å¤©åŽï¼š" + datetimeAddDay);&#125; è¿è¡Œç»“æžœï¼š è¿™æ—¶é—´è¿˜ç»™æˆ‘å€’å›žåŽ»äº†ï¼ŒåŽŸæ¥æ˜¯å·¥å…·ç±»çš„æ–¹æ³•åŠ çš„æ¯«ç§’æ•°è¶…è¿‡ int ç±»åž‹æœ€å¤§å€¼äº† 2çš„31æ¬¡æ–¹-1ï¼Œç¬¦å·ä½æˆäº† 1ï¼Œæ•´ä½“å˜ä¸ºè´Ÿæ•°ã€‚æ‰€ä»¥å·¥å…·ç±»ä¸­è¿ç®—çš„æ¯«ç§’æ•°ä½¿ç”¨ long ç±»åž‹å³å¯ï¼]]></content>
      <categories>
        <category>æ—¥å¸¸è¸©å‘</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CentOS7.3(64ä½)å®‰è£… MySQL5.7]]></title>
    <url>%2F2017%2F09%2Fcentos-mysql-install%2F</url>
    <content type="text"><![CDATA[CentOS ä¸‹å®‰è£… MySQL æ¯”è¾ƒéº»çƒ¦ï¼Œæ¯ä¸€æ­¥éƒ½æœ‰å‘ï¼Œè¿˜æ˜¯è®°ä¸‹æ¥æ¯”è¾ƒå¥½ O(âˆ©_âˆ©)Oå“ˆå“ˆ~ 1. ä¸‹è½½å®‰è£…åŒ…å®˜ç½‘ ä¸‹è½½æ–‡ä»¶ã€‚ é€‰æ‹©ç³»ç»Ÿç‰ˆæœ¬ å‹¾é€‰å¦‚ä¸‹é€‰é¡¹ä¸‹è½½ï¼š 2. ä¸Šä¼ æœåŠ¡å™¨å¹¶è§£åŽ‹æ³¨ï¼š CentOS7 é¢„è£… MariaDBï¼Œå¯èƒ½æœ‰å†²çªï¼Œå…ˆå¸è½½12$ rpm -qa |grep -i mariadb $ rpm -e --nodeps mariadb-libs-5.5.52-1.el7.x86_64` å†æ‰§è¡Œè§£åŽ‹ï¼š $ tar -xvf mysql-5.7.19-1.el7.x86_64.rpm-bundle.tar 3. å¼€å§‹å®‰è£…æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1234567891011$ rpm -ivh mysql-community-common-5.7.19-1.el7.x86_64.rpm$ rpm -ivh mysql-community-libs-5.7.19-1.el7.x86_64.rpm$ rpm -ivh mysql-community-libs-compat-5.7.19-1.el7.x86_64.rpm $ rpm -ivh mysql-community-client-5.7.19-1.el7.x86_64.rpm$ rpm -ivh mysql-community-server-5.7.19-1.el7.x86_64.rpm$ rpm -ivh mysql-community-devel-5.7.19-1.el7.x86_64.rpm å€’æ•°ç¬¬äºŒæ­¥å¯èƒ½ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š åŽŸå› ï¼šç¼ºå°‘ libaio åº“ è§£å†³æ–¹æ¡ˆï¼šå®‰è£… libaio åº“ ç‚¹æˆ‘ 1$ rpm -ivh libaio-0.3.107-10.el6.x86_64.rpm 4. å¯åŠ¨ MySQL æœåŠ¡å¹¶è®¾ç½®å¼€æœºå¯åŠ¨12345systemctl start mysqldsystemctl enable mysqldsystemctl daemon-reload 5. æ ¹æ®ä¸´æ—¶å¯†ç ç™»å½• MySQL$ vi /var/log/mysqld.log 6. ä¿®æ”¹å¯†ç ç™»å½•åŽå¿…é¡»ä¿®æ”¹å¯†ç ï¼Œä¸ç„¶æ— æ³•æ‰§è¡Œ SQL è¯­å¥ï¼Œä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement. å½“æ‰§è¡Œ ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;wang123&#39;; ä¿®æ”¹å¯†ç æ—¶åˆä¼šæŠ¥ä¸€ä¸‹é”™è¯¯ï¼š ERROR 1819 (HY000): Your password does not satisfy the current policy requirements è¿™ä¸ªé”™è¯¯ä¸Ž validate_password_policy å¯†ç ç­–ç•¥æœ‰å…³ï¼Œæ‰§è¡Œä»¥ä¸‹ä»£ç ä¿®æ”¹ç­–ç•¥ï¼Œæ­¤æ—¶åªä¼šåŸºäºŽé•¿åº¦åˆ¤æ–­ï¼š $ set global validate_password_policy=0;å¤ªå¤æ‚äº†ï¼ŒðŸ˜­ æœªå®Œï¼Œå¾…ç»­ï¼]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>CentOS</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring æ•´åˆ AspectJ çš„ AOP å¤„ç†å¼‚å¸¸]]></title>
    <url>%2F2017%2F08%2Fspring-aop-exception%2F</url>
    <content type="text"><![CDATA[æ³¨ï¼šæœ¬æ–‡åªä»‹ç»å¦‚ä½•å¤„ç†å¼‚å¸¸é€šçŸ¥ å·¥ä½œéœ€è¦ï¼Œä¹‹å‰çš„é¡¹ç›®ä¸Šçº¿åŽï¼ŒåŸºæœ¬æ˜¯é è¿ç»´æŸ¥çœ‹å¹¶å‘çŽ°è¿è¡Œä¸­çš„å¼‚å¸¸ã€‚æ–°çš„é¡¹ç›®å¯åŠ¨ä¸€æ®µæ—¶é—´äº†ï¼Œå•çº¯çš„é è¿ç»´äººå·¥å‘çŽ°ç¨‹åºè¿è¡Œä¸­çš„å¼‚å¸¸æ•ˆçŽ‡ä½Žä¸‹ï¼Œå¯ä»¥åˆ©ç”¨ Spring çš„ AOPï¼ˆAspect Oriented Programmingé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æ¥å®žçŽ°è‡ªåŠ¨æ•èŽ·é¡¹ç›®ä¸­å‘ç”Ÿçš„å¼‚å¸¸ã€‚ 1. åˆ›å»ºä¸€ä¸ª Maven é¡¹ç›®ï¼Œé…ç½® pom æ–‡ä»¶ï¼Œå¼•å…¥ç›¸å…³ä¾èµ– jar åŒ…1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- Spring --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;4.2.4.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-beans&lt;/artifactId&gt; &lt;version&gt;4.2.4.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;4.2.4.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt; &lt;version&gt;4.2.4.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt; &lt;version&gt;4.2.4.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jms&lt;/artifactId&gt; &lt;version&gt;4.2.4.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt; &lt;version&gt;4.2.4.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;3.2.4.RELEASE&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 2. åˆ›å»ºç›®æ ‡ targetï¼Œå³éœ€è¦è¢«å¢žå¼ºçš„ç±»123456789101112import net.okdi.core.service.PromoService;import org.springframework.stereotype.Service;@Servicepublic class PromoServiceImpl implements PromoService &#123; public String insertRecord(String memberId) &#123; System.out.println("å¼€å§‹æ·»åŠ è®°å½•ã€‚ã€‚ã€‚"); int i = 1 / 0; // é™¤0å¼‚å¸¸ System.out.println("æ·»åŠ è®°å½•å®Œæ¯•ã€‚ã€‚ã€‚"); return null; &#125;&#125; 3. åˆ›å»ºé€šçŸ¥ï¼ˆå³å¢žå¼ºç±» adviceï¼‰1234567891011121314151617package net.okdi.core.exception;import org.aspectj.lang.JoinPoint;/** * å¼‚å¸¸é€šçŸ¥å¢žå¼º */public class ExceptionHelper &#123; public void afterThrow(JoinPoint jp, Throwable ex) &#123; System.out.println("************************"); // ç¨‹åºè¿è¡ŒæŠ›å‡ºå¼‚å¸¸åŽçš„ä¸šåŠ¡å¤„ç†... System.out.println("æ­£å¸¸ä¸šåŠ¡å¤„ç†"); System.out.println(ex.getMessage()); System.out.println("************************"); &#125;&#125; åœ¨ aspectj æ¡†æž¶ä¸­å®ƒçš„å¢žå¼ºå¯ä»¥ä¸å®žçŽ°ä»»ä½•æŽ¥å£ï¼Œåªéœ€è¦å®šä¹‰å‡ºå¢žå¼ºåŠŸèƒ½(æ–¹æ³•)ã€‚ä¸¤ä¸ªå‚æ•° JoinPoint å’Œ Exceptionã€‚JoinPoint æ˜¯åˆ‡ç‚¹ï¼Œå®ƒçš„ getArgs() æ–¹æ³•å¯ä»¥èŽ·å–ä¼ å…¥çš„å‚æ•°ï¼›getSignature() æ–¹æ³•è¿”å›žä¸€ä¸ª Signature å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„ getDeclaringTypeName() æ–¹æ³•å¯ä»¥èŽ·å–å¼‚å¸¸å‘ç”Ÿçš„ç±»çš„å…¨è·¯å¾„ï¼ŒgetName() æ–¹æ³•å¯ä»¥èŽ·å–æŠ›å‡ºå¼‚å¸¸çš„æ–¹æ³•ã€‚ 4. åœ¨ Spring çš„ xml é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼ˆæˆ–è€…ä½¿ç”¨ @AfterThrowing æ³¨è§£é…ç½®ï¼‰123456789101112131415161718192021222324&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:context="http://www.springframework.org/schema/context" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.2.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.2.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd"&gt; &lt;!-- æ³¨è§£æ‰«æåŒ… --&gt; &lt;context:component-scan base-package="net.okdi"/&gt; &lt;!-- é…ç½®ç›®æ ‡ --&gt; &lt;bean id="promoService" class="net.okdi.core.service.impl.PromoServiceImpl"/&gt; &lt;!-- é…ç½®é€šçŸ¥ --&gt; &lt;bean id="exceptionAdvice" class="net.okdi.core.exception.ExceptionHelper"/&gt; &lt;!-- aop:configå£°æ˜Žï¼Œaop:aspecté…ç½®åˆ‡é¢ proxy-target-classé»˜è®¤falseï¼ˆæœ‰æŽ¥å£jdkåŠ¨æ€ä»£ç†ï¼Œæ— æŽ¥å£cglibåŠ¨æ€ä»£ç†ï¼‰trueå¼ºåˆ¶cglibä»£ç† --&gt; &lt;aop:config proxy-target-class="true"&gt; &lt;aop:aspect ref="exceptionAdvice"&gt; &lt;aop:after-throwing method="afterThrow" pointcut="execution(* net.okdi.core..*(..))" throwing="ex"/&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt;&lt;/beans&gt; proxy-target-class é»˜è®¤falseï¼ˆæœ‰æŽ¥å£ jdk åŠ¨æ€ä»£ç†ï¼Œæ— æŽ¥å£ cglib åŠ¨æ€ä»£ç†ï¼‰ä¿®æ”¹ä¸º true å¼ºåˆ¶ä½¿ç”¨ cglib åŠ¨æ€ä»£ç†ã€‚ 5. ç¼–å†™æµ‹è¯•ç±»è¿›è¡Œæµ‹è¯•123456789101112131415161718import net.okdi.core.service.PromoService;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.test.context.ContextConfiguration;import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(locations = &#123;"classpath:applicationContext.xml"&#125;)public class Test &#123; @Autowired private PromoService promoService; @org.junit.Test public void test() &#123; promoService.insertRecord(""); &#125;&#125; 6. æµ‹è¯•ç»“æžœè‡³æ­¤ï¼Œåˆ©ç”¨ Spring æ•´åˆ AspectJ æ¡†æž¶è¿›è¡Œ AOP ä¸­çš„å¼‚å¸¸é€šçŸ¥å¤„ç†å¼€å‘å®Œæ¯•ï¼]]></content>
      <categories>
        <category>å·¥ä½œè®°å½•</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>Maven</tag>
        <tag>AOP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[IDEA æ–°å»º Maven é¡¹ç›®]]></title>
    <url>%2F2017%2F08%2Fidea-maven%2F</url>
    <content type="text"><![CDATA[ä»Ž MyEclipse è½¬ IntelliJ IDEAï¼ˆä»¥ä¸‹ç®€ç§°IDEAï¼‰å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œæ·±æ·±ä½“ä¼šåˆ°ä¸€ä¸ªå¼ºå¤§çš„ IDE å¯¹å¼€å‘è€…æ¥è¯´æ˜¯å¤šä¹ˆçš„é‡è¦ï¼ŒIDEA æ‹¥æœ‰å¼ºå¤§çš„å¿«æ·é”®åŠé…·ç‚«çš„ç•Œé¢é£Žæ ¼ï¼ŒèŠ±äº†ç‚¹æ—¶é—´å‹‰å¼ºèƒ½ä¸Šæ‰‹å¼€å‘ï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹Mavené¡¹ç›®çš„åˆ›å»ºã€‚ 1. åˆ›å»ºæ–°é¡¹ç›®ï¼Œå¹¶å‹¾é€‰ä»¥ä¸‹é€‰é¡¹ 2. å¡«å†™ GroupId å’Œ ArtifactId GroupIdï¼šå®šä¹‰äº†é¡¹ç›®å±žäºŽå“ªä¸ªç»„ï¼Œä¸€èˆ¬æ¥è¯´è¿™ä¸ªé€šå¸¸å’Œå…¬å¸æˆ–ç»„ç»‡å…³è”ï¼›ArtifactIdï¼šå®šä¹‰äº†å½“å‰ Maven é¡¹ç›®åœ¨ç»„ä¸­çš„å”¯ä¸€ idã€‚ 3. é…ç½® Mavenï¼ˆå¯ä»¥ç•¥è¿‡ï¼Œåˆ›å»ºå®Œé¡¹ç›®å†è¿›è¡Œæ›´æ”¹ï¼‰ 4. é¡¹ç›®åˆ›å»ºå®ŒæˆåŽï¼Œæ¯æ¬¡é…ç½® pom æ–‡ä»¶éƒ½è¦åˆ·æ–° Maven ä¾èµ– è‡³æ­¤ï¼Œä¸€ä¸ªæ–°çš„åŸºäºŽ Maven ç®¡ç†ä¾èµ– JAR åŒ…çš„ Web é¡¹ç›®åˆ›å»ºå®Œæ¯•ï¼]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>IDEA</tag>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RabbitMQ æ¦‚å¿µ]]></title>
    <url>%2F2017%2F04%2Frabbitmq-started%2F</url>
    <content type="text"><![CDATA[æ¶ˆæ¯æœåŠ¡æ“…é•¿äºŽè§£å†³å¤šç³»ç»Ÿã€å¼‚æž„ç³»ç»Ÿé—´çš„æ•°æ®äº¤æ¢ï¼ˆæ¶ˆæ¯é€šçŸ¥/é€šè®¯ï¼‰é—®é¢˜ï¼Œä¹Ÿå¯ä»¥æŠŠå®ƒç”¨äºŽç³»ç»Ÿé—´æœåŠ¡çš„ç›¸äº’è°ƒç”¨ï¼ˆRPCï¼‰ã€‚ RabbitMQ ç®€ä»‹ AMQPï¼Œå³ Advanced Message Queuing Protocolï¼Œé«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼Œæ˜¯åº”ç”¨å±‚åè®®çš„ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œä¸ºé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶è®¾è®¡ã€‚æ¶ˆæ¯ä¸­é—´ä»¶ä¸»è¦ç”¨äºŽç»„ä»¶ä¹‹é—´çš„è§£è€¦ï¼Œæ¶ˆæ¯çš„å‘é€è€…æ— éœ€çŸ¥é“æ¶ˆæ¯ä½¿ç”¨è€…çš„å­˜åœ¨ï¼Œåä¹‹äº¦ç„¶ã€‚ AMQP çš„ä¸»è¦ç‰¹å¾æ˜¯é¢å‘æ¶ˆæ¯ã€é˜Ÿåˆ—ã€è·¯ç”±ï¼ˆåŒ…æ‹¬ç‚¹å¯¹ç‚¹å’Œå‘å¸ƒ/è®¢é˜…ï¼‰ã€å¯é æ€§ã€å®‰å…¨ã€‚ RabbitMQ æ˜¯ä¸€ä¸ªå¼€æºçš„ AMQP å®žçŽ°ï¼ŒæœåŠ¡å™¨ç«¯ç”¨ Erlang è¯­è¨€ç¼–å†™ï¼Œæ”¯æŒå¤šç§å®¢æˆ·ç«¯ï¼Œå¦‚ï¼šPythonã€Rubyã€.NETã€Javaã€JMSã€Cã€PHPã€ActionScriptã€XMPPã€STOMP ç­‰ï¼Œæ”¯æŒ AJAXã€‚ç”¨äºŽåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å­˜å‚¨è½¬å‘æ¶ˆæ¯ï¼Œåœ¨æ˜“ç”¨æ€§ã€æ‰©å±•æ€§ã€é«˜å¯ç”¨æ€§ç­‰æ–¹é¢è¡¨çŽ°ä¸ä¿—ã€‚ å¸¸ç”¨ API å¯¹è±¡ ConnectionFactoryã€Connectionã€Channel éƒ½æ˜¯ RabbitMQ å¯¹å¤–æä¾›çš„ API ä¸­æœ€åŸºæœ¬çš„å¯¹è±¡ã€‚Connection æ˜¯ RabbitMQ çš„ socket é“¾æŽ¥ï¼Œå®ƒå°è£…äº† socket åè®®ç›¸å…³éƒ¨åˆ†é€»è¾‘ã€‚ConnectionFactory ä¸º Connection çš„åˆ¶é€ å·¥åŽ‚ã€‚Channel æ˜¯æˆ‘ä»¬ä¸Ž RabbitMQ æ‰“äº¤é“çš„æœ€é‡è¦çš„ä¸€ä¸ªæŽ¥å£ï¼Œæˆ‘ä»¬å¤§éƒ¨åˆ†çš„ä¸šåŠ¡æ“ä½œæ˜¯åœ¨ Channel è¿™ä¸ªæŽ¥å£ä¸­å®Œæˆçš„ï¼ŒåŒ…æ‹¬å®šä¹‰ Queueã€å®šä¹‰ Exchangeã€ç»‘å®š Queue ä¸Ž Exchangeã€å‘å¸ƒæ¶ˆæ¯ç­‰ã€‚ Queue Queueï¼ˆé˜Ÿåˆ—ï¼‰æ˜¯ RabbitMQ çš„å†…éƒ¨å¯¹è±¡ï¼Œç”¨äºŽå­˜å‚¨æ¶ˆæ¯ RabbitMQ ä¸­çš„æ¶ˆæ¯éƒ½åªèƒ½å­˜å‚¨åœ¨ Queue ä¸­ï¼Œç”Ÿäº§è€…ï¼ˆPï¼‰ç”Ÿäº§æ¶ˆæ¯å¹¶æœ€ç»ˆï¼ˆä¸­é—´ä¼šç»è¿‡äº¤æ¢å™¨ï¼‰æŠ•é€’åˆ° Queue ä¸­ï¼Œæ¶ˆè´¹è€…ï¼ˆCï¼‰å¯ä»¥ä»Ž Queue ä¸­èŽ·å–æ¶ˆæ¯å¹¶æ¶ˆè´¹ã€‚ å¤šä¸ªæ¶ˆè´¹è€…å¯ä»¥è®¢é˜…åŒä¸€ä¸ª Queueï¼Œè¿™æ—¶ Queue ä¸­çš„æ¶ˆæ¯ä¼šè¢«å¹³å‡åˆ†æ‘Šç»™å¤šä¸ªæ¶ˆè´¹è€…è¿›è¡Œå¤„ç†ï¼Œè€Œä¸æ˜¯æ¯ä¸ªæ¶ˆè´¹è€…éƒ½æ”¶åˆ°æ‰€æœ‰çš„æ¶ˆæ¯å¹¶å¤„ç†ã€‚ æ¶ˆæ¯å›žæ‰§ï¼ˆMessage acknowledgmentï¼‰ åœ¨å®žé™…åº”ç”¨ä¸­ï¼Œå¯èƒ½ä¼šå‘ç”Ÿæ¶ˆè´¹è€…æ”¶åˆ° Queue ä¸­çš„æ¶ˆæ¯ï¼Œä½†æ²¡æœ‰å¤„ç†å®Œæˆå°±å®•æœºï¼ˆæˆ–å‡ºçŽ°å…¶ä»–æ„å¤–ï¼‰çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µä¸‹å°±å¯èƒ½ä¼šå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œæˆ‘ä»¬å¯ä»¥è¦æ±‚æ¶ˆè´¹è€…åœ¨æ¶ˆè´¹å®Œæ¶ˆæ¯åŽå‘é€ä¸€ä¸ªå›žæ‰§ç»™ RabbitMQï¼ŒRabbitMQ æ”¶åˆ°æ¶ˆæ¯å›žæ‰§ï¼ˆMessage acknowledgmentï¼‰åŽæ‰å°†è¯¥æ¶ˆæ¯ä»Ž Queue ä¸­ç§»é™¤ï¼›å¦‚æžœ RabbitMQ æ²¡æœ‰æ”¶åˆ°å›žæ‰§å¹¶æ£€æµ‹åˆ°æ¶ˆè´¹è€…çš„ RabbitMQ è¿žæŽ¥æ–­å¼€ï¼Œåˆ™ RabbitMQ ä¼šå°†è¯¥æ¶ˆæ¯å‘é€ç»™å…¶ä»–æ¶ˆè´¹è€…ï¼ˆå¦‚æžœå­˜åœ¨å¤šä¸ªæ¶ˆè´¹è€…ï¼‰è¿›è¡Œå¤„ç†ã€‚è¿™é‡Œä¸å­˜åœ¨ timeout æ¦‚å¿µï¼Œ ä¸€ä¸ªæ¶ˆè´¹è€…å¤„ç†æ¶ˆæ¯æ—¶é—´å†é•¿ä¹Ÿä¸ä¼šå¯¼è‡´è¯¥æ¶ˆæ¯è¢«å‘é€ç»™å…¶ä»–æ¶ˆè´¹è€…ï¼Œé™¤éžå®ƒçš„ RabbitMQ è¿žæŽ¥æ–­å¼€ã€‚ è¿™é‡Œä¼šäº§ç”Ÿå¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æžœå¼€å‘äººå‘˜åœ¨å¤„ç†å®Œä¸šåŠ¡é€»è¾‘åŽï¼Œå¿˜è®°å‘é€å›žæ‰§ç»™ RabbitMQï¼Œè¿™å°†ä¼šå¯¼è‡´ä¸¥é‡çš„ bugâ€”â€”Queue ä¸­å †ç§¯çš„æ¶ˆæ¯ä¼šè¶Šæ¥è¶Šå¤šï¼Œæ¶ˆè´¹è€…é‡å¯åŽä¼šé‡å¤æ¶ˆè´¹è¿™äº›æ¶ˆæ¯å¹¶é‡å¤æ‰§è¡Œä¸šåŠ¡é€»è¾‘â€¦ å¦å¤– publish messageï¼ˆå‘é€æ¶ˆæ¯ï¼‰æ˜¯æ²¡æœ‰ ack çš„ã€‚ æ¶ˆæ¯æŒä¹…åŒ–ï¼ˆMessage durabilityï¼‰ å¦‚æžœæˆ‘ä»¬å¸Œæœ›å³ä½¿åœ¨ RabbitMQ æœåŠ¡é‡å¯çš„æƒ…å†µä¸‹ï¼Œä¹Ÿä¸ä¼šä¸¢å¤±æ¶ˆæ¯ï¼Œæˆ‘ä»¬å¯ä»¥å°† Queue ä¸Ž Message éƒ½è®¾ç½®ä¸ºå¯æŒä¹…åŒ–çš„ï¼ˆdurableï¼‰, è¿™æ ·å¯ä»¥ä¿è¯ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹æˆ‘ä»¬çš„ RabbitMQ æ¶ˆæ¯ä¸ä¼šä¸¢å¤±ã€‚ä½†ä¾ç„¶è§£å†³ä¸äº†å°æ¦‚çŽ‡ä¸¢å¤±äº‹ä»¶çš„å‘ç”Ÿï¼ˆæ¯”å¦‚ RabbitMQ æœåŠ¡å™¨å·²ç»æŽ¥æ”¶åˆ°ç”Ÿäº§è€…çš„æ¶ˆæ¯ï¼Œä½†è¿˜æ²¡æ¥å¾—åŠæŒä¹…åŒ–è¯¥æ¶ˆæ¯æ—¶ RabbitMQ æœåŠ¡å™¨å°±æ–­ç”µäº†ï¼‰ï¼Œå¦‚æžœæˆ‘ä»¬éœ€è¦å¯¹è¿™ç§å°æ¦‚çŽ‡äº‹ä»¶ä¹Ÿè¦ç®¡ç†èµ·æ¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦ç”¨åˆ°äº‹åŠ¡ã€‚ Prefetch count å¦‚æžœæœ‰å¤šä¸ªæ¶ˆè´¹è€…åŒæ—¶è®¢é˜…åŒä¸€ä¸ª Queue ä¸­çš„æ¶ˆæ¯ï¼ŒQueue ä¸­çš„æ¶ˆæ¯ä¼šè¢«å¹³æ‘Šç»™å¤šä¸ªæ¶ˆè´¹è€…ã€‚è¿™æ—¶å¦‚æžœæ¯ä¸ªæ¶ˆæ¯çš„å¤„ç†æ—¶é—´ä¸åŒï¼Œå°±æœ‰å¯èƒ½ä¼šå¯¼è‡´æŸäº›æ¶ˆè´¹è€…ä¸€ç›´åœ¨å¿™ï¼Œè€Œå¦å¤–ä¸€äº›æ¶ˆè´¹è€…å¾ˆå¿«å°±å¤„ç†å®Œæ‰‹å¤´å·¥ä½œå¹¶ä¸€ç›´ç©ºé—²çš„æƒ…å†µã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½® prefetchCount æ¥é™åˆ¶ Queue æ¯æ¬¡å‘é€ç»™æ¯ä¸ªæ¶ˆè´¹è€…çš„æ¶ˆæ¯æ•°ï¼Œæ¯”å¦‚æˆ‘ä»¬è®¾ç½® prefetchCount=1ï¼Œåˆ™ Queue æ¯æ¬¡ç»™æ¯ä¸ªæ¶ˆè´¹è€…å‘é€ä¸€æ¡æ¶ˆæ¯ï¼›æ¶ˆè´¹è€…å¤„ç†å®Œè¿™æ¡æ¶ˆæ¯åŽ Queue ä¼šå†ç»™è¯¥æ¶ˆè´¹è€…å‘é€ä¸€æ¡æ¶ˆæ¯ã€‚ äº¤æ¢å™¨ï¼ˆExchangeï¼‰ å®žé™…çš„æƒ…å†µä¸‹ï¼Œç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€åˆ° Exchangeï¼ˆäº¤æ¢å™¨ï¼Œä¸‹å›¾ä¸­çš„ Xï¼‰ï¼Œç”± Exchange å°†æ¶ˆæ¯è·¯ç”±åˆ°ä¸€ä¸ªæˆ–å¤šä¸ª Queue ä¸­ï¼ˆæˆ–è€…ä¸¢å¼ƒï¼‰ã€‚ ç»‘å®šï¼ˆBindingï¼‰ RabbitMQ ä¸­é€šè¿‡ Binding å°† Exchange ä¸Ž Queueå…³è”èµ·æ¥ï¼Œè¿™æ · RabbitMQ å°±çŸ¥é“å¦‚ä½•æ­£ç¡®åœ°å°†æ¶ˆæ¯è·¯ç”±åˆ°æŒ‡å®šçš„ Queue äº†ã€‚ Routing keyã€Binding key ç”Ÿäº§è€…åœ¨å°†æ¶ˆæ¯å‘é€ç»™ Exchange çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šæŒ‡å®šä¸€ä¸ª routing keyï¼Œæ¥æŒ‡å®šè¿™ä¸ªæ¶ˆæ¯çš„è·¯ç”±è§„åˆ™ï¼Œè€Œè¿™ä¸ª routing key éœ€è¦ä¸Ž Exchange Type åŠ binding key è”åˆä½¿ç”¨æ‰èƒ½æœ€ç»ˆç”Ÿæ•ˆã€‚ åœ¨ Exchange Type ä¸Ž binding key å›ºå®šçš„æƒ…å†µä¸‹ï¼ˆåœ¨æ­£å¸¸ä½¿ç”¨æ—¶ä¸€èˆ¬è¿™äº›å†…å®¹éƒ½æ˜¯å›ºå®šé…ç½®å¥½çš„ï¼‰ï¼Œæˆ‘ä»¬çš„ç”Ÿäº§è€…å°±å¯ä»¥åœ¨å‘é€æ¶ˆæ¯ç»™ Exchange æ—¶ï¼Œé€šè¿‡æŒ‡å®š routing key æ¥å†³å®šæ¶ˆæ¯æµå‘å“ªé‡Œã€‚ RabbitMQ ä¸º routing key è®¾å®šçš„é•¿åº¦é™åˆ¶ä¸º 255 bytesã€‚ åœ¨ç»‘å®šï¼ˆBindingï¼‰Exchange ä¸Ž Queue çš„åŒæ—¶ï¼Œä¸€èˆ¬ä¼šæŒ‡å®šä¸€ä¸ª binding keyï¼›æ¶ˆè´¹è€…å°†æ¶ˆæ¯å‘é€ç»™ Exchange æ—¶ï¼Œä¸€èˆ¬ä¼šæŒ‡å®šä¸€ä¸ª routing keyï¼›å½“ binding key ä¸Ž routing key ç›¸åŒ¹é…æ—¶ï¼Œæ¶ˆæ¯å°†ä¼šè¢«è·¯ç”±åˆ°å¯¹åº”çš„ Queue ä¸­ã€‚ Exchange Types fanoutæŠŠæ‰€æœ‰å‘é€åˆ°è¯¥ Exchange çš„æ¶ˆæ¯è·¯ç”±åˆ°æ‰€æœ‰ä¸Žå®ƒç»‘å®šçš„ Queue ä¸­ã€‚ direct æŠŠæ¶ˆæ¯è·¯ç”±åˆ°é‚£äº› binding key ä¸Ž routing key å®Œå…¨åŒ¹é…çš„ Queue ä¸­ã€‚ ä»¥ routingKey=â€errorâ€ å‘é€æ¶ˆæ¯åˆ° Exchangeï¼Œåˆ™æ¶ˆæ¯ä¼šè·¯ç”±åˆ° Queue1ï¼ˆamqp.gen-S9bâ€¦ï¼Œè¿™æ˜¯ç”± RabbitMQ è‡ªåŠ¨ç”Ÿæˆçš„ Queue åç§°ï¼‰å’Œ Queue2ï¼ˆamqp.gen-Aglâ€¦ï¼‰ï¼›å¦‚æžœæˆ‘ä»¬ä»¥ routingKey=â€infoâ€æˆ– routingKey=â€warningâ€æ¥å‘é€æ¶ˆæ¯ï¼Œåˆ™æ¶ˆæ¯åªä¼šè·¯ç”±åˆ° Queue2ã€‚å¦‚æžœæˆ‘ä»¬ä»¥å…¶ä»– routingKey å‘é€æ¶ˆæ¯ï¼Œåˆ™æ¶ˆæ¯ä¸ä¼šè·¯ç”±åˆ°è¿™ä¸¤ä¸ª Queue ä¸­ã€‚ topic å‰é¢è®²åˆ° direct ç±»åž‹çš„ Exchange è·¯ç”±è§„åˆ™æ˜¯å®Œå…¨åŒ¹é… binding key ä¸Ž routing keyï¼Œä½†è¿™ç§ä¸¥æ ¼çš„åŒ¹é…æ–¹å¼åœ¨å¾ˆå¤šæƒ…å†µä¸‹ä¸èƒ½æ»¡è¶³å®žé™…ä¸šåŠ¡éœ€æ±‚ã€‚topic ç±»åž‹çš„ Exchange åœ¨åŒ¹é…è§„åˆ™ä¸Šè¿›è¡Œäº†æ‰©å±•ï¼Œå®ƒä¸Ž direct ç±»åž‹çš„ Exchage ç›¸ä¼¼ï¼Œä¹Ÿæ˜¯å°†æ¶ˆæ¯è·¯ç”±åˆ° binding key ä¸Ž routing key ç›¸åŒ¹é…çš„ Queue ä¸­ï¼Œä½†è¿™é‡Œçš„åŒ¹é…è§„åˆ™æœ‰äº›ä¸åŒï¼Œå®ƒçº¦å®šï¼š 1&gt; routing key ä¸ºä¸€ä¸ªå¥ç‚¹å·â€œ.â€åˆ†éš”çš„å­—ç¬¦ä¸²ï¼ˆæˆ‘ä»¬å°†è¢«å¥ç‚¹å·â€œ.â€åˆ†éš”å¼€çš„æ¯ä¸€æ®µç‹¬ç«‹çš„å­—ç¬¦ä¸²ç§°ä¸ºä¸€ä¸ªå•è¯ï¼‰ï¼Œå¦‚â€œstock.usd.nyseâ€ã€â€œnyse.vmwâ€ã€â€œquick.orange.rabbitâ€ 2&gt; binding key ä¸Ž routing key ä¸€æ ·ä¹Ÿæ˜¯å¥ç‚¹å·â€œ.â€åˆ†éš”çš„å­—ç¬¦ä¸² 3&gt; binding key ä¸­å¯ä»¥å­˜åœ¨ä¸¤ç§ç‰¹æ®Šå­—ç¬¦â€œâ€ä¸Žâ€œ#â€ï¼Œç”¨äºŽåšæ¨¡ç³ŠåŒ¹é…ï¼Œå…¶ä¸­â€œâ€ç”¨äºŽåŒ¹é…ä¸€ä¸ªå•è¯ï¼Œâ€œ#â€ç”¨äºŽåŒ¹é…å¤šä¸ªå•è¯ï¼ˆå¯ä»¥æ˜¯é›¶ä¸ªï¼‰ ä»¥ä¸Šå›¾ä¸­çš„é…ç½®ä¸ºä¾‹ï¼Œ routingKey=â€quick.orange.rabbitâ€çš„æ¶ˆæ¯ä¼šåŒæ—¶è·¯ç”±åˆ° Q1 ä¸Ž Q2 routingKey=â€lazy.orange.foxâ€çš„æ¶ˆæ¯ä¼šè·¯ç”±åˆ° Q1 ä¸Ž Q2 routingKey=â€lazy.brown.foxâ€çš„æ¶ˆæ¯ä¼šè·¯ç”±åˆ° Q2 routingKey=â€lazy.pink.rabbitâ€çš„æ¶ˆæ¯ä¼šè·¯ç”±åˆ° Q2ï¼ˆåªä¼šæŠ•é€’ç»™ Q2 ä¸€æ¬¡ï¼Œè™½ç„¶è¿™ä¸ª routingKey ä¸Ž Q2 çš„ä¸¤ä¸ª bindingKey éƒ½åŒ¹é…ï¼‰ routingKey=â€quick.brown.foxâ€ã€routingKey=â€orangeâ€ã€routingKey=â€quick.orange.male.rabbitâ€çš„æ¶ˆæ¯å°†ä¼šè¢«ä¸¢å¼ƒï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰åŒ¹é…ä»»ä½• bindingKeyã€‚ headers headers ç±»åž‹çš„ Exchange ä¸ä¾èµ–äºŽ routing key ä¸Ž binding key çš„åŒ¹é…è§„åˆ™æ¥è·¯ç”±æ¶ˆæ¯ï¼Œè€Œæ˜¯æ ¹æ®å‘é€çš„æ¶ˆæ¯å†…å®¹ä¸­çš„ headers å±žæ€§è¿›è¡ŒåŒ¹é…ã€‚ åœ¨ç»‘å®š Queue ä¸Ž Exchange æ—¶æŒ‡å®šä¸€ç»„é”®å€¼å¯¹ï¼›å½“æ¶ˆæ¯å‘é€åˆ° Exchange æ—¶ï¼ŒRabbitMQ ä¼šå–åˆ°è¯¥æ¶ˆæ¯çš„ headersï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªé”®å€¼å¯¹çš„å½¢å¼ï¼‰ï¼Œå¯¹æ¯”å…¶ä¸­çš„é”®å€¼å¯¹æ˜¯å¦å®Œå…¨åŒ¹é… Queue ä¸Ž Exchange ç»‘å®šæ—¶æŒ‡å®šçš„é”®å€¼å¯¹ï¼›å¦‚æžœå®Œå…¨åŒ¹é…åˆ™æ¶ˆæ¯ä¼šè·¯ç”±åˆ°è¯¥ Queueï¼Œå¦åˆ™ä¸ä¼šè·¯ç”±åˆ°è¯¥ Queueã€‚ è¿œç¨‹è°ƒç”¨ï¼ˆRPCï¼‰ MQ æœ¬èº«æ˜¯åŸºäºŽå¼‚æ­¥çš„æ¶ˆæ¯å¤„ç†ï¼Œå‰é¢çš„ç¤ºä¾‹ä¸­æ‰€æœ‰çš„ç”Ÿäº§è€…ï¼ˆPï¼‰å°†æ¶ˆæ¯å‘é€åˆ° RabbitMQ åŽä¸ä¼šçŸ¥é“æ¶ˆè´¹è€…ï¼ˆCï¼‰å¤„ç†æˆåŠŸæˆ–è€…å¤±è´¥ï¼ˆç”šè‡³è¿žæœ‰æ²¡æœ‰æ¶ˆè´¹è€…æ¥å¤„ç†è¿™æ¡æ¶ˆæ¯éƒ½ä¸çŸ¥é“ï¼‰ã€‚ ä½†å®žé™…çš„åº”ç”¨åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¾ˆå¯èƒ½éœ€è¦ä¸€äº›åŒæ­¥å¤„ç†ï¼Œéœ€è¦åŒæ­¥ç­‰å¾…æœåŠ¡ç«¯å°†æˆ‘çš„æ¶ˆæ¯å¤„ç†å®ŒæˆåŽå†è¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†ã€‚è¿™ç›¸å½“äºŽ RPCï¼ˆRemote Procedure Callï¼Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰ã€‚åœ¨ RabbitMQ ä¸­ä¹Ÿæ”¯æŒ RPCã€‚ RabbitMQ ä¸­å®žçŽ° RPC çš„æœºåˆ¶æ˜¯ï¼š å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼ˆæ¶ˆæ¯ï¼‰æ—¶ï¼Œåœ¨æ¶ˆæ¯çš„å±žæ€§ï¼ˆMessagePropertiesï¼Œåœ¨ AMQP åè®®ä¸­å®šä¹‰äº† 14 ç§ propertiesï¼Œè¿™äº›å±žæ€§ä¼šéšç€æ¶ˆæ¯ä¸€èµ·å‘é€ï¼‰ä¸­è®¾ç½®ä¸¤ä¸ªå€¼ replyToï¼ˆä¸€ä¸ª Queue åç§°ï¼Œç”¨äºŽå‘Šè¯‰æœåŠ¡å™¨å¤„ç†å®ŒæˆåŽå°†é€šçŸ¥æˆ‘çš„æ¶ˆæ¯å‘é€åˆ°è¿™ä¸ª Queue ä¸­ï¼‰å’Œ correlationIdï¼ˆæ­¤æ¬¡è¯·æ±‚çš„æ ‡è¯†å·ï¼ŒæœåŠ¡å™¨å¤„ç†å®ŒæˆåŽéœ€è¦å°†æ­¤å±žæ€§è¿”è¿˜ï¼Œå®¢æˆ·ç«¯å°†æ ¹æ®è¿™ä¸ª id äº†è§£å“ªæ¡è¯·æ±‚è¢«æˆåŠŸæ‰§è¡Œäº†æˆ–æ‰§è¡Œå¤±è´¥ï¼‰ æœåŠ¡å™¨ç«¯æ”¶åˆ°æ¶ˆæ¯å¹¶å¤„ç† æœåŠ¡å™¨ç«¯å¤„ç†å®Œæ¶ˆæ¯åŽï¼Œå°†ç”Ÿæˆä¸€æ¡åº”ç­”æ¶ˆæ¯åˆ° replyTo æŒ‡å®šçš„ Queueï¼ŒåŒæ—¶å¸¦ä¸Š correlationId å±žæ€§ å®¢æˆ·ç«¯ä¹‹å‰å·²è®¢é˜… replyTo æŒ‡å®šçš„ Queueï¼Œä»Žä¸­æ”¶åˆ°æœåŠ¡å™¨çš„åº”ç­”æ¶ˆæ¯åŽï¼Œæ ¹æ®å…¶ä¸­çš„ correlationId å±žæ€§åˆ†æžå“ªæ¡è¯·æ±‚è¢«æ‰§è¡Œäº†ï¼Œæ ¹æ®æ‰§è¡Œç»“æžœè¿›è¡ŒåŽç»­ä¸šåŠ¡å¤„ç† å‚è€ƒï¼š http://blog.csdn.net/whycold/article/details/41119807]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
</search>
